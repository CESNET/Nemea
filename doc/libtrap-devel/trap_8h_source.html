<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Libtrap: Internal development docs: include/libtrap/trap.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Libtrap: Internal development docs
   &#160;<span id="projectnumber">0.11.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_d10f943620c8cf996cd13f7b110dc16f.html">libtrap</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">trap.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="trap_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * \file trap.h</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * \brief Interface of TRAP library.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * \author Vaclav Bartos &lt;ibartosv@fit.vutbr.cz&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * \author Tomas Cejka &lt;cejkat@cesnet.cz&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * \date 2013</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * \date 2014</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * Copyright (C) 2013,2014 CESNET</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * LICENSE TERMS</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * are met:</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *    the documentation and/or other materials provided with the</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *    distribution.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * 3. Neither the name of the Company nor the names of its contributors</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *    may be used to endorse or promote products derived from this</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *    software without specific prior written permission.</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * ALTERNATIVELY, provided that this notice is retained in full, this</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * product may be distributed under the terms of the GNU General Public</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * License (GPL) version 2 or later, in which case the provisions</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * of the GPL apply INSTEAD OF those given above.</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * This software is provided ``as is&#39;&#39;, and any express or implied</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * warranties, including, but not limited to, the implied warranties of</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * merchantability and fitness for a particular purpose are disclaimed.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * In no event shall the company or contributors be liable for any</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * direct, indirect, incidental, special, exemplary, or consequential</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * damages (including, but not limited to, procurement of substitute</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * goods or services; loss of use, data, or profits; or business</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * interruption) however caused and on any theory of liability, whether</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> * in contract, strict liability, or tort (including negligence or</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * otherwise) arising in any way out of the use of this software, even</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> * if advised of the possibility of such damage.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#ifndef _TRAP_H_</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#define _TRAP_H_</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;trap_module_info.h&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;jansson.h&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">   59</a></span>&#160;<span class="preprocessor">#define trap_ctx_t void</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * \defgroup commonapi Common libtrap API</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> * This module declares basic public constants, structures and functions of libtrap.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> * @{</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> * Text string with libtrap version.</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="group__commonapi.html#gabc3ef5d4460eee3691cc57d54ad3ee04">trap_version</a>[];</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> * Text string with Git revision of libtrap.</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="group__commonapi.html#gaf27b94a242d49569cd6f943023176083">trap_git_version</a>[];</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> * Text string with default path format to sockets (UNIX IFC and service IFC).</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> * Assigned in ifc_tcpip.h</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">char</span> *<a class="code" href="group__commonapi.html#gaf7b7bed58a3f3c7900264fd442613526">trap_default_socket_path_format</a>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"> * \defgroup errorcodes Error codes</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> * @{*/</span></div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga6aabff248f6e15e2e53b06cfd1e8349a">   87</a></span>&#160;<span class="preprocessor">#define TRAP_E_OK 0 </span><span class="comment">///&lt; Success, no error</span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="group__errorcodes.html#gaac3c26d22e1f37413af205a7a70a058c">   88</a></span>&#160;<span class="comment"></span>#define TRAP_E_TIMEOUT 1 <span class="comment">///&lt; Read or write operation timeout</span></div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga375c24128023c61e9e8fc4a395dd56ac">   89</a></span>&#160;<span class="comment"></span>#define TRAP_E_INITIALIZED 10 <span class="comment">///&lt; TRAP library already initilized</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga8481def38edb03ade169c7f2b9b38080">   90</a></span>&#160;<span class="comment"></span>#define TRAP_E_BADPARAMS 11 <span class="comment">///&lt; Bad parameters passed to interface initializer</span></div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga70ce5da2e8e3e757782469917d2edb5c">   91</a></span>&#160;<span class="comment"></span>#define TRAP_E_BAD_IFC_INDEX 12 <span class="comment">///&lt; Interface index out of range</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga37d23208a014682eedb38ee051a95839">   92</a></span>&#160;<span class="comment"></span>#define TRAP_E_BAD_FPARAMS 13 <span class="comment">///&lt; Bad parameters of function</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="group__errorcodes.html#gaa814c8dadce409fc1fa10c5f70df3a0f">   93</a></span>&#160;<span class="comment"></span>#define TRAP_E_IO_ERROR 14 <span class="comment">///&lt; IO Error</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="group__errorcodes.html#gaa00d25205d918e414549f8b110e46c18">   94</a></span>&#160;<span class="comment"></span>#define TRAP_E_TERMINATED 15 <span class="comment">///&lt; Interface was terminated during reading/writing</span></div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="group__errorcodes.html#gae0d81b475cb6808af4a63fe27e34ebec">   95</a></span>&#160;<span class="comment"></span>#define TRAP_E_NOT_SELECTED 16 <span class="comment">///&lt; Interface was not selected reading/writing</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="group__errorcodes.html#gafa94e2a269d90c1356914317b858974e">   96</a></span>&#160;<span class="comment"></span>#define TRAP_E_BAD_CERT 17 <span class="comment">///&lt; Wrong certificate given to TLS interface</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga72b3751575ccae7cccb3c3610bd93974">   97</a></span>&#160;<span class="comment"></span>#define TRAP_E_HELP 20 <span class="comment">///&lt; Returned by parse_parameters when help is requested</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga1b18b576a339cd04c39f4a25cefb88a6">   98</a></span>&#160;<span class="comment"></span>#define TRAP_E_FIELDS_MISMATCH 21 <span class="comment">///&lt; Returned when receiver fields are not subset of sender fields</span></div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga5e856388d29981f44820a877010f02cb">   99</a></span>&#160;<span class="comment"></span>#define TRAP_E_FIELDS_SUBSET 22 <span class="comment">///&lt; Returned when receivers fields are subset of senders fields and both sets are not identical</span></div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="group__errorcodes.html#gafddd362476ea8d5ecb1f8097c985f3f6">  100</a></span>&#160;<span class="comment"></span>#define TRAP_E_FORMAT_CHANGED 23 <span class="comment">///&lt; Returned by trap_recv when format or format spec of the receivers interface has been changed</span></div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga289de5fd2150cb4c6d768a8a64deca61">  101</a></span>&#160;<span class="comment"></span>#define TRAP_E_FORMAT_MISMATCH 24 <span class="comment">///&lt; Returned by trap_recv when data format or data specifier of the output and input interfaces doesn&#39;t match</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="group__errorcodes.html#gaa49e5036605bb9cab9948bc086a26fa3">  102</a></span>&#160;<span class="comment"></span>#define TRAP_E_NOT_INITIALIZED 254 <span class="comment">///&lt; TRAP library not initilized</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="group__errorcodes.html#ga79663abf02abe99caaed1d00477948fd">  103</a></span>&#160;<span class="comment"></span>#define TRAP_E_MEMORY 255 <span class="comment">///&lt; Memory allocation error</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span><span class="comment">/**@}*/</span><span class="preprocessor"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"> * All &#39;ones&#39; constant for binary operations...</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="group__commonapi.html#ga109da88991df05299ab3e07e49a7923f">  109</a></span>&#160;<span class="preprocessor">#define TRAP_MASK_ALL 0xffffffff</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"> * \defgroup trap_timeout TRAP Timeout</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"> * TRAP IFC works with timeout to decide wether it should block or just wait</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"> * for some time.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"> * The timeout is usually in microseconds.</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> * This section lists some special timeout values.</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> * @{</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> */</span><span class="comment"></span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> * Non-Blocking mode, do not wait ever.</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="group__trap__timeout.html#gafe708bb8b54eb0ae9ce0c4c5c856422c">  123</a></span>&#160;<span class="preprocessor">#define TRAP_NO_WAIT 0</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * Blocking mode, wait for client&#39;s connection, for message transport to/from</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> * internal system buffer.</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="group__trap__timeout.html#ga156f1352bbbff4850a36dbb81b0a7d5b">  128</a></span>&#160;<span class="preprocessor">#define TRAP_WAIT -1</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> * Blocking mode, do not wait for client&#39;s connection, clients do not try to</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> * reconnect, there is no recovering of clients during get_data/send_data in this mode.</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment"> * For input ifc it is the same as TRAP_NO_WAIT.</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="group__trap__timeout.html#gaca9cc2b565d7f211242da01fd963cc41">  134</a></span>&#160;<span class="preprocessor">#define TRAP_HALFWAIT -2</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="group__trap__timeout.html#ga5a6b1a7cda4408951076eaff4d4cf196">  136</a></span>&#160;<span class="preprocessor">#define TRAP_TIMEOUT_STR(t) (t==TRAP_WAIT?&quot;TRAP_WAIT&quot;:(t==TRAP_NO_WAIT?&quot;TRAP_NO_WAIT&quot;:(t==TRAP_HALFWAIT?&quot;TRAP_HALFWAIT&quot;:&quot;&quot;)))</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="group__trap__timeout.html#gaf0f4e37c635e9cfbd6bba0e0c5d6dfb4">  138</a></span>&#160;<span class="preprocessor">#define TRAP_NO_AUTO_FLUSH (-1l) </span><span class="comment">///&lt; value to disable autoflushing on output interface</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">/**@}*/</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment"> * \defgroup trapifcspec Specifier of TRAP interfaces</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"> * The format of -i parameter of modules sets up TRAP interfaces.</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"> * #TRAP_IFC_DELIMITER divides specifier into interfaces.</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"> * #TRAP_IFC_PARAM_DELIMITER divides parameters of one interface.</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"> * Each TRAP interface must have the type (\ref ifctypes) as the first parameter.</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"> * The following parameters are passed to the interface and they are interface-dependent.</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"> * The format example, let&#39;s assume the module has 1 input IFC and 1 output IFC:</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> *  &lt;BLOCKQUOTE&gt;-i t:localhost:7600,u:my_socket&lt;/BLOCKQUOTE&gt;</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> * This sets the input IFC to TCP type and it will connect to localhost, port 7600.</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"> * The output IFC will listen on UNIX socket with identifier my_socket.</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"> * @{</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"> * Delimiter of TRAP interfaces in IFC specifier</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="group__trapifcspec.html#gaf8273a2dc10334433a3b44975b7f92cd">  164</a></span>&#160;<span class="preprocessor">#define TRAP_IFC_DELIMITER &#39;,&#39;</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"> * Delimiter of TRAP interface&#39;s parameters in IFC specifier</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="group__trapifcspec.html#gaae7f619c830ebcece693cc93a949c431">  169</a></span>&#160;<span class="preprocessor">#define TRAP_IFC_PARAM_DELIMITER &#39;:&#39;</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment"> * \defgroup ifctypes Types of IFC</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"> * @{</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="group__ifctypes.html#gaea41bbf6790057fe3c897a27c62dd0cc">  175</a></span>&#160;<span class="preprocessor">#define TRAP_IFC_TYPE_GENERATOR &#39;g&#39; </span><span class="comment">///&lt; trap_ifc_dummy generator (input)</span></div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="group__ifctypes.html#ga5a22170d15ca946f6ff6549f7fd12a3b">  176</a></span>&#160;<span class="comment"></span>#define TRAP_IFC_TYPE_BLACKHOLE &#39;b&#39; <span class="comment">///&lt; trap_ifc_dummy blackhole (output)</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="group__ifctypes.html#gaac77f233f3bbd4a99f05bc2816377562">  177</a></span>&#160;<span class="comment"></span>#define TRAP_IFC_TYPE_TCPIP     &#39;t&#39; <span class="comment">///&lt; trap_ifc_tcpip (input&amp;output part)</span></div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="group__ifctypes.html#ga54311acf0e90b37e0c13fb201370882e">  178</a></span>&#160;<span class="comment"></span>#define TRAP_IFC_TYPE_TLS       &#39;T&#39; <span class="comment">///&lt; trap_ifc_tls (input&amp;output part)</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="group__ifctypes.html#ga91f122067a6b83738d2b3bc976e7bf0d">  179</a></span>&#160;<span class="comment"></span>#define TRAP_IFC_TYPE_UNIX      &#39;u&#39; <span class="comment">///&lt; trap_ifc_tcpip via UNIX socket(input&amp;output part)</span></div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="group__ifctypes.html#gaf96730d78d9d48881642f5b5683fb513">  180</a></span>&#160;<span class="comment"></span>#define TRAP_IFC_TYPE_SERVICE   &#39;s&#39; <span class="comment">///&lt; service ifc</span></div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="group__ifctypes.html#ga6d3823643b818be561a49bde77bd34fd">  181</a></span>&#160;<span class="comment"></span>#define TRAP_IFC_TYPE_FILE      &#39;f&#39; <span class="comment">///&lt; trap_ifc_file (input&amp;output part)</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"></span>extern char trap_ifc_type_supported[];</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment"> * Type of interface (direction)</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="group__ifctypes.html#gac188fb5e77d8af514d8091c21a9570c8">  187</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="group__ifctypes.html#gac188fb5e77d8af514d8091c21a9570c8">trap_ifc_type</a> {</div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a95482ca4ea5f849965438493b6c5640c">  188</a></span>&#160;   <a class="code" href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a95482ca4ea5f849965438493b6c5640c">TRAPIFC_INPUT</a> = 1, <span class="comment">///&lt; interface acts as source of data for module</span></div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a3465118a68f82fd201ec4ce516f687aa">  189</a></span>&#160;<span class="comment"></span>   <a class="code" href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a3465118a68f82fd201ec4ce516f687aa">TRAPIFC_OUTPUT</a> = 2 <span class="comment">///&lt; interface is used for sending data out of module</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span>};</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"> * @}</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"> */</span><span class="comment">/* ifctypes */</span><span class="comment"></span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment"> * @}</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment"> */</span><span class="comment">/* trapifcspec */</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment"> * \name TRAP interface control request</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment"> * @{*/</span></div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="group__commonapi.html#gac99821743a91f2288f5ea8d3ae6b424c">  202</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="group__commonapi.html#gac99821743a91f2288f5ea8d3ae6b424c">trap_ifcctl_request</a> {</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca69ebb9c0a47e7aa0c21440a6373e083a">  203</a></span>&#160;   <a class="code" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca69ebb9c0a47e7aa0c21440a6373e083a">TRAPCTL_AUTOFLUSH_TIMEOUT</a> = 1,  <span class="comment">///&lt; Set timeout of automatic buffer flushing for interface, expects uint64_t argument with number of microseconds. It can be set to #TRAP_NO_AUTO_FLUSH to disable autoflush.</span></div><div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca0698228277af04dfe4c5565de8263538">  204</a></span>&#160;<span class="comment"></span>   <a class="code" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca0698228277af04dfe4c5565de8263538">TRAPCTL_BUFFERSWITCH</a> = 2,       <span class="comment">///&lt; Enable/disable buffering - could be dangerous on input interface!!! expects char argument with value 1 (default value after libtrap initialization - enabled) or 0 (for disabling buffering on interface).</span></div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca7c42332f519ee4671d7f674198d6a023">  205</a></span>&#160;<span class="comment"></span>   <a class="code" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca7c42332f519ee4671d7f674198d6a023">TRAPCTL_SETTIMEOUT</a> = 3          <span class="comment">///&lt; Set interface timeout (int32_t): in microseconds for non-blocking mode; timeout can be also: TRAP_WAIT, TRAP_HALFWAIT, or TRAP_NO_WAIT.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment"></span>};<span class="comment"></span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/**@}*/</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#ifndef TRAP_IFC_MESSAGEQ_SIZE</span></div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="group__commonapi.html#ga28c29cb10db13086eece2f6497363df3">  210</a></span>&#160;<span class="preprocessor">#define TRAP_IFC_MESSAGEQ_SIZE 100000 </span><span class="comment">///&lt; size of message queue used for buffering</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment"></span>#endif</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment"> * Record with message of multi-result #trap_get_data</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="structtrap__multi__result.html">  216</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structtrap__multi__result.html">trap_multi_result</a> {</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="structtrap__multi__result.html#a067c01951ed1c711a65795f695b0b41e">  217</a></span>&#160;   uint16_t <a class="code" href="structtrap__multi__result.html#a067c01951ed1c711a65795f695b0b41e">message_size</a>;   <span class="comment">///&lt; Size of incoming message</span></div><div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="structtrap__multi__result.html#a6befb83ebd5cf113aedf4cf0eefb06ee">  218</a></span>&#160;<span class="comment"></span>   <span class="keywordtype">void</span> *<a class="code" href="structtrap__multi__result.html#a6befb83ebd5cf113aedf4cf0eefb06ee">message</a>;           <span class="comment">///&lt; Data of incoming message</span></div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="structtrap__multi__result.html#a2c6630a824f0d7ef11e3921882867029">  219</a></span>&#160;<span class="comment"></span>   <span class="keywordtype">int</span> <a class="code" href="structtrap__multi__result.html#a2c6630a824f0d7ef11e3921882867029">result_code</a>;         <span class="comment">///&lt; TRAP_OK if record is valid (message was received successfuly)</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"></span>} <a class="code" href="group__commonapi.html#ga09574de535c3e73578fa2930b108b38b">trap_multi_result_t</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/** Structure with specification of interface types and their parameters.</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"> *  This can be filled by command-line parameters using trap_parse_params</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"> *  function.</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="structtrap__ifc__spec__s.html">  226</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structtrap__ifc__spec__s.html">trap_ifc_spec_s</a> {</div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="structtrap__ifc__spec__s.html#a6af4e85e62b9408f48e264516c5a4eae">  227</a></span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="structtrap__ifc__spec__s.html#a6af4e85e62b9408f48e264516c5a4eae">types</a>;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="structtrap__ifc__spec__s.html#a67f46fe3c5ea43d1c8894ce9b8f551ab">  228</a></span>&#160;   <span class="keywordtype">char</span> **<a class="code" href="structtrap__ifc__spec__s.html#a67f46fe3c5ea43d1c8894ce9b8f551ab">params</a>;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;} <a class="code" href="group__commonapi.html#ga6a9b60e8305f9c9af1c42b0b1dbac21b">trap_ifc_spec_t</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"> * \defgroup trap_mess_fmt Message format</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment"> * @{</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"> */</span><span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"> * Type of messages that are sent via IFC</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#gafbdd4209c0e285278d2134a0500164ad">  238</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {<span class="comment"></span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">   /** unknown - message format was not specified yet  */</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada3cb9037147bcf0255468111565ecaca0">  240</a></span>&#160;   <a class="code" href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada3cb9037147bcf0255468111565ecaca0">TRAP_FMT_UNKNOWN</a> = 0,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">   /** raw data, no format specified */</span></div><div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada62494ba4588111acd4873a21f6a73262">  243</a></span>&#160;   <a class="code" href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada62494ba4588111acd4873a21f6a73262">TRAP_FMT_RAW</a> = 1,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">   /** UniRec records */</span></div><div class="line"><a name="l00246"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada6ac00a120fdc99b1ccef72e4c31310f2">  246</a></span>&#160;   <a class="code" href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada6ac00a120fdc99b1ccef72e4c31310f2">TRAP_FMT_UNIREC</a> = 2,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">   /** structured data serialized using JSON */</span></div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164adab683cfedbefc09299295768bfc566aed">  249</a></span>&#160;   <a class="code" href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164adab683cfedbefc09299295768bfc566aed">TRAP_FMT_JSON</a> = 3</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;} <a class="code" href="group__trap__mess__fmt.html#gafbdd4209c0e285278d2134a0500164ad">trap_data_format_t</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"> * Possible states of an IFC during data format negotiation.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#gad79809a2452f1e8a4db4e635fb0bd89e">  255</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {<span class="comment"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">   /** Negotiation is not completed */</span></div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea83c14af470a24348e2e667016c6c5d41">  257</a></span>&#160;   <a class="code" href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea83c14af470a24348e2e667016c6c5d41">FMT_WAITING</a> = 0,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">   /** Negotiation was successful */</span></div><div class="line"><a name="l00260"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea28ac36336d4d5862d01074677e45ce13">  260</a></span>&#160;   <a class="code" href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea28ac36336d4d5862d01074677e45ce13">FMT_OK</a> = 1,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">   /** Negotiation failed, format mismatch */</span></div><div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea29dfd7b9fb30ace5fcdc6a719d320de2">  263</a></span>&#160;   <a class="code" href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea29dfd7b9fb30ace5fcdc6a719d320de2">FMT_MISMATCH</a> = 2,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">   /** Negotiation was successful, but receivers (input ifc) template is subset of senders (output ifc) template and missing fields has to be defined */</span></div><div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea4f7787cd8d6cd8173c1a7a9449b39a5d">  266</a></span>&#160;   <a class="code" href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea4f7787cd8d6cd8173c1a7a9449b39a5d">FMT_CHANGED</a> = 3</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;} <a class="code" href="group__trap__mess__fmt.html#gad79809a2452f1e8a4db4e635fb0bd89e">trap_in_ifc_state_t</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"> * Set format of messages on output IFC.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment"> * \param[in] out_ifc_idx   index of output IFC</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"> * \param[in] data_type     format of messages defined by #trap_data_format_t</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"> * \param[in] ...   if data_type is TRAP_FMT_UNIREC or TRAP_FMT_JSON, additional parameter</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"> * that specifies template is expected</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__trap__mess__fmt.html#gaafa4932ad483eceed010a6b84972df02">trap_set_data_fmt</a>(uint32_t out_ifc_idx, uint8_t data_type, ...);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment"> * Set format of messages expected on input IFC.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"> * \param[in] in_ifc_idx   index of input IFC</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment"> * \param[in] data_type     format of messages defined by #trap_data_format_t</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"> * \param[in] ...   if data_type is TRAP_FMT_UNIREC or TRAP_FMT_JSON, additional parameter</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment"> * that specifies template is expected</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"> * \return TRAP_E_OK on success</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__trap__mess__fmt.html#ga36d50e3cf2e6fdb959e7e5af660947f1">trap_set_required_fmt</a>(uint32_t in_ifc_idx, uint8_t data_type, ...);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment"> * Get message format and template that is set on IFC.</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"> * On output IFC it should return the values that were set.  On input IFC</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"> * it should return format and template that was received.</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"> * \param[in] ifc_dir     #trap_ifc_type direction of interface</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment"> * \param[in] ifc_idx   index of IFC</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"> * \param[out] data_type     format of messages defined by #trap_data_format_t</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment"> * \param[out] spec   Template specifier - UniRec specifier in case of TRAP_FMT_UNIREC data_type, otherwise, it can be any string.</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment"> * \return TRAP_E_OK on success, on error see trap_ctx_get_data_fmt().</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__trap__mess__fmt.html#gaafb028aba366c69626fb86f85700128b">trap_get_data_fmt</a>(uint8_t ifc_dir, uint32_t ifc_idx, uint8_t *data_type, <span class="keyword">const</span> <span class="keywordtype">char</span> **spec);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"> * Set format of messages on output IFC.</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"> * \param[in,out] ctx   Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment"> * \param[in] out_ifc_idx   Index of output IFC.</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment"> * \param[in] data_type     Format of messages defined by #trap_data_format_t.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"> * \param[in] ...   If data_type is TRAP_FMT_UNIREC or TRAP_FMT_JSON, additional parameter</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment"> * that specifies template (char *) is expected.</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__trap__mess__fmt.html#gae876dcd1ae5562bc85c7a10d93909e76">trap_ctx_set_data_fmt</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t out_ifc_idx, uint8_t data_type, ...);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment"> * Set format of messages on output IFC.</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> * \param[in,out] ctx   Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment"> * \param[in] out_ifc_idx   Index of output IFC.</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment"> * \param[in] data_type     Format of messages defined by #trap_data_format_t.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment"> * \param[in] ap   If data_type is TRAP_FMT_UNIREC or TRAP_FMT_JSON, additional parameter</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment"> * that specifies template (char *) is expected.</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__trap__mess__fmt.html#gae2a28b33476acd05869aebfd99b140fd">trap_ctx_vset_data_fmt</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t out_ifc_idx, uint8_t data_type, va_list ap);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> * Returns current state of an input interface on specified index.</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> * \param[in] ctx   Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> * \param[in] ifc_idx   Index of the input interface</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> * \return Value of #trap_in_ifc_state_t on success, otherwise TRAP_E_NOT_INITIALIZED when libtrap context is not initialized or</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> * TRAP_E_BAD_IFC_INDEX (ifc_idx &gt;= number of input ifcs).</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__trap__mess__fmt.html#ga0f4ff32ca8352ec4ebbbaf4c40d2e8b7">trap_ctx_get_in_ifc_state</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t ifc_idx);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"> * Set format of messages expected on input IFC.</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"> * \param[in] ctx   Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment"> * \param[in] in_ifc_idx   Index of input IFC.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment"> * \param[in] data_type     Format of messages defined by #trap_data_format_t.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"> * \param[in] ...   If data_type is TRAP_FMT_UNIREC or TRAP_FMT_JSON, additional parameter</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment"> * that specifies template (char *) is expected.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> * \return TRAP_E_OK on success, on error see #trap_ctx_vset_required_fmt().</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__trap__mess__fmt.html#ga016bd84888f31fe8caf652553fb053aa">trap_ctx_set_required_fmt</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t in_ifc_idx, uint8_t data_type, ...);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment"> * Set format of messages expected on input IFC.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment"> * \param[in] ctx   Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment"> * \param[in] in_ifc_idx   Index of input IFC.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> * \param[in] data_type     Format of messages defined by #trap_data_format_t.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> * \param[in] ap   If data_type is TRAP_FMT_UNIREC or TRAP_FMT_JSON, additional parameter</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> * that specifies template (char *) is expected.</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> * \return TRAP_E_OK on success, TRAP_E_NOT_INITIALIZED when libtrap context is not initialized, TRAP_E_BAD_IFC_INDEX or TRAP_E_BADPARAMS on error.</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__trap__mess__fmt.html#gafa497348ff404d5a26d349b63a8888d5">trap_ctx_vset_required_fmt</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t in_ifc_idx, uint8_t data_type, va_list ap);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment"> * Get message format and template that is set on IFC.</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment"> * On output IFC it should return the values that were set.  On input IFC</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment"> * it should return format and template that was received.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment"> * \param[in] ctx   Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment"> * \param[in] ifc_dir     #trap_ifc_type direction of interface</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"> * \param[in] ifc_idx     Index of IFC.</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"> * \param[out] data_type   Format of messages defined by #trap_data_format_t.</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> * \param[out] spec   Specifier of data format specifies the template (char *) is expected.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment"> * \return TRAP_E_OK on success, TRAP_E_NOT_INITIALIZED if libtrap context is not initialized or negotiation is not successful yet for input IFC, TRAP_E_BAD_IFC_INDEX or TRAP_E_BADPARAMS on error.</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__trap__mess__fmt.html#gacba5dba90afc66aa5fa36b505c49226f">trap_ctx_get_data_fmt</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint8_t ifc_dir, uint32_t ifc_idx, uint8_t *data_type, <span class="keyword">const</span> <span class="keywordtype">char</span> **spec);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment"> * @}</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment"> */</span><span class="comment">/* trap_mess_fmt */</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"> * Parse Fields name and types from string.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment"> * Function parses the source string and sets the given pointers (pointers to source string). Than it sets length of name and type</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment"> * \param[in] source Source string to parse.</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> * \param[in] name ouput parameter, where will be set the pointer to name of a field (pointer to source string).</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"> * \param[in] type ouput parameter, where will be set the pointer to type of a field (pointer to source string).</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"> * \param[in] length_name ouput parameter, where will be set the length of a name.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"> * \param[in] length_type ouput parameter, where will be set the length of a type.</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"> * \return pointer to source string, moved to next field</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__commonapi.html#ga8cb714bba0bf01ccf7584332936e2113">trap_get_type_and_name_from_string</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *source, <span class="keyword">const</span> <span class="keywordtype">char</span> **name, <span class="keyword">const</span> <span class="keywordtype">char</span> **type, <span class="keywordtype">int</span> *length_name, <span class="keywordtype">int</span> *length_type);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment"> * Compares sender_ifc template and receiver_ifc template</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment"> * and returns whether receivers template is subset of the senders template.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment"> * \param[in] sender_ifc_data_fmt   sender_ifc template (char *)</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"> * \param[in] receiver_ifc_data_fmt   receiver_ifc template (char *)</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"> * \return TRAP_E_OK on success (receivers template is subset of the senders template),</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"> * TRAP_E_FIELDS_MISMATCH (receivers template has field which is not in senders template).</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__commonapi.html#ga1a036c53c7629eb220fa582a7a4ae56c">trap_ctx_cmp_data_fmt</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *sender_ifc_data_fmt, <span class="keyword">const</span> <span class="keywordtype">char</span> *receiver_ifc_data_fmt);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment"> * Returns global context.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment"> * \return pointer to global context.</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keywordtype">void</span> *<a class="code" href="group__commonapi.html#gaf23b66446f6a9549460c6f9315fa612b">trap_get_global_ctx</a>();</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment"> * Returns current state of an input interface on specified index.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"> * \param[in] ifc_idx   Index of the input interface</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment"> * \return See #trap_ctx_get_in_ifc_state().</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__commonapi.html#ga0e46ea6655ac72ab1508a092cec5b05e">trap_get_in_ifc_state</a>(uint32_t ifc_idx);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">/** Parse command-line arguments.</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"> * Extract arguments needed by TRAP to set up interfaces (-i params), verbosity</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"> * level (-v/-vv/-vvv) and return the rest (argc and argv are modified, i.e.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"> * processed parameter is removed). Extracted information is stored into</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"> * ifc_spec. These variables should be passed to trap_init. Data in ifc_spec</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"> * must be freed by trap_free_ifc_spec. If help is requested (-h/--help)</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment"> * TRAP_E_HELP is returned (argc and argv are modified also).</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"> * @param[in,out] argc Pointer to number of command-line arguments.</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"> * @param[in,out] argv Command-line arguments.</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"> * @param[out] ifc_spec Structure with specification of interface types and</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> *                      their parameters.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"> * @return Error code (0 on success)</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__commonapi.html#gaefbccf1d04407e6d79ab4b8a8307cdf9">trap_parse_params</a>(<span class="keywordtype">int</span> *argc, <span class="keywordtype">char</span> **argv, <a class="code" href="structtrap__ifc__spec__s.html">trap_ifc_spec_t</a> *ifc_spec);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment"> * \brief Splitter of *params* string.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment"> * Cut the first param, copy it into *dest* and returns pointer to the start of following</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment"> * parameter.</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment"> * \param[in] source  source string, typically *params*</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment"> * \param[out] dest  destination string, target of first paramater copying</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment"> * \param[in] delimiter  separator of values in *params*</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment"> * \return Pointer to the start of following parameter (char after delimiter). \note If NULL, no other parameter is present or error during allocation occured.</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keywordtype">char</span> *<a class="code" href="group__commonapi.html#ga4b31b73a73b203d80cfcb424ccd9edf5">trap_get_param_by_delimiter</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *source, <span class="keywordtype">char</span> **dest, <span class="keyword">const</span> <span class="keywordtype">char</span> delimiter);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"> * \brief Check content of buffer, iterate over message headers</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"> * \param [in] buffer   start of buffer</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"> * \param [in] buffer_size size of buffer</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment"> * \return 0 on success, number of errors otherwise</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__commonapi.html#gab4ba2c95a8817983f23a58aae093f48f">trap_check_buffer_content</a>(<span class="keywordtype">void</span> *buffer, uint32_t buffer_size);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"> * @}</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"> */</span><span class="comment">/* commonapi */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/*****************************************************************************/</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">/***************************** Library interface *****************************/</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"> * \defgroup simpleapi Simple API</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"> * @{</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#ga605937391a4c6fbe1510bf4381a8a2b4">trap_last_error</a>; <span class="comment">///&lt; Code of last error (one of the codes above)</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment"></span><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__simpleapi.html#ga440c46189a0111c0946583c56e1ff7a9">trap_last_error_msg</a>; <span class="comment">///&lt; Human-readable message about last error</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment"></span><span class="comment"></span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">/** Destructor of trap_ifc_spec_t structure.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"> * @param[in] ifc_spec trap_ifc_spec_t structure to clear.</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment"> * @return  Error code (0 on success)</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#ga957443419c0e9961b8efba34f8e79009">trap_free_ifc_spec</a>(<a class="code" href="structtrap__ifc__spec__s.html">trap_ifc_spec_t</a> ifc_spec);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">/** Initialization function.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"> * Create and initialize all interfaces.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment"> * @param[in] module_info Pointer to struct containing info about the module.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment"> * @param[in] ifc_spec Structure with specification of interface types and</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"> *                      their parameters.</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment"> * @return Error code (0 on success)</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#ga7d7849e0fda93ec1502cb55c1b10cc34">trap_init</a>(trap_module_info_t *module_info, <a class="code" href="structtrap__ifc__spec__s.html">trap_ifc_spec_t</a> ifc_spec);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/** Function to terminate module&#39;s operation.</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment"> * This function stops all read/write operations on all interfaces.</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment"> * Any waiting in trap_get_data and trap_send_data is interrupted and these</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"> * functions return immediately with TRAP_E_TERMINATED.</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment"> * Any call of trap_get_data or trap_send_data after call of this function</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"> * returns TRAP_E_TERMINATED.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment"> * This function is used to terminate module&#39;s operation (asynchronously), e.g.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment"> * in SIGTERM handler.</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"> * @return Always TRAP_E_OK (0).</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#ga4fc7c94bc72b9400ea765187882d532e">trap_terminate</a>();</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">/** Cleanup function.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"> * Disconnect all interfaces and do all necessary cleanup.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"> * @return Error code</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#ga2694fb89b2da11d529ef69c21f2197ef">trap_finalize</a>();</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/** Read data from input interface.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"> * Read a record from one of interfaces specified by `ifc_mask` and store</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment"> * pointer to it into `data`. If data are not available on any of specified</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment"> * interfaces, wait until data are available or `timeout` microseconds elapses.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment"> * If `timeout` &lt; 0, wait indefinitely.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"> * When function returns due to timeout, contents of `data` and `size` are undefined.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment"> * @param[in] ifc_mask Mask of interfaces to listen on (if *i*-th bit is set, interface *i* is enabled).</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"> * @param[out] data Pointer to received data. When only one IFC is selected by ifc_mask, data contains the payload of message. When ifc_mask contains more than one IFC, array of #trap_multi_result_t is returned. The array size is equal to number of input IFCs. \note Data must not be freed! Library stores incomming data into static array and rewrites it during every trap_get_data() call.</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment"> * @param[out] size Number of bytes of data. When only one IFC is selected by ifc_mask, size contains the size of incoming message. Otherwise, (when more than one IFC are selected) size contains the size of #trap_multi_result_t array in bytes.</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment"> * @param[in] timeout Timeout in microseconds for non-blocking mode; timeout</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment"> * can be also: TRAP_WAIT, TRAP_HALFWAIT, or TRAP_NO_WAIT.</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"> * @return Error code - 0 on success, TRAP_E_TIMEOUT if timeout elapses.</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"> * \deprecated This function should be replaced by trap_recv().</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#gaac8324ccfb8edf2977e3d4782870d4ef">trap_get_data</a>(uint32_t ifc_mask, <span class="keyword">const</span> <span class="keywordtype">void</span> **<a class="code" href="trap__internal_8h.html#ac3c027f9a365f5741871df5ace13943f">data</a>, uint16_t *size, <span class="keywordtype">int</span> timeout);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">/** Send data to output interface.</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment"> * Write data of size `size` given by `data` pointer into interface `ifc`.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment"> * If data cannot be written immediately (e.g. because of full buffer or</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"> * lost connection), wait until write is possible or `timeout` microseconds</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"> * elapses. If `timeout` &lt; 0, wait indefinitely.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"> * @param[in] ifcidx Index of interface to write into.</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"> * @param[in] data Pointer to data.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"> * @param[in] size Number of bytes of data.</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"> * @param[in] timeout Timeout in microseconds for non-blocking mode; timeout</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"> * can be also: TRAP_WAIT, TRAP_HALFWAIT, or TRAP_NO_WAIT.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"> * @return Error code - 0 on success, TRAP_E_TIMEOUT if timeout elapses.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"> * \deprecated This function should be replaced by trap_send().</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#gab889fdf90a8a4103bfa072c64d2aed1e">trap_send_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ifcidx, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="trap__internal_8h.html#ac3c027f9a365f5741871df5ace13943f">data</a>, uint16_t size, <span class="keywordtype">int</span> timeout);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"> * \brief Receive data from input interface.</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"> * Receive a message from interface specified by `ifcidx` and set</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"> * pointer to the `data`.</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"> * When function returns due to timeout, contents of `data` and `size` are undefined.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"> * @param[in] ifcidx    Index of input IFC.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"> * @param[out] data     Pointer to received data.</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"> * @param[out] size     Size of received data in bytes of data.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"> * @return Error code - #TRAP_E_OK on success, #TRAP_E_TIMEOUT if timeout elapses.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment"> * \note Data must not be freed! Library stores incomming data into static array and rewrites it during every trap_get_data() call.</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment"> * \see trap_ifcctl() to set timeout (#TRAPCTL_SETTIMEOUT)</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#gac8149d036a3b839adaeb876ccc9fcda5">trap_recv</a>(uint32_t ifcidx, <span class="keyword">const</span> <span class="keywordtype">void</span> **<a class="code" href="trap__internal_8h.html#ac3c027f9a365f5741871df5ace13943f">data</a>, uint16_t *size);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment"> * \brief Send data via output interface.</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment"> * Send a message given by `data` pointer of `size` message size via interface specified by `ifcidx`</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment"> * that is the index of output interfaces (counted from 0).</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"> * @param[in] ifcidx    Index of input IFC.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment"> * @param[out] data     Pointer to message to send.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"> * @param[out] size     Size of message in bytes.</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment"> * @return Error code - #TRAP_E_OK on success, #TRAP_E_TIMEOUT if timeout elapses.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment"> * \note Data must not be freed! Library stores incomming data into static array and rewrites it during every trap_get_data() call.</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment"> * \see trap_ifcctl() to set timeout (#TRAPCTL_SETTIMEOUT)</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#ga165b017fa4b66422275c4e502ac95d2a">trap_send</a>(uint32_t ifcidx, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="trap__internal_8h.html#ac3c027f9a365f5741871df5ace13943f">data</a>, uint16_t size);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">/** Set verbosity level of library functions.</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"> * Verbosity levels may be:</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"> *   - -3 - errors</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment"> *   - -2 - warnings</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment"> *   - -1 - notices (default)</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment"> *   -  0 - verbose</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment"> *   -  1 - more verbose</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"> *   -  2 - even more verbose</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"> * @param[in] level Desired level of verbosity.</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__simpleapi.html#ga896b102140653a204da81782981e04f6">trap_set_verbose_level</a>(<span class="keywordtype">int</span> level);</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">/** Get verbosity level.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment"> * See trap_set_verbose_level for list of levels.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment"> * @return Verbosity level currently set in the library.</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#gaf7d9a764eeb924fe2dedaed0b79b2cec">trap_get_verbose_level</a>();</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">/** Set section for trap_print_help()</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"> * \param [in] level  0 for default info about module, 1 for info about IFC specifier</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__simpleapi.html#ga780616f8da6339da2c3f11441a6e0f91">trap_set_help_section</a>(<span class="keywordtype">int</span> level);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">/** Print common TRAP help message.</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"> * The help message contains information from module_info and describes common</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"> * TRAP command-line parameters.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"> * @param[in] module_info Pointer to struct containing info about the module.</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__simpleapi.html#gaaec5413b3ef25596138f12ae65e58097">trap_print_help</a>(<span class="keyword">const</span> trap_module_info_t *module_info);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">/** Print help about interface specifier.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment"> * Prints help message about format of interface specifier and description of</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"> * all available interface types.</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment"> * This message is normally a part of help printed by trap_print_help, this</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"> * function is useful when you don&#39;t use standard TRAP command-line parameters</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment"> * but you still use the same format of interface specifier.</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__simpleapi.html#ga594bc6f6e105611a06b5e1235796e758">trap_print_ifc_spec_help</a>();</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment"> * \brief Control TRAP interface.</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment"> * \note Type and request types were changed from enum because of python wrapper.</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"> * \param [in] type     #trap_ifc_type direction of interface</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment"> * \param [in] ifcidx   index of TRAP interface</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment"> * \param [in] request  #trap_ifcctl_request type of operation</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"> * \param [in,out] ...  arguments of request, see #trap_ifcctl_request for more details on requests and their arguments.</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"> * Examples:</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment"> * \code{C}</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment"> * // set 4 seconds timeout</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment"> * trap_ifcctl(TRAPIFC_INPUT, 0, TRAPCTL_SETTIMEOUT, 4000000);</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"> * // disable auto-flush</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment"> * trap_ifcctl(TRAPIFC_OUTPUT, 0, TRAPCTL_AUTOFLUSH_TIMEOUT, TRAP_NO_AUTO_FLUSH);</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment"> * // disable buffering</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"> * trap_ifcctl(TRAPIFC_OUTPUT, 0, TRAPCTL_BUFFERSWITCH, 0);</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment"> * \endcode</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"> * \return TRAP_E_OK on success</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__simpleapi.html#ga63de9d9334839f0fe2871ab5a987be32">trap_ifcctl</a>(int8_t type, uint32_t ifcidx, int32_t request, ... <span class="comment">/* arg */</span>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"> * \brief Force flush of buffer.</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"> * \param[in] ifc    IFC Index of interface to write into.</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__simpleapi.html#ga52ebce274203e2f54abc1ef487090618">trap_send_flush</a>(uint32_t ifc);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"> * @}</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment"> */</span><span class="comment">/* basic API */</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">/********** Macros generating pieces of common code **********/</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"> * \addtogroup contextapi Context API</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment"> * This API allows user to use multiple instances of libtrap in the same process.</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"> * The API is similar to \ref simpleapi. The difference is in the private context memory</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment"> * that is returned by trap_ctx_init() and is freed by trap_ctx_finalize().</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment"> * Obtained context pointer must be passed to all functions from context API.</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment"> * @{</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment"> * \brief Initialize and return the context of libtrap.</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment"> * \param[in] module_info     Pointer to struct containing info about the module.</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment"> * \param[in] ifc_spec        Structure with specification of interface types and</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment"> *                      their parameters.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment"> * \return Pointer to context (context needs to be checked for error value by trap_ctx_get_last_error() function), NULL on memory error.</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *<a class="code" href="group__contextapi.html#gad63272a184d3a4f5a386bf10629f4266">trap_ctx_init</a>(trap_module_info_t *module_info, <a class="code" href="structtrap__ifc__spec__s.html">trap_ifc_spec_t</a> ifc_spec);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment"> * \brief Initialize and return the context of libtrap.</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment"> * \param[in] module_info      Pointer to struct containing info about the module.</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment"> * \param[in] ifc_spec         Structure with specification of interface types and their parameters.</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment"> * \param[in] service_ifcname  Identifier of the service IFC (used as a part of path to the UNIX socket). When NULL is used, no service IFC will be opened.</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment"> * \return Pointer to context (context needs to be checked for error value by trap_ctx_get_last_error() function), NULL on memory error.</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *<a class="code" href="group__contextapi.html#ga5a66c582ecfb422c02716d64020ca4f3">trap_ctx_init2</a>(trap_module_info_t *module_info, <a class="code" href="structtrap__ifc__spec__s.html">trap_ifc_spec_t</a> ifc_spec, <span class="keyword">const</span> <span class="keywordtype">char</span> *service_ifcname);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment"> * \brief Initialize and return the context of libtrap.</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment"> * \param[in] name   Name of the NEMEA module (libtrap context).</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment"> * \param[in] description - Detailed description of the module, can be NULL (&quot;&quot; will be used in such case)</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment"> * \param[in] i_ifcs Number of input IFCs, it can be -1 if o_ifcs &gt; -1 (-1 means variable number of IFCs, it is then computed from ifc_spec).</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment"> * \param[in] o_ifcs Number of output IFCs, it can be -1 if i_ifcs &gt; -1 (-1 means variable number of IFCs, it is then computed from ifc_spec).</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment"> * \param[in] ifc_spec  IFC_SPEC stringdescribed in README.ifcspec.md</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment"> * \param[in] service_ifcname Identifier of the service IFC (used as a part of path to the UNIX socket). When NULL is used, no service IFC will be opened.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"> * \return Pointer to context (context needs to be checked for error value by trap_ctx_get_last_error() function), NULL on memory error.</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *<a class="code" href="group__contextapi.html#ga9a78b1581ccf324cb9dd1f4222b5d083">trap_ctx_init3</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *description, int8_t i_ifcs, int8_t o_ifcs, <span class="keyword">const</span> <span class="keywordtype">char</span> *ifc_spec, <span class="keyword">const</span> <span class="keywordtype">char</span> *service_ifcname);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment"> * \brief Terminate libtrap context and free resources.</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (trap_ctx_init()).</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment"> * \return TRAP_E_OK on success.</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#ga5b84d682c3c68fe814896f7f002b319b">trap_ctx_finalize</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> **ctx);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment"> * \brief Terminate libtrap context.</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment"> * \return TRAP_E_OK on success.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#ga8fb998ec081c6f0ad96a669d95efcfe7">trap_ctx_terminate</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">/** Read data from input interface.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment"> * \param[in] ifc    Index of input interface (counted from 0).</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment"> * \param[out] data  Pointer to received data.</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment"> * \param[out] size  Size of received data in bytes.</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment"> * \return Error code - TRAP_E_OK on success, TRAP_E_TIMEOUT if timeout elapses.</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment"> * \see #trap_ctx_ifcctl</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#gac2470aae7d6bdea292f422d061a4485b">trap_ctx_recv</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t ifc, <span class="keyword">const</span> <span class="keywordtype">void</span> **<a class="code" href="trap__internal_8h.html#ac3c027f9a365f5741871df5ace13943f">data</a>, uint16_t *size);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment"> * \brief Read data from input interfaces according to ifc_mask.</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment"> * Read a record from one of interfaces specified by `ifc_mask` and store</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment"> * pointer to it into `data`. If data are not available on any of specified</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment"> * interfaces, wait until data are available or `timeout` elapses.</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment"> * If `timeout` &lt; 0, wait indefinitely.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment"> * When function returns due to timeout, contents of `data` and `size` are undefined.</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (trap_ctx_init()).</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment"> * \param[in] ifc_mask  Mask of interfaces to listen on (if *i*-th bit is set, interface *i* is enabled).</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="comment"> * \param[out] data  Pointer to received data. The result is an array of #trap_multi_result_t.</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment"> * The size of array is equal to the number of input IFCs.</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment"> * \param[out] size  Size of data in bytes containing the size of #trap_multi_result_t array in bytes.</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"> * \return Error code - 0 on success, TRAP_E_TIMEOUT if timeout elapses.</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment"> * \note Data must not be freed! Library stores</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment"> * incomming data into static array and rewrites it during every trap_get_data() call.</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment"> * \see #trap_ctx_ifcctl, #trap_multi_result_t</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#gad124806d3f71ac0f63df28f44f68bb47">trap_ctx_multi_recv</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t ifc_mask, <span class="keyword">const</span> <span class="keywordtype">void</span> **<a class="code" href="trap__internal_8h.html#ac3c027f9a365f5741871df5ace13943f">data</a>, uint16_t *size);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment"> * \brief Send data via output interface.</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment"> * Write data of size `size` given by `data` pointer into interface `ifc`.</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"> * If data cannot be written immediately (e.g. because of full buffer or</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment"> * lost connection), wait until write is possible or `timeout` microseconds</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment"> * elapses. If `timeout` &lt; 0, wait indefinitely.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"> * \param[in] ifc    Index of interface to write into.</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment"> * \param[in] data   Pointer to data.</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment"> * \param[in] size   Number of bytes of data.</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment"> * \return Error code - 0 on success, TRAP_E_TIMEOUT if timeout elapses.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"> * \see #trap_ctx_ifcctl</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#ga9201daf1d4b3123b1caeab26e50c3a61">trap_ctx_send</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ifc, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="trap__internal_8h.html#ac3c027f9a365f5741871df5ace13943f">data</a>, uint16_t size);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment"> * \brief Set verbosity level of library functions.</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment"> * Verbosity levels may be:</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="comment"> *   - -3 - errors</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="comment"> *   - -2 - warnings</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment"> *   - -1 - notices (default)</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment"> *   -  0 - verbose</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment"> *   -  1 - more verbose</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment"> *   -  2 - even more verbose</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment"> * \param[in] level  Desired level of verbosity.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__contextapi.html#ga91d29b40d546e03bd132854c7ae2bf9c">trap_ctx_set_verbose_level</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, <span class="keywordtype">int</span> level);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment"> * \brief Get verbosity level.</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment"> * \see #trap_set_verbose_level for the list of levels.</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment"> * \return Verbosity level currently set in the library.</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#gae0d72b263e714adcf85b5b15dad98dad">trap_ctx_get_verbose_level</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment"> * \brief Control TRAP interface.</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment"> * \note Type and request types were changed from enum because of python wrapper.</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment"> * \param [in] type     #trap_ifc_type direction of interface</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment"> * \param [in] ifcidx   index of TRAP interface</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment"> * \param [in] request  #trap_ifcctl_request type of operation</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="comment"> * \param [in,out] ...  arguments of request, see #trap_ifcctl_request for more details on requests and their arguments.</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment"> * Examples:</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment"> * \code{C}</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment"> * // set 4 seconds timeout</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment"> * trap_ctx_ifcctl(ctx, TRAPIFC_INPUT, 0, TRAPCTL_SETTIMEOUT, 4000000);</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment"> * // disable auto-flush</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment"> * trap_ctx_ifcctl(ctx, TRAPIFC_OUTPUT, 0, TRAPCTL_AUTOFLUSH_TIMEOUT, TRAP_NO_AUTO_FLUSH);</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment"> * // disable buffering</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment"> * trap_ctx_ifcctl(ctx, TRAPIFC_OUTPUT, 0, TRAPCTL_BUFFERSWITCH, 0);</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment"> * \endcode</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment"> * \return TRAP_E_OK on success</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#ga5ef43a88e58beb25cfbceed7643e5fba">trap_ctx_ifcctl</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, int8_t type, uint32_t ifcidx, int32_t request, ... <span class="comment">/* arg */</span>);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment"> * \brief Control TRAP interface.</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment"> * \param [in] type     #trap_ifc_type direction of interface</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"> * \param [in] ifcidx   index of TRAP interface</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment"> * \param [in] request  #trap_ifcctl_request type of operation</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment"> * \param [in,out] ap  arguments of request.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment"> * \return TRAP_E_OK on success</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="comment"> * \see trap_ctx_ifcctl().</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#ga5d734e6839140420db59190197d7cac8">trap_ctx_vifcctl</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, int8_t type, uint32_t ifcidx, int32_t request, va_list ap);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment"> * \brief Get last result code from libtrap context.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="comment"> * \return \ref errorcodes</span></div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#ga2902ffa62edfbfae946d232ff446b1f4">trap_ctx_get_last_error</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment"> * \brief Get last (error) message from libtrap context.</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment"> * \return Text string with last (error) message from libtrap context.</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__contextapi.html#ga7c98c3764b024c49bb50ac850fa65f79">trap_ctx_get_last_error_msg</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment"> * \brief Force flush of buffer.</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment"> * \param[in] ifc    IFC Index of interface to write into.</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__contextapi.html#ga94141c10e9f43926c03fe1404650b768">trap_ctx_send_flush</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t ifc);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment"> * \brief Get number of connected clients.</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment"> * Output interface (TCP or UNIX) allows to send messages to multiple clients.  This</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment"> * function reads number of connected clients from internal interface</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment"> * structure.</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment"> * \param[in] ctx    Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"> * \param[in] ifcidx IFC Index of output interface.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"> * \return Number of connected clients. -1 on error.</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__contextapi.html#gacf18085a199ed89010eaf8afb375f2db">trap_ctx_get_client_count</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, uint32_t ifcidx);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment"> * \brief Create dump files.</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment"> * Create dump files for debug as follows:</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment"> *  trap-i[number]-config.txt   Output interface configuration.</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment"> *  trap-i[number]-buffer.dat    Output interface buffer</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment"> *  trap-o[number]-config.txt  Input interface configuration.</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment"> *  trap-o[number]-buffer.dat   Input interface buffer</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment"> * \param[in] ctx   Pointer to the private libtrap context data (#trap_ctx_init()).</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment"> * \param[in] path  Output directory, if NULL use current working directory.</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__contextapi.html#ga19b26aef67596239ccc72a6f0f1d05fd">trap_ctx_create_ifc_dump</a>(<a class="code" href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a> *ctx, <span class="keyword">const</span> <span class="keywordtype">char</span> *path);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"> * @}</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment"> */</span><span class="comment">/* contextapi */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment"> * \defgroup modulemacros Nemea module macros</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment"> * Set of preprocessor macros for rapid NEMEA module development.</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment"> * @{</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment"> */</span><span class="comment"></span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">/** \brief Define default signal handler function</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment"> * Defines function to handle SIGTERM and SIGINT signals. When a signal is</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment"> * received, it runs the specified command and calls trap_terminate().</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment"> * Place this macro before your main function.</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment"> * \param[in] stop_cmd Command which stops operation of a module. Usually</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment"> *                     setting a variable which is tested in module&#39;s main loop.</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="group__modulemacros.html#ga6d563233a9fb8ed10a181d1e4c87c271">  889</a></span>&#160;<span class="preprocessor">#define TRAP_DEFAULT_SIGNAL_HANDLER(stop_cmd) \</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="preprocessor">   void trap_default_signal_handler(int signal)\</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="preprocessor">   {\</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="preprocessor">      if (signal == SIGTERM || signal == SIGINT) { \</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="preprocessor">         stop_cmd;\</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="preprocessor">         trap_terminate();\</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="preprocessor">      }\</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="preprocessor">   }</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">/** \brief Register default signal handler.</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment"> * Register function defined by TRAP_DEFAULT_SIGNAL_HANDLER as handler of</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment"> * SIGTERM and SIGINT signals.</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment"> * Place this macro between TRAP initialization and the main loop.</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="preprocessor">#ifdef HAVE_SIGACTION</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="preprocessor">#define TRAP_REGISTER_DEFAULT_SIGNAL_HANDLER() \</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">   do {\</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">      if (trap_get_verbose_level() &gt;= 1)\</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="preprocessor">         printf(&quot;Setting signal handler for SIGINT and SIGTERM using &#39;sigaction&#39; function.\n&quot;);\</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">      struct sigaction act;\</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="preprocessor">      </span><span class="comment">/* Set default signal handler function*/</span><span class="preprocessor">\</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="preprocessor">      act.sa_handler = trap_default_signal_handler;\</span></div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="preprocessor">      act.sa_flags = 0;\</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="preprocessor">      </span><span class="comment">/* Prevent interruption of signal handler by another SIGTERM or SIGINT */</span><span class="preprocessor">\</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="preprocessor">      sigemptyset(&amp;act.sa_mask);\</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="preprocessor">      sigaddset(&amp;act.sa_mask, SIGTERM);\</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="preprocessor">      sigaddset(&amp;act.sa_mask, SIGINT);\</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="preprocessor">      </span><span class="comment">/* Register signal hander */</span><span class="preprocessor">\</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="preprocessor">      sigaction(SIGTERM, &amp;act, NULL);\</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">      sigaction(SIGINT, &amp;act, NULL);\</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="preprocessor">   } while(0)</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="group__modulemacros.html#gac8220e39691301a291b09aa9fd7616c0">  921</a></span>&#160;<span class="preprocessor">#define TRAP_REGISTER_DEFAULT_SIGNAL_HANDLER() \</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="preprocessor">   do {\</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="preprocessor">      if (trap_get_verbose_level() &gt;= 1)\</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="preprocessor">         printf(&quot;Setting signal handler for SIGINT and SIGTERM using &#39;signal&#39; function.\n&quot;);\</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="preprocessor">      signal(SIGTERM, trap_default_signal_handler);\</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="preprocessor">      signal(SIGINT, trap_default_signal_handler);\</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">   } while(0)</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">/** \brief Initialize TRAP using command-line parameters and handle errors.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment"> * Generates code that parses command-line parameters using trap_parse_params,</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment"> * intializes TRAP library using trap_init and handle possible errors.</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment"> * It calls exit(1) when an error has occured.</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment"> * Place this macro at the beginning of your main function.</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="comment"> * \param[in,out] argc Number of command-line parameters.</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment"> * \param[in,out] argv List of command-line parameters.</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment"> * \param[in] module_info trap_module_info_t structure containing information</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment"> *                        about the module.</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00942"></a><span class="lineno"><a class="line" href="group__modulemacros.html#ga80b87dc3b3964a1ac0ef4a74e8ec5166">  942</a></span>&#160;<span class="preprocessor">#define TRAP_DEFAULT_INITIALIZATION(argc, argv, module_info) \</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="preprocessor">   {\</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="preprocessor">      trap_ifc_spec_t ifc_spec;\</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="preprocessor">      int ret = trap_parse_params(&amp;argc, argv, &amp;ifc_spec);\</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="preprocessor">      if (ret != TRAP_E_OK) {\</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="preprocessor">         if (ret == TRAP_E_HELP) {\</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="preprocessor">            trap_print_help(&amp;module_info);\</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="preprocessor">            FREE_MODULE_INFO_STRUCT(MODULE_BASIC_INFO, MODULE_PARAMS) \</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="preprocessor">            return 0;\</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="preprocessor">         }\</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="preprocessor">         trap_free_ifc_spec(ifc_spec);\</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="preprocessor">         fprintf(stderr, &quot;ERROR in parsing of parameters for TRAP: %s\n&quot;, trap_last_error_msg);\</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="preprocessor">         FREE_MODULE_INFO_STRUCT(MODULE_BASIC_INFO, MODULE_PARAMS) \</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="preprocessor">         return 1;\</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="preprocessor">      }\</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="preprocessor">      ret = trap_init(&amp;module_info, ifc_spec);\</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="preprocessor">      if (ret != TRAP_E_OK) {\</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="preprocessor">         trap_free_ifc_spec(ifc_spec);\</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="preprocessor">         fprintf(stderr, &quot;ERROR in TRAP initialization: %s\n&quot;, trap_last_error_msg);\</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="preprocessor">         FREE_MODULE_INFO_STRUCT(MODULE_BASIC_INFO, MODULE_PARAMS) \</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor">         return 1;\</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="preprocessor">      }\</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="preprocessor">      trap_free_ifc_spec(ifc_spec);\</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="preprocessor">   }</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment">/** \brief Generate TRAP cleanup code.</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment"> * Only calls trap_finalize function.</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment"> * Place this macro at the end of your main function.</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00971"></a><span class="lineno"><a class="line" href="group__modulemacros.html#gaef424ddcb73a7b41ee068ac848c78a0c">  971</a></span>&#160;<span class="preprocessor">#define TRAP_DEFAULT_FINALIZATION() \</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="preprocessor">   trap_finalize();</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">/** \brief Handle possible errors after call to trap_get_data.</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment"> * \param[in] ret_code Return code of trap_get_data.</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment"> * \param timeout_cmd Command to run when a timeout has occured, e.g. &quot;continue&quot;.</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment"> * \param error_cmd Command to run when an error has occured or interface was</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment"> *                  terminated, e.g. &quot;break&quot;.</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment"> * \deprecated This macro should be replaced by TRAP_DEFAULT_RECV_ERROR_HANDLING.</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00981"></a><span class="lineno"><a class="line" href="group__modulemacros.html#gaab8ea8009824ab14c1726b53a41d6218">  981</a></span>&#160;<span class="preprocessor">#define TRAP_DEFAULT_GET_DATA_ERROR_HANDLING(ret_code, timeout_cmd, error_cmd) \</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="preprocessor">   if ((ret_code) != TRAP_E_OK) {\</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="preprocessor">      if ((ret_code) == TRAP_E_TIMEOUT) {\</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="preprocessor">         timeout_cmd;\</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="preprocessor">      } else if ((ret_code) == TRAP_E_TERMINATED) {\</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="preprocessor">         error_cmd;\</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="preprocessor">      } else if (ret_code == TRAP_E_FORMAT_CHANGED) { \</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="preprocessor">         </span><span class="comment">/* Nothing to do here, TRAP_E_FORMAT_CHANGED has to be skipped by this macro */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="preprocessor">         </span><span class="comment">/* (module can perform some special operations with templates after trap_get_data() signals format change) */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="preprocessor">      } else if (ret_code == TRAP_E_FORMAT_MISMATCH) { \</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="preprocessor">         fprintf(stderr, &quot;trap_get_data() error: output and input interfaces data formats or data specifiers mismatch.\n&quot;); \</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="preprocessor">         error_cmd; \</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="preprocessor">      } else {\</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="preprocessor">         fprintf(stderr, &quot;Error: trap_get_data() returned %i (%s)\n&quot;, (ret_code), trap_last_error_msg);\</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="preprocessor">         error_cmd;\</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="preprocessor">      }\</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="preprocessor">   }</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">/** \brief Handle possible errors after call to trap_recv.</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment"> * \param[in] ret_code Return code of trap_recv.</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment"> * \param timeout_cmd Command to run when a timeout has occured, e.g. &quot;continue&quot;.</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment"> * \param error_cmd Command to run when an error has occured or interface was</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"> *                  terminated, e.g. &quot;break&quot;.</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="group__modulemacros.html#ga4c19d4d81540f75735f4e8500ef3c99d"> 1005</a></span>&#160;<span class="preprocessor">#define TRAP_DEFAULT_RECV_ERROR_HANDLING(ret_code, timeout_cmd, error_cmd) \</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="preprocessor">   if ((ret_code) != TRAP_E_OK) {\</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="preprocessor">      if ((ret_code) == TRAP_E_TIMEOUT) {\</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="preprocessor">         timeout_cmd;\</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="preprocessor">      } else if ((ret_code) == TRAP_E_TERMINATED) {\</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="preprocessor">         error_cmd;\</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="preprocessor">      } else if (ret_code == TRAP_E_FORMAT_CHANGED) { \</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="preprocessor">         </span><span class="comment">/* Nothing to do here, TRAP_E_FORMAT_CHANGED has to be skipped by this macro */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="preprocessor">         </span><span class="comment">/* (module can perform some special operations with templates after trap_recv() signals format change) */</span><span class="preprocessor"> \</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="preprocessor">      } else if (ret_code == TRAP_E_FORMAT_MISMATCH) { \</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;<span class="preprocessor">         fprintf(stderr, &quot;trap_recv() error: output and input interfaces data formats or data specifiers mismatch.\n&quot;); \</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="preprocessor">         error_cmd; \</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="preprocessor">      } else {\</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="preprocessor">         fprintf(stderr, &quot;Error: trap_recv() returned %i (%s)\n&quot;, (ret_code), trap_last_error_msg);\</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="preprocessor">         error_cmd;\</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="preprocessor">      }\</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="preprocessor">   }</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">/** \brief Handle possible errors after call to trap_send_data.</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment"> * \param[in] ret_code Return code of trap_send_data.</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment"> * \param timeout_cmd Command to run when a timeout has occured, e.g. &quot;0&quot; to</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment"> *                    do nothing.</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment"> * \param error_cmd Command to run when an error has occured or interface was</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment"> *                  terminated, e.g. &quot;break&quot;.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment"> * \deprecated This macro should be replaced by TRAP_DEFAULT_SEND_ERROR_HANDLING.</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="group__modulemacros.html#ga91dbb76490c38e828bdf660ac3c9ca41"> 1032</a></span>&#160;<span class="preprocessor">#define TRAP_DEFAULT_SEND_DATA_ERROR_HANDLING(ret_code, timeout_cmd, error_cmd) \</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="preprocessor">   if ((ret_code) != TRAP_E_OK) {\</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="preprocessor">      if ((ret_code) == TRAP_E_TIMEOUT) {\</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="preprocessor">         timeout_cmd;\</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="preprocessor">      } else if ((ret_code) == TRAP_E_TERMINATED) {\</span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="preprocessor">         error_cmd;\</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="preprocessor">      } else {\</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="preprocessor">         fprintf(stderr, &quot;Error: trap_send_data() returned %i (%s)\n&quot;, (ret_code), trap_last_error_msg);\</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="preprocessor">         error_cmd;\</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="preprocessor">      }\</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="preprocessor">   }</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment">/** \brief Handle possible errors after call to trap_send.</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"> * \param[in] ret_code Return code of trap_send.</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment"> * \param timeout_cmd Command to run when a timeout has occured, e.g. &quot;0&quot; to</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment"> *                    do nothing.</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment"> * \param error_cmd Command to run when an error has occured or interface was</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment"> *                  terminated, e.g. &quot;break&quot;.</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="group__modulemacros.html#ga7dd83735a6770e54573bf0e5e3ad474c"> 1051</a></span>&#160;<span class="preprocessor">#define TRAP_DEFAULT_SEND_ERROR_HANDLING(ret_code, timeout_cmd, error_cmd) \</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="preprocessor">   if ((ret_code) != TRAP_E_OK) {\</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="preprocessor">      if ((ret_code) == TRAP_E_TIMEOUT) {\</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="preprocessor">         timeout_cmd;\</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="preprocessor">      } else if ((ret_code) == TRAP_E_TERMINATED) {\</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="preprocessor">         error_cmd;\</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="preprocessor">      } else {\</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="preprocessor">         fprintf(stderr, &quot;Error: trap_send() returned %i (%s)\n&quot;, (ret_code), trap_last_error_msg);\</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="preprocessor">         error_cmd;\</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="preprocessor">      }\</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="preprocessor">   }</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment"> * @}</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment"> */</span><span class="comment">/* modulemacros */</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment"> * Function handles output interface negotiation (sends hello message to input interface with its data format</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment"> * and data specifier). Hello message contains message header (data format and data specifier size) and data specifier.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment"> * \param[in] ifc_priv_data  Pointer to output interface private structure.</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment"> * \param[in] ifc_type  Type of IFC, e.g. TRAP_IFC_TYPE_FILE, TRAP_IFC_TYPE_TCPIP, or TRAP_IFC_TYPE_UNIX.</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment"> * \param[in] client_idx  Index of new connected client.</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment"> * \return NEG_RES_FAILED if sending the data to input interface fails,</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment"> *             NEG_RES_FMT_UNKNOWN if the output interface has not specified data format,</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment"> *             NEG_RES_OK signaling success (hello message successfully sent to input interface).</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="keywordtype">int</span> <a class="code" href="trap_8h.html#a392fc5b75861ca76dd868dc05af20cdc">output_ifc_negotiation</a>(<span class="keywordtype">void</span> *ifc_priv_data, <span class="keywordtype">char</span> ifc_type, uint32_t client_idx);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment">/**</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment"> * Function handles input interface negotiation (receives hello message from output interface with its data format</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment"> * and data specifier and compares it with its own data format and data specifier).</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment"> * Hello message contains message header (data format and data specifier size) and data specifier.</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment"> * \param[in,out] ifc_priv_data Pointer to input interface private structure.</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment"> * \param[in] ifc_type  Type of IFC, e.g. TRAP_IFC_TYPE_FILE, TRAP_IFC_TYPE_TCPIP, or TRAP_IFC_TYPE_UNIX.</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment"> * \return NEG_RES_FAILED if receiving the data from output interface fails,</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment"> *             NEG_RES_FMT_UNKNOWN if the output interface has not specified data format,</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment"> *             NEG_RES_FMT_SUBSET if the data format of input and output interfaces is the same and data specifier of the input interface is subset of the output interface data specifier,</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment"> *             NEG_RES_CONT if the data format and data specifier of input and output interface are the same (input interface can receive the data for module right after the negotiation),</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment"> *             NEG_RES_FMT_MISMATCH if the data format or data specifier of input and output interfaces does not match.</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="keywordtype">int</span> <a class="code" href="trap_8h.html#a2c722200cdfbd15e5ab203e88e44bc33">input_ifc_negotiation</a>(<span class="keywordtype">void</span> *ifc_priv_data, <span class="keywordtype">char</span> ifc_type);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;} <span class="comment">// extern &quot;C&quot;</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="group__contextapi_html_ga91d29b40d546e03bd132854c7ae2bf9c"><div class="ttname"><a href="group__contextapi.html#ga91d29b40d546e03bd132854c7ae2bf9c">trap_ctx_set_verbose_level</a></div><div class="ttdeci">void trap_ctx_set_verbose_level(trap_ctx_t *ctx, int level)</div><div class="ttdoc">Set verbosity level of library functions. </div></div>
<div class="ttc" id="group__commonapi_html_ga09574de535c3e73578fa2930b108b38b"><div class="ttname"><a href="group__commonapi.html#ga09574de535c3e73578fa2930b108b38b">trap_multi_result_t</a></div><div class="ttdeci">struct trap_multi_result trap_multi_result_t</div></div>
<div class="ttc" id="group__trap__mess__fmt_html_gaafb028aba366c69626fb86f85700128b"><div class="ttname"><a href="group__trap__mess__fmt.html#gaafb028aba366c69626fb86f85700128b">trap_get_data_fmt</a></div><div class="ttdeci">int trap_get_data_fmt(uint8_t ifc_dir, uint32_t in_ifc_idx, uint8_t *data_type, const char **spec)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03253">trap.c:3253</a></div></div>
<div class="ttc" id="group__commonapi_html_ga1a036c53c7629eb220fa582a7a4ae56c"><div class="ttname"><a href="group__commonapi.html#ga1a036c53c7629eb220fa582a7a4ae56c">trap_ctx_cmp_data_fmt</a></div><div class="ttdeci">int trap_ctx_cmp_data_fmt(const char *sender_ifc_data_fmt, const char *receiver_ifc_data_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03304">trap.c:3304</a></div></div>
<div class="ttc" id="group__commonapi_html_ggac99821743a91f2288f5ea8d3ae6b424ca7c42332f519ee4671d7f674198d6a023"><div class="ttname"><a href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca7c42332f519ee4671d7f674198d6a023">TRAPCTL_SETTIMEOUT</a></div><div class="ttdoc">Set interface timeout (int32_t): in microseconds for non-blocking mode; timeout can be also: TRAP_WAI...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00205">trap.h:205</a></div></div>
<div class="ttc" id="group__contextapi_html_ga19b26aef67596239ccc72a6f0f1d05fd"><div class="ttname"><a href="group__contextapi.html#ga19b26aef67596239ccc72a6f0f1d05fd">trap_ctx_create_ifc_dump</a></div><div class="ttdeci">void trap_ctx_create_ifc_dump(trap_ctx_t *ctx, const char *path)</div><div class="ttdoc">Create dump files. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03025">trap.c:3025</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ga0f4ff32ca8352ec4ebbbaf4c40d2e8b7"><div class="ttname"><a href="group__trap__mess__fmt.html#ga0f4ff32ca8352ec4ebbbaf4c40d2e8b7">trap_ctx_get_in_ifc_state</a></div><div class="ttdeci">int trap_ctx_get_in_ifc_state(trap_ctx_t *ctx, uint32_t ifc_idx)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03258">trap.c:3258</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ga016bd84888f31fe8caf652553fb053aa"><div class="ttname"><a href="group__trap__mess__fmt.html#ga016bd84888f31fe8caf652553fb053aa">trap_ctx_set_required_fmt</a></div><div class="ttdeci">int trap_ctx_set_required_fmt(trap_ctx_t *ctx, uint32_t in_ifc_idx, uint8_t data_type,...)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03150">trap.c:3150</a></div></div>
<div class="ttc" id="group__commonapi_html_ga4b31b73a73b203d80cfcb424ccd9edf5"><div class="ttname"><a href="group__commonapi.html#ga4b31b73a73b203d80cfcb424ccd9edf5">trap_get_param_by_delimiter</a></div><div class="ttdeci">char * trap_get_param_by_delimiter(const char *source, char **dest, const char delimiter)</div><div class="ttdoc">Splitter of params string. Cut the first param, copy it into dest and returns pointer to the start of...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01547">trap.c:1547</a></div></div>
<div class="ttc" id="group__contextapi_html_ga9a78b1581ccf324cb9dd1f4222b5d083"><div class="ttname"><a href="group__contextapi.html#ga9a78b1581ccf324cb9dd1f4222b5d083">trap_ctx_init3</a></div><div class="ttdeci">trap_ctx_t * trap_ctx_init3(const char *name, const char *description, int8_t i_ifcs, int8_t o_ifcs, const char *ifc_spec, const char *service_ifc_name)</div><div class="ttdoc">Initialize and return the context of libtrap. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l02224">trap.c:2224</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ggafbdd4209c0e285278d2134a0500164ada3cb9037147bcf0255468111565ecaca0"><div class="ttname"><a href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada3cb9037147bcf0255468111565ecaca0">TRAP_FMT_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00240">trap.h:240</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ggafbdd4209c0e285278d2134a0500164adab683cfedbefc09299295768bfc566aed"><div class="ttname"><a href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164adab683cfedbefc09299295768bfc566aed">TRAP_FMT_JSON</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00249">trap.h:249</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ggafbdd4209c0e285278d2134a0500164ada6ac00a120fdc99b1ccef72e4c31310f2"><div class="ttname"><a href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada6ac00a120fdc99b1ccef72e4c31310f2">TRAP_FMT_UNIREC</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00246">trap.h:246</a></div></div>
<div class="ttc" id="trap_8h_html_a008a51aeb2d1f379beb493108407ce97"><div class="ttname"><a href="trap_8h.html#a008a51aeb2d1f379beb493108407ce97">trap_ctx_t</a></div><div class="ttdeci">#define trap_ctx_t</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00059">trap.h:59</a></div></div>
<div class="ttc" id="group__commonapi_html_gaf23b66446f6a9549460c6f9315fa612b"><div class="ttname"><a href="group__commonapi.html#gaf23b66446f6a9549460c6f9315fa612b">trap_get_global_ctx</a></div><div class="ttdeci">void * trap_get_global_ctx()</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03355">trap.c:3355</a></div></div>
<div class="ttc" id="group__commonapi_html_gabc3ef5d4460eee3691cc57d54ad3ee04"><div class="ttname"><a href="group__commonapi.html#gabc3ef5d4460eee3691cc57d54ad3ee04">trap_version</a></div><div class="ttdeci">const char trap_version[]</div></div>
<div class="ttc" id="group__simpleapi_html_ga605937391a4c6fbe1510bf4381a8a2b4"><div class="ttname"><a href="group__simpleapi.html#ga605937391a4c6fbe1510bf4381a8a2b4">trap_last_error</a></div><div class="ttdeci">int trap_last_error</div><div class="ttdoc">Code of last error (one of the codes above) </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00124">trap.c:124</a></div></div>
<div class="ttc" id="group__contextapi_html_gad124806d3f71ac0f63df28f44f68bb47"><div class="ttname"><a href="group__contextapi.html#gad124806d3f71ac0f63df28f44f68bb47">trap_ctx_multi_recv</a></div><div class="ttdeci">int trap_ctx_multi_recv(trap_ctx_t *ctx, uint32_t ifc_mask, const void **data, uint16_t *size)</div><div class="ttdoc">Read data from input interfaces according to ifc_mask. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01819">trap.c:1819</a></div></div>
<div class="ttc" id="group__commonapi_html_gaf7b7bed58a3f3c7900264fd442613526"><div class="ttname"><a href="group__commonapi.html#gaf7b7bed58a3f3c7900264fd442613526">trap_default_socket_path_format</a></div><div class="ttdeci">char * trap_default_socket_path_format</div></div>
<div class="ttc" id="group__simpleapi_html_ga440c46189a0111c0946583c56e1ff7a9"><div class="ttname"><a href="group__simpleapi.html#ga440c46189a0111c0946583c56e1ff7a9">trap_last_error_msg</a></div><div class="ttdeci">const char * trap_last_error_msg</div><div class="ttdoc">Human-readable message about last error. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00126">trap.c:126</a></div></div>
<div class="ttc" id="group__ifctypes_html_gac188fb5e77d8af514d8091c21a9570c8"><div class="ttname"><a href="group__ifctypes.html#gac188fb5e77d8af514d8091c21a9570c8">trap_ifc_type</a></div><div class="ttdeci">trap_ifc_type</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00187">trap.h:187</a></div></div>
<div class="ttc" id="group__commonapi_html_ggac99821743a91f2288f5ea8d3ae6b424ca69ebb9c0a47e7aa0c21440a6373e083a"><div class="ttname"><a href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca69ebb9c0a47e7aa0c21440a6373e083a">TRAPCTL_AUTOFLUSH_TIMEOUT</a></div><div class="ttdoc">Set timeout of automatic buffer flushing for interface, expects uint64_t argument with number of micr...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00203">trap.h:203</a></div></div>
<div class="ttc" id="group__commonapi_html_ga6a9b60e8305f9c9af1c42b0b1dbac21b"><div class="ttname"><a href="group__commonapi.html#ga6a9b60e8305f9c9af1c42b0b1dbac21b">trap_ifc_spec_t</a></div><div class="ttdeci">struct trap_ifc_spec_s trap_ifc_spec_t</div></div>
<div class="ttc" id="group__contextapi_html_ga5d734e6839140420db59190197d7cac8"><div class="ttname"><a href="group__contextapi.html#ga5d734e6839140420db59190197d7cac8">trap_ctx_vifcctl</a></div><div class="ttdeci">int trap_ctx_vifcctl(trap_ctx_t *ctx, int8_t type, uint32_t ifcidx, int32_t request, va_list ap)</div><div class="ttdoc">Control TRAP interface. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l02602">trap.c:2602</a></div></div>
<div class="ttc" id="group__contextapi_html_ga7c98c3764b024c49bb50ac850fa65f79"><div class="ttname"><a href="group__contextapi.html#ga7c98c3764b024c49bb50ac850fa65f79">trap_ctx_get_last_error_msg</a></div><div class="ttdeci">const char * trap_ctx_get_last_error_msg(trap_ctx_t *ctx)</div><div class="ttdoc">Get last (error) message from libtrap context. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l02691">trap.c:2691</a></div></div>
<div class="ttc" id="group__contextapi_html_ga9201daf1d4b3123b1caeab26e50c3a61"><div class="ttname"><a href="group__contextapi.html#ga9201daf1d4b3123b1caeab26e50c3a61">trap_ctx_send</a></div><div class="ttdeci">int trap_ctx_send(trap_ctx_t *ctx, unsigned int ifc, const void *data, uint16_t size)</div><div class="ttdoc">Send data via output interface. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01935">trap.c:1935</a></div></div>
<div class="ttc" id="group__contextapi_html_gac2470aae7d6bdea292f422d061a4485b"><div class="ttname"><a href="group__contextapi.html#gac2470aae7d6bdea292f422d061a4485b">trap_ctx_recv</a></div><div class="ttdeci">int trap_ctx_recv(trap_ctx_t *ctx, uint32_t ifcidx, const void **data, uint16_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01778">trap.c:1778</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga780616f8da6339da2c3f11441a6e0f91"><div class="ttname"><a href="group__simpleapi.html#ga780616f8da6339da2c3f11441a6e0f91">trap_set_help_section</a></div><div class="ttdeci">void trap_set_help_section(int level)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00668">trap.c:668</a></div></div>
<div class="ttc" id="group__commonapi_html_ga0e46ea6655ac72ab1508a092cec5b05e"><div class="ttname"><a href="group__commonapi.html#ga0e46ea6655ac72ab1508a092cec5b05e">trap_get_in_ifc_state</a></div><div class="ttdeci">int trap_get_in_ifc_state(uint32_t ifc_idx)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03273">trap.c:3273</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ggafbdd4209c0e285278d2134a0500164ada62494ba4588111acd4873a21f6a73262"><div class="ttname"><a href="group__trap__mess__fmt.html#ggafbdd4209c0e285278d2134a0500164ada62494ba4588111acd4873a21f6a73262">TRAP_FMT_RAW</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00243">trap.h:243</a></div></div>
<div class="ttc" id="group__contextapi_html_gacf18085a199ed89010eaf8afb375f2db"><div class="ttname"><a href="group__contextapi.html#gacf18085a199ed89010eaf8afb375f2db">trap_ctx_get_client_count</a></div><div class="ttdeci">int trap_ctx_get_client_count(trap_ctx_t *ctx, uint32_t ifcidx)</div><div class="ttdoc">Get number of connected clients. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03047">trap.c:3047</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga7d7849e0fda93ec1502cb55c1b10cc34"><div class="ttname"><a href="group__simpleapi.html#ga7d7849e0fda93ec1502cb55c1b10cc34">trap_init</a></div><div class="ttdeci">int trap_init(trap_module_info_t *module_info, trap_ifc_spec_t ifc_spec)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00870">trap.c:870</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_gae2a28b33476acd05869aebfd99b140fd"><div class="ttname"><a href="group__trap__mess__fmt.html#gae2a28b33476acd05869aebfd99b140fd">trap_ctx_vset_data_fmt</a></div><div class="ttdeci">void trap_ctx_vset_data_fmt(trap_ctx_t *ctx, uint32_t out_ifc_idx, uint8_t data_type, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03068">trap.c:3068</a></div></div>
<div class="ttc" id="trap__internal_8h_html_ac3c027f9a365f5741871df5ace13943f"><div class="ttname"><a href="trap__internal_8h.html#ac3c027f9a365f5741871df5ace13943f">data</a></div><div class="ttdeci">uint8_t data[0]</div><div class="ttdef"><b>Definition:</b> <a href="trap__internal_8h_source.html#l00392">trap_internal.h:392</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga2694fb89b2da11d529ef69c21f2197ef"><div class="ttname"><a href="group__simpleapi.html#ga2694fb89b2da11d529ef69c21f2197ef">trap_finalize</a></div><div class="ttdeci">int trap_finalize()</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00922">trap.c:922</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga63de9d9334839f0fe2871ab5a987be32"><div class="ttname"><a href="group__simpleapi.html#ga63de9d9334839f0fe2871ab5a987be32">trap_ifcctl</a></div><div class="ttdeci">int trap_ifcctl(int8_t type, uint32_t ifcidx, int32_t request,...)</div><div class="ttdoc">Control TRAP interface. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01618">trap.c:1618</a></div></div>
<div class="ttc" id="group__contextapi_html_ga94141c10e9f43926c03fe1404650b768"><div class="ttname"><a href="group__contextapi.html#ga94141c10e9f43926c03fe1404650b768">trap_ctx_send_flush</a></div><div class="ttdeci">void trap_ctx_send_flush(trap_ctx_t *ctx, uint32_t ifc)</div><div class="ttdoc">Force flush of buffer. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l02697">trap.c:2697</a></div></div>
<div class="ttc" id="trap_8h_html_a392fc5b75861ca76dd868dc05af20cdc"><div class="ttname"><a href="trap_8h.html#a392fc5b75861ca76dd868dc05af20cdc">output_ifc_negotiation</a></div><div class="ttdeci">int output_ifc_negotiation(void *ifc_priv_data, char ifc_type, uint32_t client_idx)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03368">trap.c:3368</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga52ebce274203e2f54abc1ef487090618"><div class="ttname"><a href="group__simpleapi.html#ga52ebce274203e2f54abc1ef487090618">trap_send_flush</a></div><div class="ttdeci">void trap_send_flush(uint32_t ifc)</div><div class="ttdoc">Force flush of buffer. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01628">trap.c:1628</a></div></div>
<div class="ttc" id="structtrap__ifc__spec__s_html"><div class="ttname"><a href="structtrap__ifc__spec__s.html">trap_ifc_spec_s</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00226">trap.h:226</a></div></div>
<div class="ttc" id="group__ifctypes_html_ggac188fb5e77d8af514d8091c21a9570c8a95482ca4ea5f849965438493b6c5640c"><div class="ttname"><a href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a95482ca4ea5f849965438493b6c5640c">TRAPIFC_INPUT</a></div><div class="ttdoc">interface acts as source of data for module </div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00188">trap.h:188</a></div></div>
<div class="ttc" id="group__contextapi_html_ga5ef43a88e58beb25cfbceed7643e5fba"><div class="ttname"><a href="group__contextapi.html#ga5ef43a88e58beb25cfbceed7643e5fba">trap_ctx_ifcctl</a></div><div class="ttdeci">int trap_ctx_ifcctl(trap_ctx_t *ctx, int8_t type, uint32_t ifcidx, int32_t request,...)</div><div class="ttdoc">Control TRAP interface. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l02589">trap.c:2589</a></div></div>
<div class="ttc" id="group__contextapi_html_ga5b84d682c3c68fe814896f7f002b319b"><div class="ttname"><a href="group__contextapi.html#ga5b84d682c3c68fe814896f7f002b319b">trap_ctx_finalize</a></div><div class="ttdeci">int trap_ctx_finalize(trap_ctx_t **ctx)</div><div class="ttdoc">Terminate libtrap context and free resources. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01884">trap.c:1884</a></div></div>
<div class="ttc" id="group__commonapi_html_gac99821743a91f2288f5ea8d3ae6b424c"><div class="ttname"><a href="group__commonapi.html#gac99821743a91f2288f5ea8d3ae6b424c">trap_ifcctl_request</a></div><div class="ttdeci">trap_ifcctl_request</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00202">trap.h:202</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_gafa497348ff404d5a26d349b63a8888d5"><div class="ttname"><a href="group__trap__mess__fmt.html#gafa497348ff404d5a26d349b63a8888d5">trap_ctx_vset_required_fmt</a></div><div class="ttdeci">int trap_ctx_vset_required_fmt(trap_ctx_t *ctx, uint32_t in_ifc_idx, uint8_t data_type, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03115">trap.c:3115</a></div></div>
<div class="ttc" id="group__contextapi_html_ga2902ffa62edfbfae946d232ff446b1f4"><div class="ttname"><a href="group__contextapi.html#ga2902ffa62edfbfae946d232ff446b1f4">trap_ctx_get_last_error</a></div><div class="ttdeci">int trap_ctx_get_last_error(trap_ctx_t *ctx)</div><div class="ttdoc">Get last result code from libtrap context. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l02685">trap.c:2685</a></div></div>
<div class="ttc" id="structtrap__multi__result_html_a067c01951ed1c711a65795f695b0b41e"><div class="ttname"><a href="structtrap__multi__result.html#a067c01951ed1c711a65795f695b0b41e">trap_multi_result::message_size</a></div><div class="ttdeci">uint16_t message_size</div><div class="ttdoc">Size of incoming message. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00217">trap.h:217</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_gacba5dba90afc66aa5fa36b505c49226f"><div class="ttname"><a href="group__trap__mess__fmt.html#gacba5dba90afc66aa5fa36b505c49226f">trap_ctx_get_data_fmt</a></div><div class="ttdeci">int trap_ctx_get_data_fmt(trap_ctx_t *ctx, uint8_t ifc_dir, uint32_t ifc_idx, uint8_t *data_type, const char **spec)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03165">trap.c:3165</a></div></div>
<div class="ttc" id="group__simpleapi_html_gaf7d9a764eeb924fe2dedaed0b79b2cec"><div class="ttname"><a href="group__simpleapi.html#gaf7d9a764eeb924fe2dedaed0b79b2cec">trap_get_verbose_level</a></div><div class="ttdeci">int trap_get_verbose_level()</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01050">trap.c:1050</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga896b102140653a204da81782981e04f6"><div class="ttname"><a href="group__simpleapi.html#ga896b102140653a204da81782981e04f6">trap_set_verbose_level</a></div><div class="ttdeci">void trap_set_verbose_level(int level)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01041">trap.c:1041</a></div></div>
<div class="ttc" id="trap_8h_html_a2c722200cdfbd15e5ab203e88e44bc33"><div class="ttname"><a href="trap_8h.html#a2c722200cdfbd15e5ab203e88e44bc33">input_ifc_negotiation</a></div><div class="ttdeci">int input_ifc_negotiation(void *ifc_priv_data, char ifc_type)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03530">trap.c:3530</a></div></div>
<div class="ttc" id="group__contextapi_html_ga5a66c582ecfb422c02716d64020ca4f3"><div class="ttname"><a href="group__contextapi.html#ga5a66c582ecfb422c02716d64020ca4f3">trap_ctx_init2</a></div><div class="ttdeci">trap_ctx_t * trap_ctx_init2(trap_module_info_t *module_info, trap_ifc_spec_t ifc_spec, const char *service_ifc_name)</div><div class="ttdoc">Initialize and return the context of libtrap. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l02295">trap.c:2295</a></div></div>
<div class="ttc" id="structtrap__multi__result_html_a6befb83ebd5cf113aedf4cf0eefb06ee"><div class="ttname"><a href="structtrap__multi__result.html#a6befb83ebd5cf113aedf4cf0eefb06ee">trap_multi_result::message</a></div><div class="ttdeci">void * message</div><div class="ttdoc">Data of incoming message. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00218">trap.h:218</a></div></div>
<div class="ttc" id="group__commonapi_html_gaefbccf1d04407e6d79ab4b8a8307cdf9"><div class="ttname"><a href="group__commonapi.html#gaefbccf1d04407e6d79ab4b8a8307cdf9">trap_parse_params</a></div><div class="ttdeci">int trap_parse_params(int *argc, char **argv, trap_ifc_spec_t *ifc_spec)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00683">trap.c:683</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga957443419c0e9961b8efba34f8e79009"><div class="ttname"><a href="group__simpleapi.html#ga957443419c0e9961b8efba34f8e79009">trap_free_ifc_spec</a></div><div class="ttdeci">int trap_free_ifc_spec(trap_ifc_spec_t ifc_spec)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00841">trap.c:841</a></div></div>
<div class="ttc" id="group__commonapi_html_ggac99821743a91f2288f5ea8d3ae6b424ca0698228277af04dfe4c5565de8263538"><div class="ttname"><a href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca0698228277af04dfe4c5565de8263538">TRAPCTL_BUFFERSWITCH</a></div><div class="ttdoc">Enable/disable buffering - could be dangerous on input interface!!! expects char argument with value ...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00204">trap.h:204</a></div></div>
<div class="ttc" id="group__simpleapi_html_gab889fdf90a8a4103bfa072c64d2aed1e"><div class="ttname"><a href="group__simpleapi.html#gab889fdf90a8a4103bfa072c64d2aed1e">trap_send_data</a></div><div class="ttdeci">int trap_send_data(unsigned int ifcidx, const void *data, uint16_t size, int timeout)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01005">trap.c:1005</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ggad79809a2452f1e8a4db4e635fb0bd89ea29dfd7b9fb30ace5fcdc6a719d320de2"><div class="ttname"><a href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea29dfd7b9fb30ace5fcdc6a719d320de2">FMT_MISMATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00263">trap.h:263</a></div></div>
<div class="ttc" id="group__contextapi_html_ga8fb998ec081c6f0ad96a669d95efcfe7"><div class="ttname"><a href="group__contextapi.html#ga8fb998ec081c6f0ad96a669d95efcfe7">trap_ctx_terminate</a></div><div class="ttdeci">int trap_ctx_terminate(trap_ctx_t *ctx)</div><div class="ttdoc">Terminate libtrap context. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01751">trap.c:1751</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_gaafa4932ad483eceed010a6b84972df02"><div class="ttname"><a href="group__trap__mess__fmt.html#gaafa4932ad483eceed010a6b84972df02">trap_set_data_fmt</a></div><div class="ttdeci">void trap_set_data_fmt(uint32_t out_ifc_idx, uint8_t data_type,...)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03232">trap.c:3232</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga4fc7c94bc72b9400ea765187882d532e"><div class="ttname"><a href="group__simpleapi.html#ga4fc7c94bc72b9400ea765187882d532e">trap_terminate</a></div><div class="ttdeci">int trap_terminate()</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00907">trap.c:907</a></div></div>
<div class="ttc" id="group__simpleapi_html_gac8149d036a3b839adaeb876ccc9fcda5"><div class="ttname"><a href="group__simpleapi.html#gac8149d036a3b839adaeb876ccc9fcda5">trap_recv</a></div><div class="ttdeci">int trap_recv(uint32_t ifcidx, const void **data, uint16_t *size)</div><div class="ttdoc">Receive data from input interface. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01018">trap.c:1018</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ga36d50e3cf2e6fdb959e7e5af660947f1"><div class="ttname"><a href="group__trap__mess__fmt.html#ga36d50e3cf2e6fdb959e7e5af660947f1">trap_set_required_fmt</a></div><div class="ttdeci">int trap_set_required_fmt(uint32_t in_ifc_idx, uint8_t data_type,...)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03241">trap.c:3241</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ggad79809a2452f1e8a4db4e635fb0bd89ea83c14af470a24348e2e667016c6c5d41"><div class="ttname"><a href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea83c14af470a24348e2e667016c6c5d41">FMT_WAITING</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00257">trap.h:257</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_gafbdd4209c0e285278d2134a0500164ad"><div class="ttname"><a href="group__trap__mess__fmt.html#gafbdd4209c0e285278d2134a0500164ad">trap_data_format_t</a></div><div class="ttdeci">trap_data_format_t</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00238">trap.h:238</a></div></div>
<div class="ttc" id="group__contextapi_html_gae0d72b263e714adcf85b5b15dad98dad"><div class="ttname"><a href="group__contextapi.html#gae0d72b263e714adcf85b5b15dad98dad">trap_ctx_get_verbose_level</a></div><div class="ttdeci">int trap_ctx_get_verbose_level(trap_ctx_t *ctx)</div><div class="ttdoc">Get verbosity level. </div></div>
<div class="ttc" id="structtrap__ifc__spec__s_html_a67f46fe3c5ea43d1c8894ce9b8f551ab"><div class="ttname"><a href="structtrap__ifc__spec__s.html#a67f46fe3c5ea43d1c8894ce9b8f551ab">trap_ifc_spec_s::params</a></div><div class="ttdeci">char ** params</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00228">trap.h:228</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ggad79809a2452f1e8a4db4e635fb0bd89ea28ac36336d4d5862d01074677e45ce13"><div class="ttname"><a href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea28ac36336d4d5862d01074677e45ce13">FMT_OK</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00260">trap.h:260</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_ggad79809a2452f1e8a4db4e635fb0bd89ea4f7787cd8d6cd8173c1a7a9449b39a5d"><div class="ttname"><a href="group__trap__mess__fmt.html#ggad79809a2452f1e8a4db4e635fb0bd89ea4f7787cd8d6cd8173c1a7a9449b39a5d">FMT_CHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00266">trap.h:266</a></div></div>
<div class="ttc" id="group__simpleapi_html_gaaec5413b3ef25596138f12ae65e58097"><div class="ttname"><a href="group__simpleapi.html#gaaec5413b3ef25596138f12ae65e58097">trap_print_help</a></div><div class="ttdeci">void trap_print_help(const trap_module_info_t *module_info)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01285">trap.c:1285</a></div></div>
<div class="ttc" id="group__contextapi_html_gad63272a184d3a4f5a386bf10629f4266"><div class="ttname"><a href="group__contextapi.html#gad63272a184d3a4f5a386bf10629f4266">trap_ctx_init</a></div><div class="ttdeci">trap_ctx_t * trap_ctx_init(trap_module_info_t *module_info, trap_ifc_spec_t ifc_spec)</div><div class="ttdoc">Initialize and return the context of libtrap. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l02279">trap.c:2279</a></div></div>
<div class="ttc" id="structtrap__ifc__spec__s_html_a6af4e85e62b9408f48e264516c5a4eae"><div class="ttname"><a href="structtrap__ifc__spec__s.html#a6af4e85e62b9408f48e264516c5a4eae">trap_ifc_spec_s::types</a></div><div class="ttdeci">char * types</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00227">trap.h:227</a></div></div>
<div class="ttc" id="structtrap__multi__result_html_a2c6630a824f0d7ef11e3921882867029"><div class="ttname"><a href="structtrap__multi__result.html#a2c6630a824f0d7ef11e3921882867029">trap_multi_result::result_code</a></div><div class="ttdeci">int result_code</div><div class="ttdoc">TRAP_OK if record is valid (message was received successfuly) </div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00219">trap.h:219</a></div></div>
<div class="ttc" id="group__commonapi_html_gab4ba2c95a8817983f23a58aae093f48f"><div class="ttname"><a href="group__commonapi.html#gab4ba2c95a8817983f23a58aae093f48f">trap_check_buffer_content</a></div><div class="ttdeci">int trap_check_buffer_content(void *buffer, uint32_t buffer_size)</div><div class="ttdoc">Check content of buffer, iterate over message headers. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00231">trap.c:231</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_gae876dcd1ae5562bc85c7a10d93909e76"><div class="ttname"><a href="group__trap__mess__fmt.html#gae876dcd1ae5562bc85c7a10d93909e76">trap_ctx_set_data_fmt</a></div><div class="ttdeci">void trap_ctx_set_data_fmt(trap_ctx_t *ctx, uint32_t out_ifc_idx, uint8_t data_type,...)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03101">trap.c:3101</a></div></div>
<div class="ttc" id="group__simpleapi_html_gaac8324ccfb8edf2977e3d4782870d4ef"><div class="ttname"><a href="group__simpleapi.html#gaac8324ccfb8edf2977e3d4782870d4ef">trap_get_data</a></div><div class="ttdeci">int trap_get_data(uint32_t ifc_mask, const void **data, uint16_t *size, int timeout)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l00970">trap.c:970</a></div></div>
<div class="ttc" id="group__commonapi_html_ga8cb714bba0bf01ccf7584332936e2113"><div class="ttname"><a href="group__commonapi.html#ga8cb714bba0bf01ccf7584332936e2113">trap_get_type_and_name_from_string</a></div><div class="ttdeci">const char * trap_get_type_and_name_from_string(const char *source, const char **name, const char **type, int *length_name, int *length_type)</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l03278">trap.c:3278</a></div></div>
<div class="ttc" id="group__trap__mess__fmt_html_gad79809a2452f1e8a4db4e635fb0bd89e"><div class="ttname"><a href="group__trap__mess__fmt.html#gad79809a2452f1e8a4db4e635fb0bd89e">trap_in_ifc_state_t</a></div><div class="ttdeci">trap_in_ifc_state_t</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00255">trap.h:255</a></div></div>
<div class="ttc" id="group__commonapi_html_gaf27b94a242d49569cd6f943023176083"><div class="ttname"><a href="group__commonapi.html#gaf27b94a242d49569cd6f943023176083">trap_git_version</a></div><div class="ttdeci">const char trap_git_version[]</div></div>
<div class="ttc" id="structtrap__multi__result_html"><div class="ttname"><a href="structtrap__multi__result.html">trap_multi_result</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00216">trap.h:216</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga594bc6f6e105611a06b5e1235796e758"><div class="ttname"><a href="group__simpleapi.html#ga594bc6f6e105611a06b5e1235796e758">trap_print_ifc_spec_help</a></div><div class="ttdeci">void trap_print_ifc_spec_help()</div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01525">trap.c:1525</a></div></div>
<div class="ttc" id="group__ifctypes_html_ggac188fb5e77d8af514d8091c21a9570c8a3465118a68f82fd201ec4ce516f687aa"><div class="ttname"><a href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a3465118a68f82fd201ec4ce516f687aa">TRAPIFC_OUTPUT</a></div><div class="ttdoc">interface is used for sending data out of module </div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00189">trap.h:189</a></div></div>
<div class="ttc" id="group__simpleapi_html_ga165b017fa4b66422275c4e502ac95d2a"><div class="ttname"><a href="group__simpleapi.html#ga165b017fa4b66422275c4e502ac95d2a">trap_send</a></div><div class="ttdeci">int trap_send(uint32_t ifcidx, const void *data, uint16_t size)</div><div class="ttdoc">Send data via output interface. </div><div class="ttdef"><b>Definition:</b> <a href="trap_8c_source.html#l01011">trap.c:1011</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
