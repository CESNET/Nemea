<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libtrap: Simple API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libtrap
   &#160;<span id="projectnumber">0.11.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Simple API</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga957443419c0e9961b8efba34f8e79009"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga957443419c0e9961b8efba34f8e79009">trap_free_ifc_spec</a> (<a class="el" href="group__commonapi.html#ga6a9b60e8305f9c9af1c42b0b1dbac21b">trap_ifc_spec_t</a> ifc_spec)</td></tr>
<tr class="separator:ga957443419c0e9961b8efba34f8e79009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7d7849e0fda93ec1502cb55c1b10cc34"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga7d7849e0fda93ec1502cb55c1b10cc34">trap_init</a> (<a class="el" href="group__module__parameters.html#ga71a4d8ed23fe5ee415c3f08948bb09ba">trap_module_info_t</a> *module_info, <a class="el" href="group__commonapi.html#ga6a9b60e8305f9c9af1c42b0b1dbac21b">trap_ifc_spec_t</a> ifc_spec)</td></tr>
<tr class="separator:ga7d7849e0fda93ec1502cb55c1b10cc34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fc7c94bc72b9400ea765187882d532e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga4fc7c94bc72b9400ea765187882d532e">trap_terminate</a> ()</td></tr>
<tr class="separator:ga4fc7c94bc72b9400ea765187882d532e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2694fb89b2da11d529ef69c21f2197ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga2694fb89b2da11d529ef69c21f2197ef">trap_finalize</a> ()</td></tr>
<tr class="separator:ga2694fb89b2da11d529ef69c21f2197ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac8324ccfb8edf2977e3d4782870d4ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#gaac8324ccfb8edf2977e3d4782870d4ef">trap_get_data</a> (uint32_t ifc_mask, const void **data, uint16_t *size, int timeout)</td></tr>
<tr class="separator:gaac8324ccfb8edf2977e3d4782870d4ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab889fdf90a8a4103bfa072c64d2aed1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#gab889fdf90a8a4103bfa072c64d2aed1e">trap_send_data</a> (unsigned int ifcidx, const void *data, uint16_t size, int timeout)</td></tr>
<tr class="separator:gab889fdf90a8a4103bfa072c64d2aed1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8149d036a3b839adaeb876ccc9fcda5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#gac8149d036a3b839adaeb876ccc9fcda5">trap_recv</a> (uint32_t ifcidx, const void **data, uint16_t *size)</td></tr>
<tr class="memdesc:gac8149d036a3b839adaeb876ccc9fcda5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive data from input interface.  <a href="#gac8149d036a3b839adaeb876ccc9fcda5">More...</a><br /></td></tr>
<tr class="separator:gac8149d036a3b839adaeb876ccc9fcda5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga165b017fa4b66422275c4e502ac95d2a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga165b017fa4b66422275c4e502ac95d2a">trap_send</a> (uint32_t ifcidx, const void *data, uint16_t size)</td></tr>
<tr class="memdesc:ga165b017fa4b66422275c4e502ac95d2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data via output interface.  <a href="#ga165b017fa4b66422275c4e502ac95d2a">More...</a><br /></td></tr>
<tr class="separator:ga165b017fa4b66422275c4e502ac95d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga896b102140653a204da81782981e04f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga896b102140653a204da81782981e04f6">trap_set_verbose_level</a> (int level)</td></tr>
<tr class="separator:ga896b102140653a204da81782981e04f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7d9a764eeb924fe2dedaed0b79b2cec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#gaf7d9a764eeb924fe2dedaed0b79b2cec">trap_get_verbose_level</a> ()</td></tr>
<tr class="separator:gaf7d9a764eeb924fe2dedaed0b79b2cec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga780616f8da6339da2c3f11441a6e0f91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga780616f8da6339da2c3f11441a6e0f91">trap_set_help_section</a> (int level)</td></tr>
<tr class="separator:ga780616f8da6339da2c3f11441a6e0f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaec5413b3ef25596138f12ae65e58097"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#gaaec5413b3ef25596138f12ae65e58097">trap_print_help</a> (const <a class="el" href="group__module__parameters.html#ga71a4d8ed23fe5ee415c3f08948bb09ba">trap_module_info_t</a> *module_info)</td></tr>
<tr class="separator:gaaec5413b3ef25596138f12ae65e58097"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga594bc6f6e105611a06b5e1235796e758"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga594bc6f6e105611a06b5e1235796e758">trap_print_ifc_spec_help</a> ()</td></tr>
<tr class="separator:ga594bc6f6e105611a06b5e1235796e758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63de9d9334839f0fe2871ab5a987be32"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga63de9d9334839f0fe2871ab5a987be32">trap_ifcctl</a> (int8_t type, uint32_t ifcidx, int32_t request,...)</td></tr>
<tr class="memdesc:ga63de9d9334839f0fe2871ab5a987be32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control TRAP interface.  <a href="#ga63de9d9334839f0fe2871ab5a987be32">More...</a><br /></td></tr>
<tr class="separator:ga63de9d9334839f0fe2871ab5a987be32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52ebce274203e2f54abc1ef487090618"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga52ebce274203e2f54abc1ef487090618">trap_send_flush</a> (uint32_t ifc)</td></tr>
<tr class="memdesc:ga52ebce274203e2f54abc1ef487090618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force flush of buffer.  <a href="#ga52ebce274203e2f54abc1ef487090618">More...</a><br /></td></tr>
<tr class="separator:ga52ebce274203e2f54abc1ef487090618"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga605937391a4c6fbe1510bf4381a8a2b4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga605937391a4c6fbe1510bf4381a8a2b4">trap_last_error</a></td></tr>
<tr class="memdesc:ga605937391a4c6fbe1510bf4381a8a2b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Code of last error (one of the codes above)  <a href="#ga605937391a4c6fbe1510bf4381a8a2b4">More...</a><br /></td></tr>
<tr class="separator:ga605937391a4c6fbe1510bf4381a8a2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga440c46189a0111c0946583c56e1ff7a9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__simpleapi.html#ga440c46189a0111c0946583c56e1ff7a9">trap_last_error_msg</a></td></tr>
<tr class="memdesc:ga440c46189a0111c0946583c56e1ff7a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Human-readable message about last error.  <a href="#ga440c46189a0111c0946583c56e1ff7a9">More...</a><br /></td></tr>
<tr class="separator:ga440c46189a0111c0946583c56e1ff7a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2694fb89b2da11d529ef69c21f2197ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2694fb89b2da11d529ef69c21f2197ef">&#9670;&nbsp;</a></span>trap_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_finalize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Cleanup function. Disconnect all interfaces and do all necessary cleanup. </p><dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>

</div>
</div>
<a id="ga957443419c0e9961b8efba34f8e79009"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga957443419c0e9961b8efba34f8e79009">&#9670;&nbsp;</a></span>trap_free_ifc_spec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_free_ifc_spec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__commonapi.html#ga6a9b60e8305f9c9af1c42b0b1dbac21b">trap_ifc_spec_t</a>&#160;</td>
          <td class="paramname"><em>ifc_spec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor of trap_ifc_spec_t structure. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ifc_spec</td><td>trap_ifc_spec_t structure to clear. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 on success) </dd></dl>

</div>
</div>
<a id="gaac8324ccfb8edf2977e3d4782870d4ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaac8324ccfb8edf2977e3d4782870d4ef">&#9670;&nbsp;</a></span>trap_get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_get_data </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ifc_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void **&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read data from input interface. Read a record from one of interfaces specified by <code>ifc_mask</code> and store pointer to it into <code>data</code>. If data are not available on any of specified interfaces, wait until data are available or <code>timeout</code> microseconds elapses. If <code>timeout</code> &lt; 0, wait indefinitely. When function returns due to timeout, contents of <code>data</code> and <code>size</code> are undefined. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ifc_mask</td><td>Mask of interfaces to listen on (if <em>i</em>-th bit is set, interface <em>i</em> is enabled). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to received data. When only one IFC is selected by ifc_mask, data contains the payload of message. When ifc_mask contains more than one IFC, array of <a class="el" href="group__commonapi.html#ga09574de535c3e73578fa2930b108b38b">trap_multi_result_t</a> is returned. The array size is equal to number of input IFCs. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Data must not be freed! Library stores incomming data into static array and rewrites it during every <a class="el" href="group__simpleapi.html#gaac8324ccfb8edf2977e3d4782870d4ef">trap_get_data()</a> call. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>Number of bytes of data. When only one IFC is selected by ifc_mask, size contains the size of incoming message. Otherwise, (when more than one IFC are selected) size contains the size of <a class="el" href="group__commonapi.html#ga09574de535c3e73578fa2930b108b38b">trap_multi_result_t</a> array in bytes. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Timeout in microseconds for non-blocking mode; timeout can be also: TRAP_WAIT, TRAP_HALFWAIT, or TRAP_NO_WAIT. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code - 0 on success, TRAP_E_TIMEOUT if timeout elapses. </dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>This function should be replaced by <a class="el" href="group__simpleapi.html#gac8149d036a3b839adaeb876ccc9fcda5" title="Receive data from input interface. ">trap_recv()</a>. </dd></dl>

</div>
</div>
<a id="gaf7d9a764eeb924fe2dedaed0b79b2cec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf7d9a764eeb924fe2dedaed0b79b2cec">&#9670;&nbsp;</a></span>trap_get_verbose_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_get_verbose_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get verbosity level. See trap_set_verbose_level for list of levels. </p><dl class="section return"><dt>Returns</dt><dd>Verbosity level currently set in the library. </dd></dl>

</div>
</div>
<a id="ga63de9d9334839f0fe2871ab5a987be32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63de9d9334839f0fe2871ab5a987be32">&#9670;&nbsp;</a></span>trap_ifcctl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_ifcctl </td>
          <td>(</td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ifcidx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control TRAP interface. </p>
<dl class="section note"><dt>Note</dt><dd>Type and request types were changed from enum because of python wrapper. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td><a class="el" href="group__ifctypes.html#gac188fb5e77d8af514d8091c21a9570c8">trap_ifc_type</a> direction of interface </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ifcidx</td><td>index of TRAP interface </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td><a class="el" href="group__commonapi.html#gac99821743a91f2288f5ea8d3ae6b424c">trap_ifcctl_request</a> type of operation </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">...</td><td>arguments of request, see <a class="el" href="group__commonapi.html#gac99821743a91f2288f5ea8d3ae6b424c">trap_ifcctl_request</a> for more details on requests and their arguments.</td></tr>
  </table>
  </dd>
</dl>
<p>Examples: </p><div class="fragment"><div class="line"><span class="comment">// set 4 seconds timeout</span></div><div class="line"><a class="code" href="group__simpleapi.html#ga63de9d9334839f0fe2871ab5a987be32">trap_ifcctl</a>(<a class="code" href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a95482ca4ea5f849965438493b6c5640c">TRAPIFC_INPUT</a>, 0, <a class="code" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca7c42332f519ee4671d7f674198d6a023">TRAPCTL_SETTIMEOUT</a>, 4000000);</div><div class="line"><span class="comment">// disable auto-flush</span></div><div class="line"><a class="code" href="group__simpleapi.html#ga63de9d9334839f0fe2871ab5a987be32">trap_ifcctl</a>(<a class="code" href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a3465118a68f82fd201ec4ce516f687aa">TRAPIFC_OUTPUT</a>, 0, <a class="code" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca69ebb9c0a47e7aa0c21440a6373e083a">TRAPCTL_AUTOFLUSH_TIMEOUT</a>, <a class="code" href="group__trap__timeout.html#gaf0f4e37c635e9cfbd6bba0e0c5d6dfb4">TRAP_NO_AUTO_FLUSH</a>);</div><div class="line"><span class="comment">// disable buffering</span></div><div class="line"><a class="code" href="group__simpleapi.html#ga63de9d9334839f0fe2871ab5a987be32">trap_ifcctl</a>(<a class="code" href="group__ifctypes.html#ggac188fb5e77d8af514d8091c21a9570c8a3465118a68f82fd201ec4ce516f687aa">TRAPIFC_OUTPUT</a>, 0, <a class="code" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca0698228277af04dfe4c5565de8263538">TRAPCTL_BUFFERSWITCH</a>, 0);</div></div><!-- fragment --><dl class="section return"><dt>Returns</dt><dd>TRAP_E_OK on success </dd></dl>

</div>
</div>
<a id="ga7d7849e0fda93ec1502cb55c1b10cc34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7d7849e0fda93ec1502cb55c1b10cc34">&#9670;&nbsp;</a></span>trap_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__module__parameters.html#ga71a4d8ed23fe5ee415c3f08948bb09ba">trap_module_info_t</a> *&#160;</td>
          <td class="paramname"><em>module_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__commonapi.html#ga6a9b60e8305f9c9af1c42b0b1dbac21b">trap_ifc_spec_t</a>&#160;</td>
          <td class="paramname"><em>ifc_spec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialization function. Create and initialize all interfaces. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">module_info</td><td>Pointer to struct containing info about the module. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ifc_spec</td><td>Structure with specification of interface types and their parameters. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 on success) </dd></dl>

</div>
</div>
<a id="gaaec5413b3ef25596138f12ae65e58097"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaec5413b3ef25596138f12ae65e58097">&#9670;&nbsp;</a></span>trap_print_help()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_print_help </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__module__parameters.html#ga71a4d8ed23fe5ee415c3f08948bb09ba">trap_module_info_t</a> *&#160;</td>
          <td class="paramname"><em>module_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print common TRAP help message. The help message contains information from module_info and describes common TRAP command-line parameters. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">module_info</td><td>Pointer to struct containing info about the module. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga594bc6f6e105611a06b5e1235796e758"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga594bc6f6e105611a06b5e1235796e758">&#9670;&nbsp;</a></span>trap_print_ifc_spec_help()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_print_ifc_spec_help </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print help about interface specifier. Prints help message about format of interface specifier and description of all available interface types. This message is normally a part of help printed by trap_print_help, this function is useful when you don't use standard TRAP command-line parameters but you still use the same format of interface specifier. </p>

</div>
</div>
<a id="gac8149d036a3b839adaeb876ccc9fcda5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac8149d036a3b839adaeb876ccc9fcda5">&#9670;&nbsp;</a></span>trap_recv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_recv </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ifcidx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void **&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive data from input interface. </p>
<p>Receive a message from interface specified by <code>ifcidx</code> and set pointer to the <code>data</code>. When function returns due to timeout, contents of <code>data</code> and <code>size</code> are undefined.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ifcidx</td><td>Index of input IFC. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to received data. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>Size of received data in bytes of data. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code - <a class="el" href="group__errorcodes.html#ga6aabff248f6e15e2e53b06cfd1e8349a" title="Success, no error. ">TRAP_E_OK</a> on success, <a class="el" href="group__errorcodes.html#gaac3c26d22e1f37413af205a7a70a058c" title="Read or write operation timeout. ">TRAP_E_TIMEOUT</a> if timeout elapses.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Data must not be freed! Library stores incomming data into static array and rewrites it during every <a class="el" href="group__simpleapi.html#gaac8324ccfb8edf2977e3d4782870d4ef">trap_get_data()</a> call. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__simpleapi.html#ga63de9d9334839f0fe2871ab5a987be32" title="Control TRAP interface. ">trap_ifcctl()</a> to set timeout (<a class="el" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca7c42332f519ee4671d7f674198d6a023" title="Set interface timeout (int32_t): in microseconds for non-blocking mode; timeout can be also: TRAP_WAI...">TRAPCTL_SETTIMEOUT</a>) </dd></dl>

</div>
</div>
<a id="ga165b017fa4b66422275c4e502ac95d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga165b017fa4b66422275c4e502ac95d2a">&#9670;&nbsp;</a></span>trap_send()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_send </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ifcidx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data via output interface. </p>
<p>Send a message given by <code>data</code> pointer of <code>size</code> message size via interface specified by <code>ifcidx</code> that is the index of output interfaces (counted from 0).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ifcidx</td><td>Index of input IFC. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>Pointer to message to send. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>Size of message in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code - <a class="el" href="group__errorcodes.html#ga6aabff248f6e15e2e53b06cfd1e8349a" title="Success, no error. ">TRAP_E_OK</a> on success, <a class="el" href="group__errorcodes.html#gaac3c26d22e1f37413af205a7a70a058c" title="Read or write operation timeout. ">TRAP_E_TIMEOUT</a> if timeout elapses.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Data must not be freed! Library stores incomming data into static array and rewrites it during every <a class="el" href="group__simpleapi.html#gaac8324ccfb8edf2977e3d4782870d4ef">trap_get_data()</a> call. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__simpleapi.html#ga63de9d9334839f0fe2871ab5a987be32" title="Control TRAP interface. ">trap_ifcctl()</a> to set timeout (<a class="el" href="group__commonapi.html#ggac99821743a91f2288f5ea8d3ae6b424ca7c42332f519ee4671d7f674198d6a023" title="Set interface timeout (int32_t): in microseconds for non-blocking mode; timeout can be also: TRAP_WAI...">TRAPCTL_SETTIMEOUT</a>) </dd></dl>

</div>
</div>
<a id="gab889fdf90a8a4103bfa072c64d2aed1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab889fdf90a8a4103bfa072c64d2aed1e">&#9670;&nbsp;</a></span>trap_send_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_send_data </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>ifcidx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send data to output interface. Write data of size <code>size</code> given by <code>data</code> pointer into interface <code>ifc</code>. If data cannot be written immediately (e.g. because of full buffer or lost connection), wait until write is possible or <code>timeout</code> microseconds elapses. If <code>timeout</code> &lt; 0, wait indefinitely. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ifcidx</td><td>Index of interface to write into. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>Number of bytes of data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>Timeout in microseconds for non-blocking mode; timeout can be also: TRAP_WAIT, TRAP_HALFWAIT, or TRAP_NO_WAIT. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code - 0 on success, TRAP_E_TIMEOUT if timeout elapses. </dd></dl>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>This function should be replaced by <a class="el" href="group__simpleapi.html#ga165b017fa4b66422275c4e502ac95d2a" title="Send data via output interface. ">trap_send()</a>. </dd></dl>

</div>
</div>
<a id="ga52ebce274203e2f54abc1ef487090618"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52ebce274203e2f54abc1ef487090618">&#9670;&nbsp;</a></span>trap_send_flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_send_flush </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>ifc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Force flush of buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ifc</td><td>IFC Index of interface to write into. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga780616f8da6339da2c3f11441a6e0f91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga780616f8da6339da2c3f11441a6e0f91">&#9670;&nbsp;</a></span>trap_set_help_section()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_set_help_section </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set section for <a class="el" href="group__simpleapi.html#gaaec5413b3ef25596138f12ae65e58097">trap_print_help()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>0 for default info about module, 1 for info about IFC specifier </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga896b102140653a204da81782981e04f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga896b102140653a204da81782981e04f6">&#9670;&nbsp;</a></span>trap_set_verbose_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void trap_set_verbose_level </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set verbosity level of library functions. Verbosity levels may be:</p><ul>
<li>-3 - errors</li>
<li>-2 - warnings</li>
<li>-1 - notices (default)</li>
<li>0 - verbose</li>
<li>1 - more verbose</li>
<li>2 - even more verbose</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>Desired level of verbosity. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4fc7c94bc72b9400ea765187882d532e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4fc7c94bc72b9400ea765187882d532e">&#9670;&nbsp;</a></span>trap_terminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_terminate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to terminate module's operation. This function stops all read/write operations on all interfaces. Any waiting in trap_get_data and trap_send_data is interrupted and these functions return immediately with TRAP_E_TERMINATED. Any call of trap_get_data or trap_send_data after call of this function returns TRAP_E_TERMINATED.</p>
<p>This function is used to terminate module's operation (asynchronously), e.g. in SIGTERM handler. </p><dl class="section return"><dt>Returns</dt><dd>Always TRAP_E_OK (0). </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga605937391a4c6fbe1510bf4381a8a2b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga605937391a4c6fbe1510bf4381a8a2b4">&#9670;&nbsp;</a></span>trap_last_error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int trap_last_error</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Code of last error (one of the codes above) </p>

</div>
</div>
<a id="ga440c46189a0111c0946583c56e1ff7a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga440c46189a0111c0946583c56e1ff7a9">&#9670;&nbsp;</a></span>trap_last_error_msg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* trap_last_error_msg</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Human-readable message about last error. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
