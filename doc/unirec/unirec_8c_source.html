<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UniRec: unirec.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UniRec
   &#160;<span id="projectnumber">2.2.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">unirec.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="unirec_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * Copyright (C) 2015 CESNET</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * LICENSE TERMS</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * are met:</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * 1. Redistributions of source code must retain the above copyright</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *    notice, this list of conditions and the following disclaimer in</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> *    the documentation and/or other materials provided with the</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *    distribution.</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * 3. Neither the name of the Company nor the names of its contributors</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *    may be used to endorse or promote products derived from this</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *    software without specific prior written permission.</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * ALTERNATIVELY, provided that this notice is retained in full, this</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * product may be distributed under the terms of the GNU General Public</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * License (GPL) version 2 or later, in which case the provisions</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * of the GPL apply INSTEAD OF those given above.</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * This software is provided ``as is&#39;&#39;, and any express or implied</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * warranties, including, but not limited to, the implied warranties of</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * merchantability and fitness for a particular purpose are disclaimed.</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * In no event shall the company or contributors be liable for any</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * direct, indirect, incidental, special, exemplary, or consequential</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * damages (including, but not limited to, procurement of substitute</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * goods or services; loss of use, data, or profits; or business</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * interruption) however caused and on any theory of liability, whether</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> * in contract, strict liability, or tort (including negligence or</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> * otherwise) arising in any way out of the use of this software, even</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> * if advised of the possibility of such damage.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="unirec_8c.html#ad3d8a3bd0c0b677acef144f2c2ef6d73">   46</a></span>&#160;<span class="preprocessor">#define _BSD_SOURCE</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="unirec_8c.html#a78c99ffd76a7bb3c8c74db76207e9ab4">   47</a></span>&#160;<span class="preprocessor">#define _XOPEN_SOURCE</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="unirec_8c.html#a8773045a81f883f2ab00761f45e8642c">   48</a></span>&#160;<span class="preprocessor">#define __USE_XOPEN</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;regex.h&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="unirec_8h.html">unirec.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &lt;libtrap/trap.h&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;ur_values.c&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="inline_8h.html">inline.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// All inline functions from ipaddr.h must be declared again with &quot;extern&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// in exactly one translation unit (it generates externally linkable code of</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// these function)</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// See this for explanation (Nemo&#39;s answer):</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">// http://stackoverflow.com/questions/6312597/is-inline-without-static-or-extern-ever-useful-in-c99</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">int</span> <a class="code" href="group__uripaddr.html#gabf382d0ceec2ca2d62cb94ecf000ecd4">ip_is4</a>(<span class="keyword">const</span> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">int</span> <a class="code" href="group__uripaddr.html#gaeaa8f3d94315e53ebf8c43c7dde8f6cb">ip_is6</a>(<span class="keyword">const</span> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> uint32_t <a class="code" href="group__uripaddr.html#gae6ab3a77cab8533289729b25c9438689">ip_get_v4_as_int</a>(<a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">char</span> *<a class="code" href="group__uripaddr.html#gac2c790297e16730292696c44306dd1a6">ip_get_v4_as_bytes</a>(<span class="keyword">const</span> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> <a class="code" href="group__uripaddr.html#gad57ac58e8823c5197445e9035843a417">ip_from_int</a>(uint32_t i);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> <a class="code" href="group__uripaddr.html#ga2c694d465f540e700d91a655f6d47ebd">ip_from_4_bytes_be</a>(<span class="keywordtype">char</span> b[4]);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> <a class="code" href="group__uripaddr.html#ga34b4da3670a99958f7038c90da2b7152">ip_from_4_bytes_le</a>(<span class="keywordtype">char</span> b[4]);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> <a class="code" href="group__uripaddr.html#ga61daf049c5a24cd2a331d916694a4fef">ip_from_16_bytes_be</a>(<span class="keywordtype">char</span> b[16]);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> <a class="code" href="group__uripaddr.html#ga35a767afac198cabbbb7cf5ea70c9e33">ip_from_16_bytes_le</a>(<span class="keywordtype">char</span> b[16]);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">int</span> <a class="code" href="group__uripaddr.html#ga6b852d36a8e8b8932058fba40570a24a">ip_cmp</a>(<span class="keyword">const</span> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr1, <span class="keyword">const</span> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr2);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">int</span> <a class="code" href="group__uripaddr.html#gae01409ca18c16d2b28292ff94802b51b">ip_from_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">void</span> <a class="code" href="group__uripaddr.html#ga4aa063dc904a602c2ee1f46bf50315e7">ip_to_str</a>(<span class="keyword">const</span> <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr, <span class="keywordtype">char</span> *str);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <a class="code" href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a> <a class="code" href="unirec_8c.html#a167db66d59cbead9f8f83e6c538e0737">mac_from_bytes</a>(uint8_t *array);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">int</span> <a class="code" href="unirec_8c.html#a7b3f651fa0b6a4eac840c6c2233c4460">mac_from_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <a class="code" href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a> *addr);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">int</span> <a class="code" href="unirec_8c.html#a36505bbf562889210af7a858dc891fa5">mac_cmp</a>(<span class="keyword">const</span> <a class="code" href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a> *addr1, <span class="keyword">const</span> <a class="code" href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a> *addr2);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">void</span> <a class="code" href="unirec_8c.html#a295b3ad0387685d62fab829eb2c5c5cb">mac_to_str</a>(<span class="keyword">const</span> <a class="code" href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a> *addr, <span class="keywordtype">char</span> *str);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">void</span> <a class="code" href="unirec_8c.html#a355872267716d5fae37d42eadf4d90d3">mac_to_bytes</a>(<span class="keyword">const</span> <a class="code" href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a> *addr, uint8_t *array);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="unirec_8c.html#a81f8d7af996a01f4b6e4ac086d483eb0">   93</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="unirec_8c.html#a81f8d7af996a01f4b6e4ac086d483eb0">ur_field_type_size</a>[] = {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   -1, <span class="comment">/*UR_TYPE_STRING*/</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   -1, <span class="comment">/*UR_TYPE_BYTES*/</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   1, <span class="comment">/*UR_TYPE_CHAR*/</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   1, <span class="comment">/*UR_TYPE_UINT8*/</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   1, <span class="comment">/*UR_TYPE_INT8*/</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   2, <span class="comment">/*UR_TYPE_UINT16*/</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   2, <span class="comment">/*UR_TYPE_INT16*/</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   4, <span class="comment">/*UR_TYPE_UINT32*/</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   4, <span class="comment">/*UR_TYPE_INT32*/</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   8, <span class="comment">/*UR_TYPE_UINT64*/</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;   8, <span class="comment">/*UR_TYPE_INT64*/</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   4, <span class="comment">/*UR_TYPE_FLOAT*/</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   8, <span class="comment">/*UR_TYPE_DOUBLE*/</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   16, <span class="comment">/*UR_TYPE_IP*/</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   6, <span class="comment">/*UR_TYPE_MAC*/</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   8, <span class="comment">/*UR_TYPE_TIME*/</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;};</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="unirec_8c.html#a2a84dc8eb5478757192b2df4004c148a">  117</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="unirec_8c.html#a2a84dc8eb5478757192b2df4004c148a">ur_field_type_str</a>[] = {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="stringliteral">&quot;string&quot;</span>, <span class="comment">/*UR_TYPE_STRING*/</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="stringliteral">&quot;bytes&quot;</span>, <span class="comment">/*UR_TYPE_BYTES*/</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <span class="stringliteral">&quot;char&quot;</span>, <span class="comment">/*UR_TYPE_CHAR*/</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   <span class="stringliteral">&quot;uint8&quot;</span>, <span class="comment">/*UR_TYPE_UINT8*/</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="stringliteral">&quot;int8&quot;</span>, <span class="comment">/*UR_TYPE_INT8*/</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <span class="stringliteral">&quot;uint16&quot;</span>, <span class="comment">/*UR_TYPE_UINT16*/</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <span class="stringliteral">&quot;int16&quot;</span>, <span class="comment">/*UR_TYPE_INT16*/</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <span class="stringliteral">&quot;uint32&quot;</span>, <span class="comment">/*UR_TYPE_UINT32*/</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="stringliteral">&quot;int32&quot;</span>, <span class="comment">/*UR_TYPE_INT32*/</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="stringliteral">&quot;uint64&quot;</span>, <span class="comment">/*UR_TYPE_UINT64*/</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <span class="stringliteral">&quot;int64&quot;</span>, <span class="comment">/*UR_TYPE_INT64*/</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   <span class="stringliteral">&quot;float&quot;</span>, <span class="comment">/*UR_TYPE_FLOAT*/</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="stringliteral">&quot;double&quot;</span>, <span class="comment">/*UR_TYPE_DOUBLE*/</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="stringliteral">&quot;ipaddr&quot;</span>, <span class="comment">/*UR_TYPE_IP*/</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <span class="stringliteral">&quot;macaddr&quot;</span>, <span class="comment">/*UR_TYPE_MAC*/</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="stringliteral">&quot;time&quot;</span>, <span class="comment">/*UR_TYPE_TIME*/</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;};</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="unirec_8c.html#a8b963edd959e1d4bdd91d82807a384ba">  136</a></span>&#160;<a class="code" href="unirec_8h.html#structur__field__specs__t">ur_field_specs_t</a> <a class="code" href="unirec_8c.html#a8b963edd959e1d4bdd91d82807a384ba">ur_field_specs</a>;</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="unirec_8c.html#a67e3a2f4dff881d18a6a3c8cc67b906b">  137</a></span>&#160;<a class="code" href="unirec_8h.html#structur__static__field__specs__t">ur_static_field_specs_t</a> <a class="code" href="unirec_8c.html#a67e3a2f4dff881d18a6a3c8cc67b906b">UR_FIELD_SPECS_STATIC</a>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">  139</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>[] = <span class="stringliteral">&quot;Memory allocation error&quot;</span>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga238d68dc4d1dc5b0369e907b0e2d9711">  141</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#ga238d68dc4d1dc5b0369e907b0e2d9711">ur_init</a>(<a class="code" href="unirec_8h.html#structur__static__field__specs__t">ur_static_field_specs_t</a> field_specs_static)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <span class="keywordtype">int</span> i, j;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a2049527f65320075c1e5e3bb9c9aff15">intialized</a> == <a class="code" href="unirec_8h.html#a1c3c1c127c05a89b0e87197d022e7107">UR_INITIALIZED</a>) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="comment">//copy size</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a2e28bd09fc5056730e543d023cf0a2da">ur_last_statically_defined_id</a> = field_specs_static.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a> = field_specs_static.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a>;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a> = field_specs_static.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a> + <a class="code" href="unirec_8h.html#aa5d7494a2e5265dce181ecdcfaeaaaea">UR_INITIAL_SIZE_FIELDS_TABLE</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <span class="comment">//copy field type</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a> = (<a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030">ur_field_type_t</a> *) calloc(<span class="keyword">sizeof</span>(<a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030">ur_field_type_t</a>), ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a> == NULL) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a>, field_specs_static.<a class="code" href="unirec_8h.html#ad5306965acd4764b31d6634a0947e7a2">ur_field_types</a>, <span class="keyword">sizeof</span>(<a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030">ur_field_type_t</a>) * field_specs_static.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <span class="comment">//copy field sizes</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a> = (<span class="keywordtype">short</span> *) calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">short</span>), ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a> == NULL) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a>, field_specs_static.<a class="code" href="unirec_8h.html#a802e8538253f5509acc14f2da2b225f6">ur_field_sizes</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">short</span>) * field_specs_static.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a>);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <span class="comment">//copy field names</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a> = (<span class="keywordtype">char</span> **) calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *), ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a> == NULL) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a>);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; field_specs_static.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a>; i++) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i] = (<span class="keywordtype">char</span> *) calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), strlen(field_specs_static.<a class="code" href="unirec_8h.html#a98353be825cf3f1fb16c73e048ea0b74">ur_field_names</a>[i]) + 1);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i] == NULL) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;         <span class="keywordflow">for</span> (j = 0; j &lt; i; j++) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[j]);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      strcpy(ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i], field_specs_static.<a class="code" href="unirec_8h.html#a98353be825cf3f1fb16c73e048ea0b74">ur_field_names</a>[i]);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a2049527f65320075c1e5e3bb9c9aff15">intialized</a> = <a class="code" href="unirec_8h.html#a1c3c1c127c05a89b0e87197d022e7107">UR_INITIALIZED</a>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gabfbfcce0fe6729ceb692d09541336c33">  188</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="group__urtemplate.html#gabfbfcce0fe6729ceb692d09541336c33">ur_template_string_delimiter</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt, <span class="keywordtype">int</span> delimiter)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keywordtype">char</span> *str = NULL, *strmove = NULL, *str_new = NULL;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keywordtype">int</span> len = <a class="code" href="unirec_8h.html#a6d4be6c0e3ab412dad7052b6b92cf064">UR_DEFAULT_LENGTH_OF_TEMPLATE</a>, act_len = 0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keywordflow">if</span> (tmplt == NULL) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   str = (<span class="keywordtype">char</span> *) calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), len);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordflow">if</span> (str == NULL) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   strmove = str;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tmplt-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a>; i++) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      act_len += strlen(<a class="code" href="unirec_8c.html#a2a84dc8eb5478757192b2df4004c148a">ur_field_type_str</a>[<a class="code" href="group__urtemplate.html#gae46ff3befebabc8c83372030a98df592">ur_get_type</a>(tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i])]) + strlen(<a class="code" href="group__urtemplate.html#gad04c00ef18b154d71d41826d30ceec08">ur_get_name</a>(tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i])) + 2;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">if</span> (act_len &gt;= len) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;         len *= 2;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         str_new = (<span class="keywordtype">char</span> *) realloc(str, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * len);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;         <span class="keywordflow">if</span> (str_new == NULL) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(str);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;         }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;         strmove = str_new + (strmove - str);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;         str = str_new;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      sprintf(strmove, <span class="stringliteral">&quot;%s %s%c&quot;</span>, <a class="code" href="unirec_8c.html#a2a84dc8eb5478757192b2df4004c148a">ur_field_type_str</a>[<a class="code" href="group__urtemplate.html#gae46ff3befebabc8c83372030a98df592">ur_get_type</a>(tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i])], <a class="code" href="group__urtemplate.html#gad04c00ef18b154d71d41826d30ceec08">ur_get_name</a>(tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i]), delimiter);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      strmove += strlen(strmove);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a> != 0) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      strmove[-1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keywordflow">return</span> str;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga98890a8d9702c533d4d1d1e7921f74e6">  223</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#ga98890a8d9702c533d4d1d1e7921f74e6">ur_get_empty_id</a>()</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   ur_field_id_linked_list_t * first;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="comment">//check if UniRec is initialized, if not initialize it</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a2049527f65320075c1e5e3bb9c9aff15">intialized</a> != <a class="code" href="unirec_8h.html#a1c3c1c127c05a89b0e87197d022e7107">UR_INITIALIZED</a>) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordtype">int</span> init_val = <a class="code" href="group__urtemplate.html#ga238d68dc4d1dc5b0369e907b0e2d9711">ur_init</a>(UR_FIELD_SPECS_STATIC);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span> (init_val != <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;         <span class="keywordflow">return</span> init_val;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <span class="comment">//check undefined fields</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a> != NULL) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">//resuse old undefined fields</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordtype">int</span> id;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      first = ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a> = ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a>-&gt;next;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordtype">id</span> = first-&gt;id;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(first);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">return</span> id;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="comment">//take new id</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a> &lt; ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a>) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;         <span class="comment">//take value from remaining space</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;         <span class="keywordflow">return</span> ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a>++;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a> &lt; <a class="code" href="unirec_8h.html#aac640f7c39c04cb3b3ca150da6e46454">UR_FIELD_ID_MAX</a>) {</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;         <span class="comment">//increase space for fields</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         <span class="keywordtype">int</span> new_size;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;         <span class="keywordtype">char</span> **ur_field_names_new;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;         <span class="keywordtype">short</span> *ur_field_sizes_new;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030">ur_field_type_t</a> *ur_field_types_new;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;         new_size = ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a> * 2 &lt; <a class="code" href="unirec_8h.html#aac640f7c39c04cb3b3ca150da6e46454">UR_FIELD_ID_MAX</a> ? ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a> * 2 : <a class="code" href="unirec_8h.html#aac640f7c39c04cb3b3ca150da6e46454">UR_FIELD_ID_MAX</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;         <span class="comment">//copy field type</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;         ur_field_types_new = (<a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030">ur_field_type_t</a> *) realloc(ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a>, <span class="keyword">sizeof</span>(<a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030">ur_field_type_t</a>) * new_size);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;         <span class="keywordflow">if</span> (ur_field_types_new == NULL) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;         }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <span class="comment">//copy field sizes</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;         ur_field_sizes_new = (<span class="keywordtype">short</span> *) realloc(ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">short</span>) * new_size);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         <span class="keywordflow">if</span> (ur_field_sizes_new == NULL) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_types_new);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;         <span class="comment">//copy field names</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;         ur_field_names_new = (<span class="keywordtype">char</span> **) realloc(ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span> *) * new_size);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;         <span class="keywordflow">if</span> (ur_field_names_new == NULL) {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_types_new);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_sizes_new);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;         }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;         <span class="comment">//replace for new values</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;         ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a> = ur_field_names_new;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;         ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a> = ur_field_sizes_new;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a> = ur_field_types_new;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a> = new_size;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;         <span class="keywordflow">return</span> ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a>++;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;         <span class="comment">//no more space for new fields</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="unirec_8c.html#ae511d9e52485818f2513fe5f2e1d564c">  290</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="unirec_8c.html#ae511d9e52485818f2513fe5f2e1d564c">ur_get_field_type_from_str</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *type)</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;{</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="keywordflow">if</span> (type == NULL) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#ab7dca2db4854ed9db6ffff65d4d9d10a">UR_E_INVALID_TYPE</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="unirec_8h.html#a9d12294a70c27484f1f273d14c2231a1">UR_COUNT_OF_TYPES</a>; i++) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keywordflow">if</span> (strcmp(type, <a class="code" href="unirec_8c.html#a2a84dc8eb5478757192b2df4004c148a">ur_field_type_str</a>[i]) == 0) {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#ab7dca2db4854ed9db6ffff65d4d9d10a">UR_E_INVALID_TYPE</a>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="unirec_8c.html#a1dad0e5a16c5828870041e64270e1943">  303</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="unirec_8c.html#a1dad0e5a16c5828870041e64270e1943">ur_get_type_and_name_from_string</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *source, <span class="keywordtype">char</span> **name, <span class="keywordtype">char</span> **type, <span class="keywordtype">int</span> *length_name, <span class="keywordtype">int</span> *length_type)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keywordtype">int</span> length_type_2 = 0, length_name_2 = 0;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *source_cpy;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="comment">/* skip white spaces */</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="keywordflow">while</span> (*source != 0 &amp;&amp; isspace(*source)) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      source++;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="comment">/* start of type */</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   source_cpy = source;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">while</span> (*source != 0 &amp;&amp; !isspace(*source)) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      length_type_2++;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      source++;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="comment">/* end of type */</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="comment">/* copy &quot;type&quot; string (realloc destination if needed) */</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">if</span> (length_type_2 &gt;= *length_type) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span> (*type != NULL) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(*type);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      *type = (<span class="keywordtype">char</span> *) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (length_type_2 + 1));</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">if</span> (*type == NULL) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;         <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      *length_type = length_type_2 + 1;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(*type, source_cpy, length_type_2);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   (*type)[length_type_2] = 0;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="comment">/* skip white spaces */</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">while</span> (*source != 0 &amp;&amp; isspace(*source)) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      source++;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="comment">/* start of name */</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   source_cpy = source;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="keywordflow">while</span> (*source != 0 &amp;&amp; !isspace(*source) &amp;&amp; *source != <span class="charliteral">&#39;,&#39;</span>) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      length_name_2++;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      source++;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="comment">/* end of name */</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="comment">/* copy &quot;name&quot; string (realloc destination if needed) */</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordflow">if</span> (length_name_2 &gt;= *length_name) {</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">if</span> (*name != NULL) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(*name);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      *name = (<span class="keywordtype">char</span> *) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (length_name_2 + 1));</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">if</span> (*name == NULL) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;         <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      *length_name = length_name_2 + 1;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(*name, source_cpy, length_name_2);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   (*name)[length_name_2] = 0;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="comment">/* skip white spaces */</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">while</span> (*source != 0 &amp;&amp; isspace(*source)) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      source++;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="comment">/* skip comma */</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keywordflow">if</span> (*source == <span class="charliteral">&#39;,&#39;</span>) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      source++;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <span class="keywordflow">return</span> source;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga31d468a710c302abfc212784c99ef889">  369</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="group__urtemplate.html#ga31d468a710c302abfc212784c99ef889">ur_ifc_data_fmt_to_field_names</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *ifc_data_fmt)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *source_cpy = NULL, *p = ifc_data_fmt;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <span class="keywordtype">char</span> *out_str;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordtype">int</span> name_len = 0, act_len = 0, str_len;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   str_len = strlen(ifc_data_fmt);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   out_str = (<span class="keywordtype">char</span> *) calloc(str_len + 1, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">if</span> (out_str == NULL) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <span class="keywordflow">while</span> (*p != 0) {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="comment">/* skip white spaces */</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">while</span> (*p != 0 &amp;&amp; isspace(*p)) {</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;         p++;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="comment">/* field type */</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">while</span> (*p != 0 &amp;&amp; *p != <span class="charliteral">&#39; &#39;</span>) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;         p++;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="comment">/* skip white spaces */</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">while</span> (*p != 0 &amp;&amp; isspace(*p)) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         p++;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      }</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="comment">//copy name</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      source_cpy = p;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      name_len = 0;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">while</span> (*p != 0 &amp;&amp; *p != <span class="charliteral">&#39;,&#39;</span> &amp;&amp; !isspace(*p)) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;         name_len++;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;         p++;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      assert(name_len + act_len + 1 &lt;= str_len);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(out_str + act_len, source_cpy, name_len);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      act_len += name_len;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="comment">/* skip white spaces */</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">while</span> (*p != 0 &amp;&amp; isspace(*p)) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;         p++;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      }</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;         p++;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*p == 0) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(out_str);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;         <span class="keywordflow">return</span> NULL; <span class="comment">/* name must be followed by a comma or end of string */</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      out_str[act_len] = <span class="charliteral">&#39;,&#39;</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      act_len++;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keywordflow">return</span> out_str;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gac2b52aaae2bd3aa7d38b119a95a275e9">  421</a></span>&#160;<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *<a class="code" href="group__urtemplate.html#gac2b52aaae2bd3aa7d38b119a95a275e9">ur_expand_template</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *ifc_data_fmt, <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt)</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <span class="keywordtype">int</span> name_len = 0, act_len = 0, concat_str_len = strlen(ifc_data_fmt);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordtype">char</span> *concat_str;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *source_cpy, *p = ifc_data_fmt;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4ae">ur_tmplt_direction</a> direction = <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aea9807b1695bbfc8402e79d493d37ca434">UR_TMPLT_DIRECTION_NO</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   uint32_t ifc_out = 0;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   concat_str = (<span class="keywordtype">char</span> *) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * concat_str_len);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">if</span> (concat_str == NULL) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keywordflow">while</span> (*p != 0) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">while</span> (*p != 0 &amp;&amp; !isspace(*p)) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;         p++;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      p++;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="comment">//copy name</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      source_cpy = p;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      name_len = 0;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">while</span> (*p != 0 &amp;&amp; *p != <span class="charliteral">&#39;,&#39;</span>) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;         name_len++;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         p++;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">if</span> (name_len + act_len + 1 &gt; concat_str_len) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;         <span class="keywordtype">char</span> *str_new;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;         str_new = (<span class="keywordtype">char</span> *) realloc(concat_str, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (concat_str_len * 2));</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;         <span class="keywordflow">if</span> (str_new == NULL) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="comment">/* XXX memory leak original concat_str? */</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;         concat_str_len *= 2;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;         concat_str = str_new;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(concat_str + act_len, source_cpy, name_len);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      act_len += name_len;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      concat_str[act_len] = <span class="charliteral">&#39;,&#39;</span>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      act_len++;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordflow">if</span> (tmplt != NULL) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      direction = tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      ifc_out = tmplt-&gt;<a class="code" href="unirec_8h.html#a547b0de3d97d62b5415ebcc371e87a19">ifc_out</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tmplt-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a>; i++) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *f_name = <a class="code" href="group__urtemplate.html#gad04c00ef18b154d71d41826d30ceec08">ur_get_name</a>(tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i]);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;         name_len = strlen(f_name);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;         <span class="keywordflow">if</span> (name_len + act_len + 1 &gt; concat_str_len) {</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordtype">char</span> *str_new;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            str_new = (<span class="keywordtype">char</span> *) realloc(concat_str, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * (concat_str_len * 2));</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span> (str_new == NULL) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;               <span class="comment">/* XXX memory leak original concat_str? */</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;               <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            concat_str_len *= 2;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            concat_str = str_new;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;         }</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;         <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(concat_str + act_len, f_name, name_len);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;         act_len += name_len;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         *(concat_str + act_len) = <span class="charliteral">&#39;,&#39;</span>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;         act_len++;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      }</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="group__urtemplate.html#ga6bfac2d2161cf28551a467a382feda7e">ur_free_template</a>(tmplt);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keywordflow">if</span> (act_len &gt; 0) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      act_len--;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      concat_str[act_len] = 0;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   tmplt = <a class="code" href="group__urtemplate.html#gaec94dfdd45a6af36f412cc06f9b0106d">ur_create_template</a>(concat_str, NULL);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> = direction;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a547b0de3d97d62b5415ebcc371e87a19">ifc_out</a> = ifc_out;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(concat_str);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <span class="keywordflow">return</span> tmplt;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gadc5a6441796f8df8c63645298170f8f4">  493</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gadc5a6441796f8df8c63645298170f8f4">ur_define_set_of_fields</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *ifc_data_fmt)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *new_fields_move;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   new_fields_move = ifc_data_fmt;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordtype">char</span> *field_name, *field_type;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <span class="keywordtype">int</span> field_name_length = <a class="code" href="unirec_8h.html#a4821db36ecbefac234e93423e1572d8b">UR_DEFAULT_LENGTH_OF_FIELD_NAME</a>, field_type_length = <a class="code" href="unirec_8h.html#a19c4a8e87b02d9f08120d80ee99d377d">UR_DEFAULT_LENGTH_OF_FIELD_TYPE</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordtype">int</span> field_id = 0, field_type_id = 0;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   field_name = (<span class="keywordtype">char</span> *) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * field_name_length);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordflow">if</span> (field_name == NULL) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   field_type = (<span class="keywordtype">char</span> *) malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * field_type_length);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <span class="keywordflow">if</span> (field_type == NULL) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_name);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">while</span> (*new_fields_move != 0) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      new_fields_move = <a class="code" href="unirec_8c.html#a1dad0e5a16c5828870041e64270e1943">ur_get_type_and_name_from_string</a>(new_fields_move, &amp;field_name, &amp;field_type, &amp;field_name_length, &amp;field_type_length);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">if</span> (new_fields_move == NULL) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;         <span class="keywordflow">if</span> (field_name != NULL) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_name);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;         }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;         <span class="keywordflow">if</span> (field_type != NULL) {</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_type);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;         }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      }</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="comment">//through all fields of receiver</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      field_type_id = <a class="code" href="unirec_8c.html#ae511d9e52485818f2513fe5f2e1d564c">ur_get_field_type_from_str</a>(field_type);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">if</span> (field_type_id &lt; 0) {</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;         <span class="keywordflow">if</span> (field_name != NULL) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_name);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;         }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_type);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;         <span class="keywordflow">return</span> field_type_id;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      field_id = <a class="code" href="group__urtemplate.html#gae9296343268e2117e4f53705c0cdf3a5">ur_define_field</a>(field_name, field_type_id);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">if</span> (field_id &lt; 0) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;         <span class="keywordflow">if</span> (field_name != NULL) {</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_name);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;         }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_type);</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;         <span class="keywordflow">return</span> field_id;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   }</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keywordflow">if</span> (field_name != NULL) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_name);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_type);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;}</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga4b090390e3e2728d2d59168eb532633a">  545</a></span>&#160;<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *<a class="code" href="group__urtemplate.html#ga4b090390e3e2728d2d59168eb532633a">ur_define_fields_and_update_template</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *ifc_data_fmt, <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt)</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;{</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *new_tmplt;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="group__urtemplate.html#gadc5a6441796f8df8c63645298170f8f4">ur_define_set_of_fields</a>(ifc_data_fmt) &lt; 0) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   new_tmplt = <a class="code" href="group__urtemplate.html#gae1a76a48d18a09ee2f32ed638bbcbcf7">ur_create_template_from_ifc_spec</a>(ifc_data_fmt);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keywordflow">if</span> (new_tmplt != NULL &amp;&amp; tmplt != NULL) {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      new_tmplt-&gt;<a class="code" href="unirec_8h.html#a547b0de3d97d62b5415ebcc371e87a19">ifc_out</a> = tmplt-&gt;<a class="code" href="unirec_8h.html#a547b0de3d97d62b5415ebcc371e87a19">ifc_out</a>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      new_tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> = tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <a class="code" href="group__urtemplate.html#ga6bfac2d2161cf28551a467a382feda7e">ur_free_template</a>(tmplt);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">return</span> new_tmplt;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;}</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gae1a76a48d18a09ee2f32ed638bbcbcf7">  560</a></span>&#160;<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *<a class="code" href="group__urtemplate.html#gae1a76a48d18a09ee2f32ed638bbcbcf7">ur_create_template_from_ifc_spec</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *ifc_data_fmt)</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;{</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <span class="keywordtype">char</span> *field_names = <a class="code" href="group__urtemplate.html#ga31d468a710c302abfc212784c99ef889">ur_ifc_data_fmt_to_field_names</a>(ifc_data_fmt);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">if</span> (field_names == NULL) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *new_tmplt = <a class="code" href="group__urtemplate.html#gaec94dfdd45a6af36f412cc06f9b0106d">ur_create_template</a>(field_names, NULL);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(field_names);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">return</span> new_tmplt;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;}</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gae9296343268e2117e4f53705c0cdf3a5">  571</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gae9296343268e2117e4f53705c0cdf3a5">ur_define_field</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030">ur_field_type_t</a> type)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;{</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keywordtype">int</span> insert_id;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordtype">char</span> * name_copy;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordtype">int</span> name_len;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">if</span> (name == NULL) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a3286791b4d19706d580fb5dbf07ed5f4">UR_E_INVALID_NAME</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   }</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="comment">//check the regural expression of a name</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   name_len = strlen(name);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">if</span> (name_len == 0) {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a3286791b4d19706d580fb5dbf07ed5f4">UR_E_INVALID_NAME</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">if</span> (!((name[0] &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; name[0] &lt;= <span class="charliteral">&#39;Z&#39;</span>) || (name[0] &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; name[0] &lt;= <span class="charliteral">&#39;z&#39;</span>))) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a3286791b4d19706d580fb5dbf07ed5f4">UR_E_INVALID_NAME</a>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; name_len; i++) {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keywordflow">if</span> (!((name[i] &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; name[i] &lt;= <span class="charliteral">&#39;Z&#39;</span>) || (name[i] &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; name[i] &lt;= <span class="charliteral">&#39;z&#39;</span>) || (name[i] &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; name[i] &lt;= <span class="charliteral">&#39;9&#39;</span>) || name[i] == <span class="charliteral">&#39;_&#39;</span>)) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a3286791b4d19706d580fb5dbf07ed5f4">UR_E_INVALID_NAME</a>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      }</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <span class="comment">// If this is the first dynamically allocated field, call ur_init</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a> == ur_field_specs.<a class="code" href="unirec_8h.html#a2e28bd09fc5056730e543d023cf0a2da">ur_last_statically_defined_id</a>) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordtype">int</span> init_val = <a class="code" href="group__urtemplate.html#ga238d68dc4d1dc5b0369e907b0e2d9711">ur_init</a>(UR_FIELD_SPECS_STATIC);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">if</span> (init_val != 0) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;         <span class="keywordflow">return</span> init_val;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   <span class="comment">//check if the field is already defined</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a>; i++) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i] != NULL &amp;&amp; strcmp(name, ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i]) == 0) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;         <span class="keywordflow">if</span> (type == ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a>[i]) {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="comment">//name exists and type is equal</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="comment">//name exists, but type is different</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a272389ab0926da72541efdaf1bf9377c">UR_E_TYPE_MISMATCH</a>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;         }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   }</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="comment">//create new field</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   name_copy = (<span class="keywordtype">char</span> *) calloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), strlen(name) + 1);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="keywordflow">if</span> (name_copy == NULL) {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="comment">//error during allocation</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   }</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   strcpy(name_copy, name);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   insert_id = <a class="code" href="group__urtemplate.html#ga98890a8d9702c533d4d1d1e7921f74e6">ur_get_empty_id</a>();</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">if</span> (insert_id &lt; 0) {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">//error</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(name_copy);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">return</span> insert_id;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[insert_id] = name_copy;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a>[insert_id] = <a class="code" href="group__urtemplate.html#gaa88f0c45cc9901eabe9baabb88dc1d68">ur_size_of</a>(type);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a>[insert_id] = type;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keywordflow">return</span> insert_id;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;}</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga0d8940c1aab20e50ab84da99715322fc">  630</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#ga0d8940c1aab20e50ab84da99715322fc">ur_undefine_field_by_id</a>(<a class="code" href="unirec_8h.html#a17cba425af74e590b73d23d4e0fda44a">ur_field_id_t</a> field_id)</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;{</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keywordflow">if</span> (field_id &lt; ur_field_specs.ur_last_statically_defined_id || field_id &gt;= ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a>) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="comment">//id is invalid</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#ab5f672a177d78e7c11abe1922c424b92">UR_E_INVALID_PARAMETER</a>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[field_id] == NULL) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="comment">//ID is already undefined</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#ab5f672a177d78e7c11abe1922c424b92">UR_E_INVALID_PARAMETER</a>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="comment">//undefine field</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      ur_field_id_linked_list_t *undefined_item;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      undefined_item = (ur_field_id_linked_list_t *) calloc(<span class="keyword">sizeof</span>(ur_field_id_linked_list_t), 1);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">if</span> (undefined_item == NULL) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;         <span class="comment">//error during allocation</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[field_id]);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[field_id] = NULL;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      undefined_item-&gt;id = field_id;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      undefined_item-&gt;next = ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a> = undefined_item;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;}</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga3b7d40d098716943f035185d26aeff29">  655</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#ga3b7d40d098716943f035185d26aeff29">ur_undefine_field</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;{</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="comment">//find id of field</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordflow">for</span> (i = ur_field_specs.<a class="code" href="unirec_8h.html#a2e28bd09fc5056730e543d023cf0a2da">ur_last_statically_defined_id</a>; i &lt; ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a>; i++) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i] != NULL &amp;&amp; strcmp(name, ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i]) == 0) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="group__urtemplate.html#ga0d8940c1aab20e50ab84da99715322fc">ur_undefine_field_by_id</a>(i);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <span class="comment">//field with given name was not found</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordflow">return</span>  <a class="code" href="unirec_8h.html#a3286791b4d19706d580fb5dbf07ed5f4">UR_E_INVALID_NAME</a>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga77bb16e4585117517a5d7aabebcb8a0a">  669</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__urtemplate.html#ga77bb16e4585117517a5d7aabebcb8a0a">ur_finalize</a>()</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a2049527f65320075c1e5e3bb9c9aff15">intialized</a> != <a class="code" href="unirec_8h.html#a1c3c1c127c05a89b0e87197d022e7107">UR_INITIALIZED</a>) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="comment">//there is no need for deallocation, because nothing has been allocated.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a> != NULL) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i &lt; ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a>; i++) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i] != NULL) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[i]);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;         }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a> != NULL) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      ur_field_id_linked_list_t *next, * act_del;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      act_del = ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">while</span> (act_del != NULL) {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         next = act_del-&gt;next;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(act_del);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;         act_del = next;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a> != NULL) {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a>);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a> != NULL) {</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a> = UR_FIELD_SPECS_STATIC.<a class="code" href="unirec_8h.html#a98353be825cf3f1fb16c73e048ea0b74">ur_field_names</a>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_sizes</a> = UR_FIELD_SPECS_STATIC.<a class="code" href="unirec_8h.html#a802e8538253f5509acc14f2da2b225f6">ur_field_sizes</a>;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_types</a> = UR_FIELD_SPECS_STATIC.<a class="code" href="unirec_8h.html#ad5306965acd4764b31d6634a0947e7a2">ur_field_types</a>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a2e28bd09fc5056730e543d023cf0a2da">ur_last_statically_defined_id</a> = UR_FIELD_SPECS_STATIC.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a> = UR_FIELD_SPECS_STATIC.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_allocated_fields</a> = UR_FIELD_SPECS_STATIC.<a class="code" href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_last_id</a>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_undefine_fields</a> = NULL;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   ur_field_specs.<a class="code" href="unirec_8h.html#a2049527f65320075c1e5e3bb9c9aff15">intialized</a> = <a class="code" href="unirec_8h.html#a09399c945b0bccbf812eac654e23ca3b">UR_UNINITIALIZED</a>;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;}</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="comment">// Find field ID given its name</span></div><div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gae04af6d1916490e641f7640e440a8e7c">  709</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gae04af6d1916490e641f7640e440a8e7c">ur_get_id_by_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;{</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0; <span class="keywordtype">id</span> &lt; ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a>; <span class="keywordtype">id</span>++) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">if</span> (ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[<span class="keywordtype">id</span>] != NULL &amp;&amp; strcmp(name, ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[<span class="keywordtype">id</span>]) == 0) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;         <span class="keywordflow">return</span> id;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a3286791b4d19706d580fb5dbf07ed5f4">UR_E_INVALID_NAME</a>;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">// Return -1 if f1 should go before f2, 0 if f1 is the same as f2, 1 otherwise</span></div><div class="line"><a name="l00720"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gaf893df4c0a8d17cae3f8999e9bcce312">  720</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gaf893df4c0a8d17cae3f8999e9bcce312">compare_fields</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *field1, <span class="keyword">const</span> <span class="keywordtype">void</span> *field2)</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;{</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="keyword">const</span> <a class="code" href="unirec_8h.html#structfield__spec__t">field_spec_t</a> *f1 = field1;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="keyword">const</span> <a class="code" href="unirec_8h.html#structfield__spec__t">field_spec_t</a> *f2 = field2;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">if</span> (f1-&gt;<a class="code" href="unirec_8h.html#a20d9d5eb643e04cdb13a84195993ef92">size</a> &gt; f2-&gt;<a class="code" href="unirec_8h.html#a20d9d5eb643e04cdb13a84195993ef92">size</a>) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f1-&gt;<a class="code" href="unirec_8h.html#a20d9d5eb643e04cdb13a84195993ef92">size</a> &lt; f2-&gt;<a class="code" href="unirec_8h.html#a20d9d5eb643e04cdb13a84195993ef92">size</a>) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="keywordflow">return</span> strcmp(f1-&gt;<a class="code" href="unirec_8h.html#a3b5886d926b0a4ae0959eaf4aba18201">name</a>, f2-&gt;<a class="code" href="unirec_8h.html#a3b5886d926b0a4ae0959eaf4aba18201">name</a>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gabc843c9ffe0367e0e2d40bbf4f3c6053">  733</a></span>&#160;<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *<a class="code" href="group__urtemplate.html#gabc843c9ffe0367e0e2d40bbf4f3c6053">ur_ctx_create_input_template</a>(trap_ctx_t *ctx, <span class="keywordtype">int</span> ifc, <span class="keyword">const</span> <span class="keywordtype">char</span> *fields, <span class="keywordtype">char</span> **errstr)</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;{</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt = <a class="code" href="group__urtemplate.html#gaec94dfdd45a6af36f412cc06f9b0106d">ur_create_template</a>(fields, errstr);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="keywordflow">if</span> (tmplt == NULL) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="group__urtemplate.html#gaa21b5e95ade1d2d6993fcf9f9a6c4548">ur_ctx_set_input_template</a>(ctx, ifc, tmplt) != <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;         *errstr = (<span class="keywordtype">char</span> *) malloc(strlen(<a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>) + 1);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            strcpy(*errstr, <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;         }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <a class="code" href="group__urtemplate.html#ga6bfac2d2161cf28551a467a382feda7e">ur_free_template</a>(tmplt);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keywordflow">return</span> tmplt;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gab80b3d4a916e0657f57062c9477d5bd0">  752</a></span>&#160;<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *<a class="code" href="group__urtemplate.html#gab80b3d4a916e0657f57062c9477d5bd0">ur_ctx_create_output_template</a>(trap_ctx_t *ctx, <span class="keywordtype">int</span> ifc, <span class="keyword">const</span> <span class="keywordtype">char</span> *fields, <span class="keywordtype">char</span> **errstr)</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;{</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt = <a class="code" href="group__urtemplate.html#gaec94dfdd45a6af36f412cc06f9b0106d">ur_create_template</a>(fields, errstr);</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="keywordflow">if</span> (tmplt == NULL) {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="group__urtemplate.html#gaa27853144707572d1e6a5e0f0a37edae">ur_ctx_set_output_template</a>(ctx, ifc, tmplt) != <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         *errstr = (<span class="keywordtype">char</span> *) malloc(strlen(<a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>) + 1);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;         <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            strcpy(*errstr, <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;         }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      }</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <a class="code" href="group__urtemplate.html#ga6bfac2d2161cf28551a467a382feda7e">ur_free_template</a>(tmplt);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keywordflow">return</span> tmplt;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;}</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gaa27853144707572d1e6a5e0f0a37edae">  771</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gaa27853144707572d1e6a5e0f0a37edae">ur_ctx_set_output_template</a>(trap_ctx_t *ctx, <span class="keywordtype">int</span> ifc, <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt)</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;{</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <span class="keywordflow">if</span> (tmplt == NULL) {</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> == <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aea3c0e3d8b88bb1a4e7bbe44878ee16840">UR_TMPLT_DIRECTION_IN</a>) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> = <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aead92326143d975004bacb08640930fead">UR_TMPLT_DIRECTION_BI</a>;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> = <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aeac22b0048de587bc9d53bf5f4bf3dade6">UR_TMPLT_DIRECTION_OUT</a>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a547b0de3d97d62b5415ebcc371e87a19">ifc_out</a> = ifc;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="keywordtype">char</span> * tmplt_str = <a class="code" href="group__urtemplate.html#ga7c3f3afcdfe5ad24f148ec9231b6e799">ur_template_string</a>(tmplt);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="keywordflow">if</span> (tmplt_str == NULL) {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   trap_ctx_set_data_fmt(ctx, ifc, TRAP_FMT_UNIREC, tmplt_str);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(tmplt_str);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;}</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div><div class="line"><a name="l00791"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gaa21b5e95ade1d2d6993fcf9f9a6c4548">  791</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gaa21b5e95ade1d2d6993fcf9f9a6c4548">ur_ctx_set_input_template</a>(trap_ctx_t *ctx, <span class="keywordtype">int</span> ifc, <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt)</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;{</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="keywordflow">if</span> (tmplt == NULL) {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> == <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aeac22b0048de587bc9d53bf5f4bf3dade6">UR_TMPLT_DIRECTION_OUT</a>) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> = <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aead92326143d975004bacb08640930fead">UR_TMPLT_DIRECTION_BI</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> = <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aea3c0e3d8b88bb1a4e7bbe44878ee16840">UR_TMPLT_DIRECTION_IN</a>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keywordtype">char</span> * tmplt_str = <a class="code" href="group__urtemplate.html#ga7c3f3afcdfe5ad24f148ec9231b6e799">ur_template_string</a>(tmplt);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <span class="keywordflow">if</span> (tmplt_str == NULL) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   trap_ctx_set_required_fmt(ctx, ifc, TRAP_FMT_UNIREC, tmplt_str);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(tmplt_str);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga5ac83d4ba9ab47e065f7847272beac67">  810</a></span>&#160;<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *<a class="code" href="group__urtemplate.html#ga5ac83d4ba9ab47e065f7847272beac67">ur_ctx_create_bidirectional_template</a>(trap_ctx_t *ctx, <span class="keywordtype">int</span> ifc_in, <span class="keywordtype">int</span> ifc_out, <span class="keyword">const</span> <span class="keywordtype">char</span> *fields, <span class="keywordtype">char</span> **errstr)</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;{</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt = <a class="code" href="group__urtemplate.html#gaec94dfdd45a6af36f412cc06f9b0106d">ur_create_template</a>(fields, errstr);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keywordflow">if</span> (tmplt == NULL) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> = <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aead92326143d975004bacb08640930fead">UR_TMPLT_DIRECTION_BI</a>;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a547b0de3d97d62b5415ebcc371e87a19">ifc_out</a> = ifc_out;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordtype">char</span> * tmplt_str = <a class="code" href="group__urtemplate.html#ga7c3f3afcdfe5ad24f148ec9231b6e799">ur_template_string</a>(tmplt);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keywordflow">if</span> (tmplt_str == NULL) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;         *errstr = (<span class="keywordtype">char</span> *) malloc(strlen(<a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>) + 1);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;         <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            strcpy(*errstr, <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;         }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <a class="code" href="group__urtemplate.html#ga6bfac2d2161cf28551a467a382feda7e">ur_free_template</a>(tmplt);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   }</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   trap_ctx_set_required_fmt(ctx, ifc_in, TRAP_FMT_UNIREC, tmplt_str);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   trap_ctx_set_data_fmt(ctx, ifc_out, TRAP_FMT_UNIREC, tmplt_str);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(tmplt_str);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keywordflow">return</span> tmplt;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gaec94dfdd45a6af36f412cc06f9b0106d">  835</a></span>&#160;<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *<a class="code" href="group__urtemplate.html#gaec94dfdd45a6af36f412cc06f9b0106d">ur_create_template</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fields, <span class="keywordtype">char</span> **errstr)</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;{</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   <span class="comment">// Count number of fields</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   <span class="keywordtype">int</span> n_fields = 0, written_fields = 0;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keywordflow">if</span> (fields) {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="comment">/* skip leading spaces */</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">while</span> (*fields != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; isspace(*fields)) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;         fields++;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="comment">/* Count number of fields */</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">if</span> (*fields != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;         n_fields = 1;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *tmp = fields;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;         <span class="keywordflow">while</span> (*tmp != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <span class="keywordflow">if</span> (*(tmp++) == <span class="charliteral">&#39;,&#39;</span>) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;               n_fields++;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;         }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   }</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="comment">// Allocate array of field_spec structs</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   <a class="code" href="unirec_8h.html#structfield__spec__t">field_spec_t</a> *fields_spec = malloc(n_fields * <span class="keyword">sizeof</span>(<a class="code" href="unirec_8h.html#structfield__spec__t">field_spec_t</a>));</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keywordflow">if</span> (fields_spec == NULL &amp;&amp; n_fields &gt; 0) {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;         *errstr = (<span class="keywordtype">char</span> *) malloc(strlen(<a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>) + 1);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;         <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            strcpy(*errstr, <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;         }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      }</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <span class="comment">// Parse fields and fill the array</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *start_ptr = fields;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *end_ptr;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n_fields; i++) {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="comment">// Get field name</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      end_ptr = start_ptr;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="comment">/* go to the first space / comma / end-of-string */</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <span class="keywordflow">while</span> (!isspace(*end_ptr) &amp;&amp; *end_ptr != <span class="charliteral">&#39;,&#39;</span> &amp;&amp; *end_ptr != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;         end_ptr++;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="keywordtype">int</span> len = end_ptr - start_ptr;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      fields_spec[written_fields].<a class="code" href="unirec_8h.html#a3b5886d926b0a4ae0959eaf4aba18201">name</a> = malloc(len + 1);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keywordflow">if</span> (fields_spec[written_fields].name == NULL) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            *errstr = (<span class="keywordtype">char</span> *) malloc(strlen(<a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>) + 1);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;               strcpy(*errstr, <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            }</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;         }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; i; j++) {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec[j].name);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         }</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;         <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(fields_spec[written_fields].name, start_ptr, len);</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      fields_spec[written_fields].<a class="code" href="unirec_8h.html#a3b5886d926b0a4ae0959eaf4aba18201">name</a>[len] = 0;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      start_ptr = end_ptr;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">while</span> ((isspace(*start_ptr) || *start_ptr == <span class="charliteral">&#39;,&#39;</span>) &amp;&amp; *start_ptr != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;         start_ptr++;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="comment">// Get field ID</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordtype">int</span> id_by_name = <a class="code" href="group__urtemplate.html#gae04af6d1916490e641f7640e440a8e7c">ur_get_id_by_name</a>(fields_spec[written_fields].name);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <span class="keywordflow">if</span> (id_by_name == <a class="code" href="unirec_8h.html#a3286791b4d19706d580fb5dbf07ed5f4">UR_E_INVALID_NAME</a>) {</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;         <span class="comment">// Unknown field name</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;         <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            *errstr = (<span class="keywordtype">char</span> *) malloc(100);</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;               <span class="keywordtype">int</span> n;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;               n = snprintf(*errstr, 100, <span class="stringliteral">&quot;field: %s is not defined.&quot;</span>, fields_spec[written_fields].name);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;               <span class="keywordflow">if</span> (n &gt;= 100) {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                  strcpy(*errstr, <span class="stringliteral">&quot;given field is not defined&quot;</span>);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;               }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;         }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt;= written_fields; j++) {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec[j].name);</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;         }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;         <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="comment">//check if the field is not in the template.</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordtype">int</span> in_the_template = 0;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; written_fields; j++) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;         <span class="keywordflow">if</span> (fields_spec[j].<span class="keywordtype">id</span> == id_by_name) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;            in_the_template = 1;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;         }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="comment">//if the field is not already int the template, copy values and move the index, otherwise just free the string with name.</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="keywordflow">if</span> (in_the_template == 0) {</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;         fields_spec[written_fields].<a class="code" href="unirec_8h.html#a7d8bca7d65ccb7dfeaad247f43100789">id</a> = id_by_name;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         <span class="comment">// Get field size</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;         fields_spec[written_fields].<a class="code" href="unirec_8h.html#a20d9d5eb643e04cdb13a84195993ef92">size</a> = <a class="code" href="group__urtemplate.html#ga770ecf70233ae337f3aa4af9540a11ba">ur_get_size</a>(fields_spec[written_fields].<span class="keywordtype">id</span>);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;         written_fields++;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec[written_fields].name);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;         fields_spec[written_fields].<a class="code" href="unirec_8h.html#a3b5886d926b0a4ae0959eaf4aba18201">name</a> = NULL;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="comment">// Sort fields according to UniRec specification (by size and names)</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   <span class="keywordflow">if</span> (n_fields &gt; 0) {</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      qsort(fields_spec, written_fields, <span class="keyword">sizeof</span>(<a class="code" href="unirec_8h.html#structfield__spec__t">field_spec_t</a>), <a class="code" href="group__urtemplate.html#gaf893df4c0a8d17cae3f8999e9bcce312">compare_fields</a>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   }</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <span class="comment">// Allocate memory for the template</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt = (<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *) calloc(<span class="keyword">sizeof</span>(<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a>), 1);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <span class="keywordflow">if</span> (tmplt == NULL) {</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; written_fields; i++) {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec[i].name);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      }</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;         *errstr = (<span class="keywordtype">char</span> *) malloc(strlen(<a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>) + 1);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;         <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            strcpy(*errstr, <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;         }</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      }</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <span class="comment">//set no direction to the template</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">direction</a> = <a class="code" href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aea9807b1695bbfc8402e79d493d37ca434">UR_TMPLT_DIRECTION_NO</a>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   <span class="comment">//allocate memory for offset table</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#ae3458bcec0d7af5a00cfdb528f4f36b7">offset_size</a> = ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a>;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a> = malloc(ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a> * <span class="keyword">sizeof</span>(uint16_t));</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a> == NULL) {</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; written_fields; i++) {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec[i].name);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      }</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(tmplt);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;         *errstr = (<span class="keywordtype">char</span> *) malloc(strlen(<a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>) + 1);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;         <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            strcpy(*errstr, <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;         }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <span class="comment">// Set all fields to invalid offset</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   memset(tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>, 0xff, ur_field_specs.<a class="code" href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_last_id</a> * <span class="keyword">sizeof</span>(uint16_t));</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   <span class="comment">// Fill offsets of all fields into the table</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   uint16_t offset = 0;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   uint16_t first_dynamic = <a class="code" href="unirec_8h.html#a8b797b7bc9ad2159ef020009f031542a">UR_NO_DYNAMIC_VALUES</a>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; written_fields; i++) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="comment">// Set offset</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">if</span> (fields_spec[i].size &lt; 0) { <span class="comment">// dynamic field</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;         tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>[fields_spec[i].<a class="code" href="unirec_8h.html#a7d8bca7d65ccb7dfeaad247f43100789">id</a>] = offset;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;         offset += 4;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;         <span class="keywordflow">if</span> (first_dynamic == <a class="code" href="unirec_8h.html#a8b797b7bc9ad2159ef020009f031542a">UR_NO_DYNAMIC_VALUES</a>) {</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;            first_dynamic = i;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;         }</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">// static field</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;         tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>[fields_spec[i].<a class="code" href="unirec_8h.html#a7d8bca7d65ccb7dfeaad247f43100789">id</a>] = offset;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;         offset += fields_spec[i].<a class="code" href="unirec_8h.html#a20d9d5eb643e04cdb13a84195993ef92">size</a>;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a3ff58f0882adb970deec7c6f7faa7f7c">first_dynamic</a> = first_dynamic;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a5ec4e8fb6f0bacae7cda7af77f8ef1e2">static_size</a> = offset;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="comment">//save ids to template</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a> = (<a class="code" href="unirec_8h.html#a17cba425af74e590b73d23d4e0fda44a">ur_field_id_t</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="unirec_8h.html#a17cba425af74e590b73d23d4e0fda44a">ur_field_id_t</a>) * written_fields);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a> == NULL) {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; written_fields; i++) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;         <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec[i].name);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(tmplt);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <span class="keywordflow">if</span> (errstr != NULL) {</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;         *errstr = (<span class="keywordtype">char</span> *) malloc(strlen(<a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>) + 1);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;         <span class="keywordflow">if</span> (*errstr != NULL) {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            strcpy(*errstr, <a class="code" href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a>);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;         }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   }</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   tmplt-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a> = written_fields;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; written_fields; i++) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i] = fields_spec[i].<a class="code" href="unirec_8h.html#a7d8bca7d65ccb7dfeaad247f43100789">id</a>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   <span class="comment">// Free array of field specs</span></div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; written_fields; i++) {</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec[i].name);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   }</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(fields_spec);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keywordflow">return</span> tmplt;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga6bfac2d2161cf28551a467a382feda7e"> 1023</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__urtemplate.html#ga6bfac2d2161cf28551a467a382feda7e">ur_free_template</a>(<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <span class="keywordflow">if</span> (tmplt == NULL) {</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="comment">//free offset table</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a> != NULL) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;   <span class="comment">//free ids</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a> != NULL) {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(tmplt);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;}</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">// Compare fields of two templates</span></div><div class="line"><a name="l01039"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gaadde868d2fc5dd09710fddb8e629bb87"> 1039</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gaadde868d2fc5dd09710fddb8e629bb87">ur_template_compare</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmpltA, <span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmpltB)</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;{</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   <span class="keywordflow">if</span> (tmpltA-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a> == tmpltB-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a>) {</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="keywordflow">return</span> memcmp(tmpltA-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>, tmpltB-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>, <span class="keyword">sizeof</span>(uint16_t) * tmpltA-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a>) == 0;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;}</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">// Print template</span></div><div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga10c9d739b4b74b4547099b9095857dff"> 1050</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__urtemplate.html#ga10c9d739b4b74b4547099b9095857dff">ur_print_template</a>(<a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt)</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;{</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   <a class="code" href="example__unirec_8c.html#a31c673502d2deeb8064d17eeab267f87">printf</a>(<span class="stringliteral">&quot;static_size: %hu, first_dynamic: &quot;</span>, tmplt-&gt;<a class="code" href="unirec_8h.html#a5ec4e8fb6f0bacae7cda7af77f8ef1e2">static_size</a>);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   (tmplt-&gt;<a class="code" href="unirec_8h.html#a3ff58f0882adb970deec7c6f7faa7f7c">first_dynamic</a> == <a class="code" href="unirec_8h.html#a8b797b7bc9ad2159ef020009f031542a">UR_NO_DYNAMIC_VALUES</a>) ? (<a class="code" href="example__unirec_8c.html#a31c673502d2deeb8064d17eeab267f87">printf</a>(<span class="stringliteral">&quot;-&quot;</span>)) : (<a class="code" href="example__unirec_8c.html#a31c673502d2deeb8064d17eeab267f87">printf</a>(<span class="stringliteral">&quot;%d&quot;</span>, tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[tmplt-&gt;<a class="code" href="unirec_8h.html#a3ff58f0882adb970deec7c6f7faa7f7c">first_dynamic</a>]));</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   <a class="code" href="example__unirec_8c.html#a31c673502d2deeb8064d17eeab267f87">printf</a>(<span class="stringliteral">&quot;, offsets:\n&quot;</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;          <span class="stringliteral">&quot;ID\t%-30s\toffset\n&quot;</span>,<span class="stringliteral">&quot;name&quot;</span>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tmplt-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a>; i++) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <a class="code" href="example__unirec_8c.html#a31c673502d2deeb8064d17eeab267f87">printf</a>(<span class="stringliteral">&quot;%d\t%-30s\t%6hu\n&quot;</span>, tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i], ur_field_specs.<a class="code" href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_names</a>[tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i]], tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>[tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i]]);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;   }</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="unirec_8c.html#a6c1aeacaf5107408c58188e63406bcd1"> 1061</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="unirec_8c.html#a6c1aeacaf5107408c58188e63406bcd1">ur_var_change_size</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> * tmplt, <span class="keywordtype">void</span> *<a class="code" href="example__unirec_8c.html#ac37164e80df5f86d98247768effab54d">rec</a>, <span class="keywordtype">int</span> field_id, <span class="keywordtype">int</span> new_val_len)</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;{</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="comment">// pointer to field and size of a field</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordtype">char</span> * out_ptr = <a class="code" href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a>(tmplt, rec, field_id);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keywordtype">int</span> old_size_of_field = <a class="code" href="group__urtemplate.html#gacd8ba93602d9f4038e165ce0e7f4a716">ur_get_len</a>(tmplt, rec, field_id);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="comment">//if the size is different, move following fields</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   <span class="keywordflow">if</span> (old_size_of_field != new_val_len) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      uint16_t size = new_val_len;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      uint16_t offset_static = <a class="code" href="group__urtemplate.html#ga6661b319bc4874c2ab67d5d780eeddf2">ur_get_var_offset</a>(tmplt, rec, field_id);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="keywordtype">int</span> index = 0;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="comment">//find index of changed field in record array</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i&lt; tmplt-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a>; i++) {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         <span class="keywordflow">if</span> (field_id == tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i]) {</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;            index = i;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;         }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="comment">//set new offset for dynamic fields which are situated behind changed field</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = index + 1; i &lt; tmplt-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a>; i++) {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;         <a class="code" href="group__urtemplate.html#ga185fb29f27d79c9005e3f01a23953398">ur_set_var_offset</a>(tmplt, rec, tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i], offset_static + size);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;         size += <a class="code" href="group__urtemplate.html#gacd8ba93602d9f4038e165ce0e7f4a716">ur_get_len</a>(tmplt, rec, tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i]);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      memmove(out_ptr + new_val_len, out_ptr + old_size_of_field, size - new_val_len);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <a class="code" href="group__urtemplate.html#gacbb93d997a64d88206be15d99e926326">ur_set_var_len</a>(tmplt, rec, field_id, new_val_len);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gadc58a81c9f7eb5a1ec3ba36d97612068"> 1087</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gadc58a81c9f7eb5a1ec3ba36d97612068">ur_set_var</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> * tmplt, <span class="keywordtype">void</span> *<a class="code" href="example__unirec_8c.html#ac37164e80df5f86d98247768effab54d">rec</a>, <span class="keywordtype">int</span> field_id, <span class="keyword">const</span> <span class="keywordtype">void</span> *val_ptr, <span class="keywordtype">int</span> val_len)</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;{</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>[field_id] == <a class="code" href="unirec_8h.html#a82342fa356ae9d09be33db986f6d2df2">UR_INVALID_OFFSET</a>) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#ae983554dcd55068c660732abb7cc29a9">UR_E_INVALID_FIELD_ID</a>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   }</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <span class="comment">// wrong parameters or template does not contain dynamic fields</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#a3ff58f0882adb970deec7c6f7faa7f7c">first_dynamic</a> == <a class="code" href="unirec_8h.html#a8b797b7bc9ad2159ef020009f031542a">UR_NO_DYNAMIC_VALUES</a> || <a class="code" href="group__urtemplate.html#gaa98993f5da922c40edc2c8adb8a949ad">ur_is_static</a>(field_id)) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#ae983554dcd55068c660732abb7cc29a9">UR_E_INVALID_FIELD_ID</a>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   }</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="comment">// pointer to field and size of a field</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   <span class="keywordtype">char</span> * out_ptr = <a class="code" href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a>(tmplt, rec, field_id);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   <span class="comment">//change size of a variable length field</span></div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <a class="code" href="unirec_8c.html#a6c1aeacaf5107408c58188e63406bcd1">ur_var_change_size</a>(tmplt, rec, field_id, val_len);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <span class="comment">//copy new value</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(out_ptr, val_ptr, val_len);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga1a1a56a89c745a13823db8ef01fcb07b"> 1105</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__urtemplate.html#ga1a1a56a89c745a13823db8ef01fcb07b">ur_clear_varlen</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> * tmplt, <span class="keywordtype">void</span> *<a class="code" href="example__unirec_8c.html#ac37164e80df5f86d98247768effab54d">rec</a>)</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;{</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <span class="comment">//set null offset and length for all dynamic fields</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = tmplt-&gt;<a class="code" href="unirec_8h.html#a3ff58f0882adb970deec7c6f7faa7f7c">first_dynamic</a>; i &lt; tmplt-&gt;count; i++) {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <a class="code" href="group__urtemplate.html#ga185fb29f27d79c9005e3f01a23953398">ur_set_var_offset</a>(tmplt, rec, tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i], 0);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <a class="code" href="group__urtemplate.html#gacbb93d997a64d88206be15d99e926326">ur_set_var_len</a>(tmplt, rec, tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i], 0);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;}</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;</div><div class="line"><a name="l01114"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga52dad8336d06db586dd23820263f5fc2"> 1114</a></span>&#160;uint16_t <a class="code" href="group__urtemplate.html#ga52dad8336d06db586dd23820263f5fc2">ur_rec_varlen_size</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="example__unirec_8c.html#ac37164e80df5f86d98247768effab54d">rec</a>)</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;{</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keywordtype">int</span> size = 0;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = tmplt-&gt;<a class="code" href="unirec_8h.html#a3ff58f0882adb970deec7c6f7faa7f7c">first_dynamic</a>; i &lt; tmplt-&gt;count; i++) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      size += <a class="code" href="group__urtemplate.html#gaa95364028416eca5e5741dee2533e35a">ur_get_var_len</a>(tmplt, rec, tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[i]);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   <span class="keywordflow">return</span> size;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;}</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">// Allocate memory for UniRec record</span></div><div class="line"><a name="l01124"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga7e2d113dfd7629182d2b18c29c408707"> 1124</a></span>&#160;<span class="keywordtype">void</span> *<a class="code" href="group__urtemplate.html#ga7e2d113dfd7629182d2b18c29c408707">ur_create_record</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt, uint16_t max_var_size)</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;{</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = (<span class="keywordtype">unsigned</span> int)tmplt-&gt;<a class="code" href="unirec_8h.html#a5ec4e8fb6f0bacae7cda7af77f8ef1e2">static_size</a> + max_var_size;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   <a class="code" href="example__unirec_8c.html#afed200b0ec3ad3a8783e01d8eea873ee">if</a> (size &gt; 0xffff)</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      size = 0xffff;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">void</span> *) calloc(size, 1);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;}</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">// Free UniRec record</span></div><div class="line"><a name="l01133"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gaf622ee72f07d52a617a22be35088d77e"> 1133</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__urtemplate.html#gaf622ee72f07d52a617a22be35088d77e">ur_free_record</a>(<span class="keywordtype">void</span> *record)</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;{</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(record);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;}</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment">// Get dynamic field as C string (allocate, copy and append &#39;\0&#39;)</span></div><div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga8b5745a7f8f493f0ccd9a2099e191efd"> 1139</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="group__urtemplate.html#ga8b5745a7f8f493f0ccd9a2099e191efd">ur_get_var_as_str</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="example__unirec_8c.html#ac37164e80df5f86d98247768effab54d">rec</a>, <a class="code" href="unirec_8h.html#a17cba425af74e590b73d23d4e0fda44a">ur_field_id_t</a> field_id)</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;{</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   uint16_t size = <a class="code" href="group__urtemplate.html#gaa95364028416eca5e5741dee2533e35a">ur_get_var_len</a>(tmplt, rec, field_id);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <span class="keywordtype">char</span> *str = malloc(size + 1);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="keywordflow">if</span> (str == NULL)</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="keywordflow">if</span> (size &gt; 0) {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *p = <a class="code" href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a>(tmplt, rec, field_id);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(str, p, size);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   str[size] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <span class="keywordflow">return</span> str;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;</div><div class="line"><a name="l01153"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gab57dab204aa7abf9f0dbde89f0ee408d"> 1153</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> *<a class="code" href="group__urtemplate.html#gab57dab204aa7abf9f0dbde89f0ee408d">ur_clone_record</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt, <span class="keyword">const</span> <span class="keywordtype">void</span> *src)</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;{</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    uint16_t varsize = <a class="code" href="group__urtemplate.html#ga52dad8336d06db586dd23820263f5fc2">ur_rec_varlen_size</a>(tmplt, src);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordtype">void</span> *copy = <a class="code" href="group__urtemplate.html#ga7e2d113dfd7629182d2b18c29c408707">ur_create_record</a>(tmplt, varsize);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">if</span> (copy) {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;       <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(copy, src, <a class="code" href="group__urtemplate.html#ga17d837166e63b47a453f56f00541b0d8">ur_rec_fixlen_size</a>(tmplt) + varsize);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">return</span> copy;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;}</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gade89057b16556ff28d540a1f0473ab81"> 1163</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__urtemplate.html#gade89057b16556ff28d540a1f0473ab81">ur_copy_fields</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *dst_tmplt, <span class="keywordtype">void</span> *dst, <span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *src_tmplt, <span class="keyword">const</span> <span class="keywordtype">void</span> *src)</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;{</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <span class="keywordtype">int</span> size_of_field = 0;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   <span class="keywordtype">void</span> * ptr_dst = NULL;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   <span class="keywordtype">void</span> * ptr_src = NULL;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   uint16_t size = src_tmplt-&gt;<a class="code" href="unirec_8h.html#ae3458bcec0d7af5a00cfdb528f4f36b7">offset_size</a> &lt; dst_tmplt-&gt;<a class="code" href="unirec_8h.html#ae3458bcec0d7af5a00cfdb528f4f36b7">offset_size</a> ? src_tmplt-&gt;<a class="code" href="unirec_8h.html#ae3458bcec0d7af5a00cfdb528f4f36b7">offset_size</a> : dst_tmplt-&gt;<a class="code" href="unirec_8h.html#ae3458bcec0d7af5a00cfdb528f4f36b7">offset_size</a>;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="comment">//Fields with same template can be copied by fully by memcpy</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <span class="keywordflow">if</span> (src_tmplt == dst_tmplt) {</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(dst, src, <a class="code" href="group__urtemplate.html#ga73f11893596046e5871fc3d520ccc39e">ur_rec_size</a>(src_tmplt, src));</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="comment">// minimal value from offset table size</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size; i++) {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="comment">// if two templates have the same field</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      <span class="keywordflow">if</span> (src_tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>[i] != <a class="code" href="unirec_8h.html#a82342fa356ae9d09be33db986f6d2df2">UR_INVALID_OFFSET</a> &amp;&amp; dst_tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>[i] != <a class="code" href="unirec_8h.html#a82342fa356ae9d09be33db986f6d2df2">UR_INVALID_OFFSET</a>) {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;         size_of_field = <a class="code" href="group__urtemplate.html#ga770ecf70233ae337f3aa4af9540a11ba">ur_get_size</a>(i);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;         <span class="keywordflow">if</span> (size_of_field &gt; 0) {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;            <span class="comment">// static fields</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            ptr_dst = <a class="code" href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a>(dst_tmplt, dst, i);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            ptr_src = <a class="code" href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a>(src_tmplt, src, i);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;            <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(ptr_dst, ptr_src, size_of_field);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            <span class="comment">// variable-size fields</span></div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            ptr_src = <a class="code" href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a>(src_tmplt, src, i);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            size_of_field = <a class="code" href="group__urtemplate.html#gaa95364028416eca5e5741dee2533e35a">ur_get_var_len</a>(src_tmplt, src, i);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            <a class="code" href="group__urtemplate.html#gadc58a81c9f7eb5a1ec3ba36d97612068">ur_set_var</a>(dst_tmplt, dst, i, ptr_src, size_of_field);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;         }</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;}</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">// Function for iterating over all fields in a given template</span></div><div class="line"><a name="l01196"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gafb2182af09a35e3ba1bc868c311f3a80"> 1196</a></span>&#160;<a class="code" href="unirec_8h.html#a0d8bbc1307c342a3a83bc2f5193e5fdf">ur_iter_t</a> <a class="code" href="group__urtemplate.html#gafb2182af09a35e3ba1bc868c311f3a80">ur_iter_fields</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt, <a class="code" href="unirec_8h.html#a0d8bbc1307c342a3a83bc2f5193e5fdf">ur_iter_t</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;{</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   <span class="comment">// Set first ID to check</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="unirec_8h.html#a193dc30952d6b8be7caeba1e6e5f2671">UR_ITER_BEGIN</a>) {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordtype">id</span> = 0;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordtype">id</span>++;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <span class="comment">// Find first ID which is present in the template</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <span class="keywordflow">while</span> (id &lt; tmplt-&gt;offset_size) {</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      <span class="keywordflow">if</span> (tmplt-&gt;<a class="code" href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">offset</a>[<span class="keywordtype">id</span>] != <a class="code" href="unirec_8h.html#a82342fa356ae9d09be33db986f6d2df2">UR_INVALID_OFFSET</a>) {</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;         <span class="keywordflow">return</span> id;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      }</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="keywordtype">id</span>++;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   }</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#accf8d970c42f19c249ece4959a7f38b6">UR_ITER_END</a>;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;}</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">// Function for iterating over all fields in a given template. Fields are in the same</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">// order like in record</span></div><div class="line"><a name="l01216"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga8877cbc958a4943aaf720154f8338ae3"> 1216</a></span>&#160;<a class="code" href="unirec_8h.html#a0d8bbc1307c342a3a83bc2f5193e5fdf">ur_iter_t</a> <a class="code" href="group__urtemplate.html#ga8877cbc958a4943aaf720154f8338ae3">ur_iter_fields_record_order</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmplt, <span class="keywordtype">int</span> index)</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;{</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   <span class="comment">// Set first ID to check</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keywordflow">if</span> (index &gt;= tmplt-&gt;<a class="code" href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">count</a> || index &lt; 0) {</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="unirec_8h.html#accf8d970c42f19c249ece4959a7f38b6">UR_ITER_END</a>;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <span class="keywordflow">return</span> tmplt-&gt;<a class="code" href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ids</a>[index];</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;}</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gae60aa0708ffef7cadd5a1d7663eb8083"> 1225</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group__urtemplate.html#gae60aa0708ffef7cadd5a1d7663eb8083">ur_set_from_string</a>(<span class="keyword">const</span> <a class="code" href="unirec_8h.html#structur__template__t">ur_template_t</a> *tmpl, <span class="keywordtype">void</span> *data, <a class="code" href="unirec_8h.html#a17cba425af74e590b73d23d4e0fda44a">ur_field_id_t</a> f_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *v)</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;{</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *addr_p = NULL, addr;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <a class="code" href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a> *macaddr_p = NULL, macaddr;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   <span class="keywordtype">int</span> rv = 0;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   <span class="keyword">struct </span>tm t;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   <span class="keywordtype">char</span> *res = NULL;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   time_t sec = -1;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   uint64_t msec = 0;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keywordtype">void</span> *ptr = <a class="code" href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a>(tmpl, data, f_id);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="group__urtemplate.html#gafd4879120b30f35f9753e2104eb55920">ur_is_present</a>(tmpl, f_id) == 0) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="group__urtemplate.html#gae46ff3befebabc8c83372030a98df592">ur_get_type</a>(f_id)) {</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ac5e6afc0dcc62bf41b2f8ecaef4f2d46">UR_TYPE_UINT8</a>:</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%&quot;</span> SCNu8, (uint8_t *) ptr) != 1) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;         rv = 1;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ad974c6bd40a8908663192490be5e8bdd">UR_TYPE_UINT16</a>:</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%&quot;</span> SCNu16 , (uint16_t *) ptr) != 1) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;         rv = 1;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ade2ea64db377e3c5a4f3940af14a1399">UR_TYPE_UINT32</a>:</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%&quot;</span> SCNu32, (uint32_t *) ptr) != 1) {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;         rv = 1;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a02e71d920f238b5c0e66f3aa6e5a556b">UR_TYPE_UINT64</a>:</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%&quot;</span> SCNu64, (uint64_t *) ptr) != 1) {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;         rv = 1;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a6b28189bd4b43d8f83afb712899b5f5a">UR_TYPE_INT8</a>:</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%&quot;</span> SCNi8, (int8_t *) ptr) != 1) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;         rv = 1;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      }</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a241c7cd7de2f7f29fcc55a929c277baa">UR_TYPE_INT16</a>:</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%&quot;</span> SCNi16, (int16_t *) ptr) != 1) {</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;         rv = 1;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      }</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ad8f38cf9c041be729dfcdcd6f7f0ee78">UR_TYPE_INT32</a>:</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%&quot;</span> SCNi32, (int32_t *) ptr) != 1) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;         rv = 1;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030aca579767cf337a5ac6c7974144eca6f7">UR_TYPE_INT64</a>:</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%&quot;</span> SCNi64, (int64_t *) ptr) != 1) {</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;         rv = 1;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a6cd2b8018fd5edf0c17780084682ef07">UR_TYPE_CHAR</a>:</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%c&quot;</span>, (<span class="keywordtype">char</span> *) ptr) != 1) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;         rv = 1;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030afb83f3adb194febb9ff35c0650592dcd">UR_TYPE_FLOAT</a>:</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%f&quot;</span>, (<span class="keywordtype">float</span> *) ptr) != 1) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;         rv = 1;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      }</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a83881000b9637c4905af7a052238cb40">UR_TYPE_DOUBLE</a>:</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="keywordflow">if</span> (sscanf(v, <span class="stringliteral">&quot;%lf&quot;</span>, (<span class="keywordtype">double</span> *) ptr) != 1) {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;         rv = 1;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a69882977753a49d1458e07f809aeb6c9">UR_TYPE_IP</a>:</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <span class="comment">// IP address - convert to human-readable format and print</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__uripaddr.html#gae01409ca18c16d2b28292ff94802b51b">ip_from_str</a>(v, &amp;addr) == 0) {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;         rv = 1;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      addr_p = (<a class="code" href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a> *) ptr;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      (*addr_p) = addr;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ae3546993ce8e00ca138c5c0f9c1a04bb">UR_TYPE_MAC</a>:</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      <span class="comment">// IP address - convert to human-readable format and print</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="unirec_8c.html#a7b3f651fa0b6a4eac840c6c2233c4460">mac_from_str</a>(v, &amp;macaddr) == 0) {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;         rv = 1;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      }</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      macaddr_p = (<a class="code" href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a> *) ptr;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      (*macaddr_p) = macaddr;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ac5e66194d71459394d2eff516ce2c2d1">UR_TYPE_TIME</a>:</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <span class="comment">// Timestamp - convert from human-readable format</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      res = strptime(v, <span class="stringliteral">&quot;%FT%T&quot;</span>, &amp;t);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <span class="comment">/* parsed to sec - msec delimiter */</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <span class="keywordflow">if</span> ((res != NULL) &amp;&amp; (*res == <span class="charliteral">&#39;.&#39;</span>)) {</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;         sec = timegm(&amp;t);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;         <span class="keywordflow">if</span> (sec != -1) {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            msec = atoi(res + 1);</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            (*(<a class="code" href="group__urtime.html#ga9d13a2ac3696e74a33a93aa0461a3899">ur_time_t</a> *) ptr) = <a class="code" href="group__urtime.html#ga8a7a7eb122f30c16d0b3c18bbf313d50">ur_time_from_sec_msec</a>((uint64_t) sec, msec);</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="keywordflow">goto</span> failed_time_parsing;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;         }</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;failed_time_parsing:</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;         (*(<a class="code" href="group__urtime.html#ga9d13a2ac3696e74a33a93aa0461a3899">ur_time_t</a> *) ptr) = (<a class="code" href="group__urtime.html#ga9d13a2ac3696e74a33a93aa0461a3899">ur_time_t</a>) 0;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;         fprintf(stderr, <span class="stringliteral">&quot;Failed to parse time.\n&quot;</span>);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      }</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ad004355d78cd66fc3b4ec2744bd02de2">UR_TYPE_STRING</a>:</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="comment">// Printable string</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      <a class="code" href="group__urtemplate.html#gadc58a81c9f7eb5a1ec3ba36d97612068">ur_set_var</a>(tmpl, data, f_id, v, strlen(v));</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030af3d7332fe3d00598405e5ce4cb70d0b3">UR_TYPE_BYTES</a>:</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;         <span class="comment">// Generic string of bytes</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         <span class="keywordtype">int</span> size = strlen(v)/2;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;         <a class="code" href="unirec_8c.html#a6c1aeacaf5107408c58188e63406bcd1">ur_var_change_size</a>(tmpl, data, f_id, size);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data_ptr = <a class="code" href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a>(tmpl, data, f_id);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;         <span class="keywordflow">for</span> ( ; size &gt; 0; --size, v += 2, ++data_ptr) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            sscanf(v, <span class="stringliteral">&quot;%2hhx&quot;</span>, data_ptr);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;         }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;Unsupported UniRec field type, skipping.\n&quot;</span>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="keywordflow">return</span> rv;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;}</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga11693505eb5de52b6b2b021aeaf1a7e1"> 1353</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="group__urtemplate.html#ga11693505eb5de52b6b2b021aeaf1a7e1">ur_cpy_string</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str)</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;{</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   <span class="keywordtype">int</span> str_len = strlen(str) + 1;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <span class="keywordtype">char</span> *new_str = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">char</span>) * str_len);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   <span class="keywordflow">if</span> (new_str == NULL) {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <a class="code" href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a>(new_str, str, str_len);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   <span class="keywordflow">return</span> new_str;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;}</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"><a class="line" href="group__urtemplate.html#gadad09e518520d1791d94b29ee7af2487"> 1364</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__urtemplate.html#gadad09e518520d1791d94b29ee7af2487">ur_values_get_name_start_end</a>(uint32_t start, uint32_t end, int32_t value)</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;{</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = start; i &lt; end; i++) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="keywordflow">if</span> (ur_values[i].value == value) {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;         <span class="keywordflow">return</span> ur_values[i].name;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   }</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;}</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"><a class="line" href="group__urtemplate.html#ga2a2e25e5cdee3544c54e4abf4782dfb5"> 1374</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="group__urtemplate.html#ga2a2e25e5cdee3544c54e4abf4782dfb5">ur_values_get_description_start_end</a>(uint32_t start, uint32_t end, int32_t value)</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;{</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = start; i &lt; end; i++) {</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <span class="keywordflow">if</span> (ur_values[i].value == value) {</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;         <span class="keywordflow">return</span> ur_values[i].description;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      }</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   }</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;}</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">// ** &quot;Links&quot; part - set of functions for handling LINK_BIT_FIELD</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">// Create and initialize links structure.</span></div><div class="line"><a name="l01387"></a><span class="lineno"><a class="line" href="group__urlinks.html#ga79615b30cdec474a94bb5ce5f3eeb34f"> 1387</a></span>&#160;<a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a> *<a class="code" href="group__urlinks.html#ga79615b30cdec474a94bb5ce5f3eeb34f">ur_create_links</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *mask)</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;{</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   uint64_t checker;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> indexer;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a> *lm;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   <span class="comment">// Allocate memory for structure.</span></div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   lm = (<a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a>));</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <span class="keywordflow">if</span> (lm == NULL) {</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   }</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <span class="comment">// Try to convert passed mask in string to uint64_t.</span></div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <span class="keywordflow">if</span> (sscanf(mask, <span class="stringliteral">&quot;%&quot;</span>SCNx64, &amp;lm-&gt;<a class="code" href="group__urlinks.html#abf9e1b6345f9757c679df5633313ee75">link_mask</a>) &lt; 1) {</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(lm);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   }</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   <span class="comment">// Get link count.</span></div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   lm-&gt;<a class="code" href="group__urlinks.html#a4c9bf894635e57dbd1101cdd4210b4d1">link_count</a> = 0;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   checker = 1;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group__urlinks.html#gabd556824006b81cd58ddb67907d86ca8">MAX_LINK_COUNT</a>; ++i) {</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;      <span class="keywordflow">if</span> (lm-&gt;<a class="code" href="group__urlinks.html#abf9e1b6345f9757c679df5633313ee75">link_mask</a> &amp; checker) {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;         lm-&gt;<a class="code" href="group__urlinks.html#a4c9bf894635e57dbd1101cdd4210b4d1">link_count</a>++;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      }</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      checker &lt;&lt;= 1;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <span class="keywordflow">if</span> (lm-&gt;<a class="code" href="group__urlinks.html#a4c9bf894635e57dbd1101cdd4210b4d1">link_count</a> == 0) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(lm);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   }</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="comment">// Allocate array for link indexes</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   lm-&gt;<a class="code" href="group__urlinks.html#a6d882bfc96e7c43de4e9dcc0f6e9f628">link_indexes</a> = (uint64_t *) malloc(lm-&gt;<a class="code" href="group__urlinks.html#a4c9bf894635e57dbd1101cdd4210b4d1">link_count</a> * <span class="keyword">sizeof</span>(uint64_t));</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   <span class="keywordflow">if</span> (lm-&gt;<a class="code" href="group__urlinks.html#a6d882bfc96e7c43de4e9dcc0f6e9f628">link_indexes</a> == NULL) {</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(lm);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   }</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="comment">// Fill link indexes</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   indexer = 0;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   checker = 1;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="group__urlinks.html#gabd556824006b81cd58ddb67907d86ca8">MAX_LINK_COUNT</a>; ++i) {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="keywordflow">if</span> (lm-&gt;<a class="code" href="group__urlinks.html#abf9e1b6345f9757c679df5633313ee75">link_mask</a> &amp; checker) {</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;         lm-&gt;<a class="code" href="group__urlinks.html#a6d882bfc96e7c43de4e9dcc0f6e9f628">link_indexes</a>[indexer++] = i;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      }</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      checker &lt;&lt;= 1;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   }</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   <span class="keywordflow">return</span> lm;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;}</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">// Destroy links structure.</span></div><div class="line"><a name="l01439"></a><span class="lineno"><a class="line" href="group__urlinks.html#ga7e1802498fc99e49f98eada58ff0d883"> 1439</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__urlinks.html#ga7e1802498fc99e49f98eada58ff0d883">ur_free_links</a>(<a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a> *links)</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;{</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <span class="keywordflow">if</span> (links != NULL) {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(links-&gt;<a class="code" href="group__urlinks.html#a6d882bfc96e7c43de4e9dcc0f6e9f628">link_indexes</a>);</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <a class="code" href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a>(links);</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;<span class="comment">// Following functions are defined in links.h</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment">// (their headers are repeated here with INLINE_IMPL to generate externally</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="comment">// linkable code)</span></div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="comment">// Get index of link (0 - (link_count-1))</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">int</span> <a class="code" href="group__urlinks.html#ga20fe681784b2536ad4293ed1d2932da2">ur_get_link_index</a>(<a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a> *links, uint64_t link_bit_field);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">// Get position in link_bit_field of link</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> uint64_t <a class="code" href="group__urlinks.html#ga469c39d33966e8752fc53a4fba154d10">ur_get_link_bit_field_position</a>(<a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a> *links, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">// Get link mask.</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> uint64_t <a class="code" href="group__urlinks.html#gab0da3a3f0c637c7f49640f74a262e6a0">ur_get_link_mask</a>(<a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a> *links);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment">// Get link count.</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<a class="code" href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__urlinks.html#ga9ae62c9d1c388c62669aa5dfdeb97977">ur_get_link_count</a>(<a class="code" href="group__urlinks.html#structur__links__t">ur_links_t</a> *links);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">// END OF &quot;Links&quot; part *********************************************************</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">// *****************************************************************************</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030ad004355d78cd66fc3b4ec2744bd02de2"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ad004355d78cd66fc3b4ec2744bd02de2">UR_TYPE_STRING</a></div><div class="ttdoc">var-len fields (string where only printable characters are expected; &amp;#39;\0&amp;#39; at the end should NOT be in...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00094">unirec.h:94</a></div></div>
<div class="ttc" id="unirec_8h_html_aac640f7c39c04cb3b3ca150da6e46454"><div class="ttname"><a href="unirec_8h.html#aac640f7c39c04cb3b3ca150da6e46454">UR_FIELD_ID_MAX</a></div><div class="ttdeci">#define UR_FIELD_ID_MAX</div><div class="ttdoc">Max ID of a field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00070">unirec.h:70</a></div></div>
<div class="ttc" id="unirec_8c_html_a355872267716d5fae37d42eadf4d90d3"><div class="ttname"><a href="unirec_8c.html#a355872267716d5fae37d42eadf4d90d3">mac_to_bytes</a></div><div class="ttdeci">INLINE_IMPL void mac_to_bytes(const mac_addr_t *addr, uint8_t *array)</div><div class="ttdef"><b>Definition:</b> <a href="macaddr_8h_source.html#l00130">macaddr.h:130</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030a241c7cd7de2f7f29fcc55a929c277baa"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a241c7cd7de2f7f29fcc55a929c277baa">UR_TYPE_INT16</a></div><div class="ttdoc">int (8b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00100">unirec.h:100</a></div></div>
<div class="ttc" id="group__uripaddr_html_ga35a767afac198cabbbb7cf5ea70c9e33"><div class="ttname"><a href="group__uripaddr.html#ga35a767afac198cabbbb7cf5ea70c9e33">ip_from_16_bytes_le</a></div><div class="ttdeci">INLINE_IMPL ip_addr_t ip_from_16_bytes_le(char b[16])</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00249">ipaddr.h:249</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030afb83f3adb194febb9ff35c0650592dcd"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030afb83f3adb194febb9ff35c0650592dcd">UR_TYPE_FLOAT</a></div><div class="ttdoc">float (32b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00105">unirec.h:105</a></div></div>
<div class="ttc" id="group__urtemplate_html_gafb2182af09a35e3ba1bc868c311f3a80"><div class="ttname"><a href="group__urtemplate.html#gafb2182af09a35e3ba1bc868c311f3a80">ur_iter_fields</a></div><div class="ttdeci">ur_iter_t ur_iter_fields(const ur_template_t *tmplt, ur_iter_t id)</div><div class="ttdoc">Iterate over fields of a template in order of a record This function can be used to iterate over all ...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01196">unirec.c:1196</a></div></div>
<div class="ttc" id="unirec_8h_html_ae983554dcd55068c660732abb7cc29a9"><div class="ttname"><a href="unirec_8h.html#ae983554dcd55068c660732abb7cc29a9">UR_E_INVALID_FIELD_ID</a></div><div class="ttdeci">#define UR_E_INVALID_FIELD_ID</div><div class="ttdoc">The field ID is not present in a template. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00083">unirec.h:83</a></div></div>
<div class="ttc" id="unirec_8h_html_a099d176cd55c8e16d01a3e9eb6f8c6d4"><div class="ttname"><a href="unirec_8h.html#a099d176cd55c8e16d01a3e9eb6f8c6d4">ur_template_t::direction</a></div><div class="ttdeci">ur_tmplt_direction direction</div><div class="ttdoc">Direction of data input, output, bidirection, no direction. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00181">unirec.h:181</a></div></div>
<div class="ttc" id="unirec_8h_html_structfield__spec__t"><div class="ttname"><a href="unirec_8h.html#structfield__spec__t">field_spec_t</a></div><div class="ttdoc">Sorting fields structure This structure is used to sort fields by their size and name. The structure is passed to the sorting algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00165">unirec.h:165</a></div></div>
<div class="ttc" id="group__uripaddr_html_gae6ab3a77cab8533289729b25c9438689"><div class="ttname"><a href="group__uripaddr.html#gae6ab3a77cab8533289729b25c9438689">ip_get_v4_as_int</a></div><div class="ttdeci">INLINE_IMPL uint32_t ip_get_v4_as_int(ip_addr_t *addr)</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00157">ipaddr.h:157</a></div></div>
<div class="ttc" id="unirec_8c_html_a81f8d7af996a01f4b6e4ac086d483eb0"><div class="ttname"><a href="unirec_8c.html#a81f8d7af996a01f4b6e4ac086d483eb0">ur_field_type_size</a></div><div class="ttdeci">const int ur_field_type_size[]</div><div class="ttdoc">Sizes of UniRec data types. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00093">unirec.c:93</a></div></div>
<div class="ttc" id="group__urtemplate_html_gae46ff3befebabc8c83372030a98df592"><div class="ttname"><a href="group__urtemplate.html#gae46ff3befebabc8c83372030a98df592">ur_get_type</a></div><div class="ttdeci">#define ur_get_type(field_id)</div><div class="ttdoc">Get type of UniRec field Get type of any UniRec defined field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00339">unirec.h:339</a></div></div>
<div class="ttc" id="group__urtemplate_html_gadc5a6441796f8df8c63645298170f8f4"><div class="ttname"><a href="group__urtemplate.html#gadc5a6441796f8df8c63645298170f8f4">ur_define_set_of_fields</a></div><div class="ttdeci">int ur_define_set_of_fields(const char *ifc_data_fmt)</div><div class="ttdoc">Define set of new UniRec fields Define new UniRec fields at run-time. It adds new fields into existin...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00493">unirec.c:493</a></div></div>
<div class="ttc" id="group__urtemplate_html_gab57dab204aa7abf9f0dbde89f0ee408d"><div class="ttname"><a href="group__urtemplate.html#gab57dab204aa7abf9f0dbde89f0ee408d">ur_clone_record</a></div><div class="ttdeci">void * ur_clone_record(const ur_template_t *tmplt, const void *src)</div><div class="ttdoc">Create new UniRec and copy the source UniRec into it. Function creates new UniRec record and fills it...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01153">unirec.c:1153</a></div></div>
<div class="ttc" id="unirec_8h_html_a85bbc4f5be324da3382d0b587e9ae4aea3c0e3d8b88bb1a4e7bbe44878ee16840"><div class="ttname"><a href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aea3c0e3d8b88bb1a4e7bbe44878ee16840">UR_TMPLT_DIRECTION_IN</a></div><div class="ttdoc">input direction </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00114">unirec.h:114</a></div></div>
<div class="ttc" id="unirec_8c_html_a167db66d59cbead9f8f83e6c538e0737"><div class="ttname"><a href="unirec_8c.html#a167db66d59cbead9f8f83e6c538e0737">mac_from_bytes</a></div><div class="ttdeci">INLINE_IMPL mac_addr_t mac_from_bytes(uint8_t *array)</div><div class="ttdef"><b>Definition:</b> <a href="macaddr_8h_source.html#l00071">macaddr.h:71</a></div></div>
<div class="ttc" id="group__urtemplate_html_gad04c00ef18b154d71d41826d30ceec08"><div class="ttname"><a href="group__urtemplate.html#gad04c00ef18b154d71d41826d30ceec08">ur_get_name</a></div><div class="ttdeci">#define ur_get_name(field_id)</div><div class="ttdoc">Get name of UniRec field Get name of any UniRec defined field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00331">unirec.h:331</a></div></div>
<div class="ttc" id="unirec_8h_html_abe745769ca4dd67bf653de0687033da9"><div class="ttname"><a href="unirec_8h.html#abe745769ca4dd67bf653de0687033da9">ur_field_specs_t::ur_allocated_fields</a></div><div class="ttdeci">ur_field_id_t ur_allocated_fields</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00156">unirec.h:156</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga6661b319bc4874c2ab67d5d780eeddf2"><div class="ttname"><a href="group__urtemplate.html#ga6661b319bc4874c2ab67d5d780eeddf2">ur_get_var_offset</a></div><div class="ttdeci">#define ur_get_var_offset(tmplt, rec, field_id)</div><div class="ttdoc">Get offset of variable-length field in the record. Get offset of a specified variable-length field in...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00407">unirec.h:407</a></div></div>
<div class="ttc" id="group__urlinks_html_gab0da3a3f0c637c7f49640f74a262e6a0"><div class="ttname"><a href="group__urlinks.html#gab0da3a3f0c637c7f49640f74a262e6a0">ur_get_link_mask</a></div><div class="ttdeci">INLINE_IMPL uint64_t ur_get_link_mask(ur_links_t *links)</div><div class="ttdoc">Get link mask. </div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00138">links.h:138</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030aca579767cf337a5ac6c7974144eca6f7"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030aca579767cf337a5ac6c7974144eca6f7">UR_TYPE_INT64</a></div><div class="ttdoc">int (64b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00104">unirec.h:104</a></div></div>
<div class="ttc" id="unirec_8h_html_a7d8bca7d65ccb7dfeaad247f43100789"><div class="ttname"><a href="unirec_8h.html#a7d8bca7d65ccb7dfeaad247f43100789">field_spec_t::id</a></div><div class="ttdeci">ur_field_id_t id</div><div class="ttdoc">ID of a field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00168">unirec.h:168</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga98890a8d9702c533d4d1d1e7921f74e6"><div class="ttname"><a href="group__urtemplate.html#ga98890a8d9702c533d4d1d1e7921f74e6">ur_get_empty_id</a></div><div class="ttdeci">int ur_get_empty_id()</div><div class="ttdoc">Return first empty id for new UniRec field Return first empty id for new UniRec field. If there is no space in the UniRec structures, it will increase space in the existing structures. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00223">unirec.c:223</a></div></div>
<div class="ttc" id="inline_8h_html"><div class="ttname"><a href="inline_8h.html">inline.h</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaec94dfdd45a6af36f412cc06f9b0106d"><div class="ttname"><a href="group__urtemplate.html#gaec94dfdd45a6af36f412cc06f9b0106d">ur_create_template</a></div><div class="ttdeci">ur_template_t * ur_create_template(const char *fields, char **errstr)</div><div class="ttdoc">Create UniRec template Create new UniRec template specified by a string containing names of its field...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00835">unirec.c:835</a></div></div>
<div class="ttc" id="unirec_8h_html_aa5d7494a2e5265dce181ecdcfaeaaaea"><div class="ttname"><a href="unirec_8h.html#aa5d7494a2e5265dce181ecdcfaeaaaea">UR_INITIAL_SIZE_FIELDS_TABLE</a></div><div class="ttdeci">#define UR_INITIAL_SIZE_FIELDS_TABLE</div><div class="ttdoc">Initial size of free space in fields tables. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00069">unirec.h:69</a></div></div>
<div class="ttc" id="unirec_8c_html_a1dad0e5a16c5828870041e64270e1943"><div class="ttname"><a href="unirec_8c.html#a1dad0e5a16c5828870041e64270e1943">ur_get_type_and_name_from_string</a></div><div class="ttdeci">const char * ur_get_type_and_name_from_string(const char *source, char **name, char **type, int *length_name, int *length_type)</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00303">unirec.c:303</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030ad974c6bd40a8908663192490be5e8bdd"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ad974c6bd40a8908663192490be5e8bdd">UR_TYPE_UINT16</a></div><div class="ttdoc">unsigned int (16b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00099">unirec.h:99</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga1a1a56a89c745a13823db8ef01fcb07b"><div class="ttname"><a href="group__urtemplate.html#ga1a1a56a89c745a13823db8ef01fcb07b">ur_clear_varlen</a></div><div class="ttdeci">void ur_clear_varlen(const ur_template_t *tmplt, void *rec)</div><div class="ttdoc">Clear variable-length part of a record. For better performance of setting content to variable-length ...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01105">unirec.c:1105</a></div></div>
<div class="ttc" id="group__urtemplate_html_gae9296343268e2117e4f53705c0cdf3a5"><div class="ttname"><a href="group__urtemplate.html#gae9296343268e2117e4f53705c0cdf3a5">ur_define_field</a></div><div class="ttdeci">int ur_define_field(const char *name, ur_field_type_t type)</div><div class="ttdoc">Define new UniRec field Define new UniRec field at run-time. It adds new field into existing structur...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00571">unirec.c:571</a></div></div>
<div class="ttc" id="group__urtemplate_html_gacbb93d997a64d88206be15d99e926326"><div class="ttname"><a href="group__urtemplate.html#gacbb93d997a64d88206be15d99e926326">ur_set_var_len</a></div><div class="ttdeci">#define ur_set_var_len(tmplt, rec, field_id, len)</div><div class="ttdoc">Set size of variable-length field in the record. Set size of specified variable-length field in the r...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00428">unirec.h:428</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga2a2e25e5cdee3544c54e4abf4782dfb5"><div class="ttname"><a href="group__urtemplate.html#ga2a2e25e5cdee3544c54e4abf4782dfb5">ur_values_get_description_start_end</a></div><div class="ttdeci">const char * ur_values_get_description_start_end(uint32_t start, uint32_t end, int32_t value)</div><div class="ttdoc">Returns description of specified value (Helper function) Helper function for ur_values_get_descriptio...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01374">unirec.c:1374</a></div></div>
<div class="ttc" id="group__urlinks_html_ga7e1802498fc99e49f98eada58ff0d883"><div class="ttname"><a href="group__urlinks.html#ga7e1802498fc99e49f98eada58ff0d883">ur_free_links</a></div><div class="ttdeci">void ur_free_links(ur_links_t *links)</div><div class="ttdoc">Destroy links structure. Free all memory allocated for a links structure created previously by ur_cre...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01439">unirec.c:1439</a></div></div>
<div class="ttc" id="unirec_8h_html_a91ce0528dfa853da3ca1dcd377a1ceeb"><div class="ttname"><a href="unirec_8h.html#a91ce0528dfa853da3ca1dcd377a1ceeb">ur_field_specs_t::ur_field_sizes</a></div><div class="ttdeci">short * ur_field_sizes</div><div class="ttdoc">Array of sizes of fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00149">unirec.h:149</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaa27853144707572d1e6a5e0f0a37edae"><div class="ttname"><a href="group__urtemplate.html#gaa27853144707572d1e6a5e0f0a37edae">ur_ctx_set_output_template</a></div><div class="ttdeci">int ur_ctx_set_output_template(trap_ctx_t *ctx, int ifc, ur_template_t *tmplt)</div><div class="ttdoc">Set UniRec template to ouput interface on specified context. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00771">unirec.c:771</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga11693505eb5de52b6b2b021aeaf1a7e1"><div class="ttname"><a href="group__urtemplate.html#ga11693505eb5de52b6b2b021aeaf1a7e1">ur_cpy_string</a></div><div class="ttdeci">char * ur_cpy_string(const char *str)</div><div class="ttdoc">Duplicates given string. Helper function which returns pointer to duplicated string. New string has to be freed by user. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01353">unirec.c:1353</a></div></div>
<div class="ttc" id="example__unirec_8c_html_a1be5c783827bbb7c21da30485dbf4d6f"><div class="ttname"><a href="example__unirec_8c.html#a1be5c783827bbb7c21da30485dbf4d6f">ur_get_ptr_by_id</a></div><div class="ttdeci">*uint16_t * ur_get_ptr_by_id(tmplt2, buffer2, new_id))</div></div>
<div class="ttc" id="group__urlinks_html_ga9ae62c9d1c388c62669aa5dfdeb97977"><div class="ttname"><a href="group__urlinks.html#ga9ae62c9d1c388c62669aa5dfdeb97977">ur_get_link_count</a></div><div class="ttdeci">INLINE_IMPL unsigned int ur_get_link_count(ur_links_t *links)</div><div class="ttdoc">Get link count. </div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00147">links.h:147</a></div></div>
<div class="ttc" id="unirec_8h_html_a802e8538253f5509acc14f2da2b225f6"><div class="ttname"><a href="unirec_8h.html#a802e8538253f5509acc14f2da2b225f6">ur_static_field_specs_t::ur_field_sizes</a></div><div class="ttdeci">short * ur_field_sizes</div><div class="ttdoc">Array of sizes of fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00137">unirec.h:137</a></div></div>
<div class="ttc" id="group__urtemplate_html_gae60aa0708ffef7cadd5a1d7663eb8083"><div class="ttname"><a href="group__urtemplate.html#gae60aa0708ffef7cadd5a1d7663eb8083">ur_set_from_string</a></div><div class="ttdeci">int ur_set_from_string(const ur_template_t *tmpl, void *data, ur_field_id_t f_id, const char *v)</div><div class="ttdoc">Set value of a UniRec field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01225">unirec.c:1225</a></div></div>
<div class="ttc" id="group__urtemplate_html_gab80b3d4a916e0657f57062c9477d5bd0"><div class="ttname"><a href="group__urtemplate.html#gab80b3d4a916e0657f57062c9477d5bd0">ur_ctx_create_output_template</a></div><div class="ttdeci">ur_template_t * ur_ctx_create_output_template(trap_ctx_t *ctx, int ifc, const char *fields, char **errstr)</div><div class="ttdoc">Create UniRec template and set it to output interface on specified context Creates UniRec template...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00752">unirec.c:752</a></div></div>
<div class="ttc" id="unirec_8h_html_a85bbc4f5be324da3382d0b587e9ae4aead92326143d975004bacb08640930fead"><div class="ttname"><a href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aead92326143d975004bacb08640930fead">UR_TMPLT_DIRECTION_BI</a></div><div class="ttdoc">bidirection </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00116">unirec.h:116</a></div></div>
<div class="ttc" id="group__uripaddr_html_ga61daf049c5a24cd2a331d916694a4fef"><div class="ttname"><a href="group__uripaddr.html#ga61daf049c5a24cd2a331d916694a4fef">ip_from_16_bytes_be</a></div><div class="ttdeci">INLINE_IMPL ip_addr_t ip_from_16_bytes_be(char b[16])</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00236">ipaddr.h:236</a></div></div>
<div class="ttc" id="unirec_8c_html_ae511d9e52485818f2513fe5f2e1d564c"><div class="ttname"><a href="unirec_8c.html#ae511d9e52485818f2513fe5f2e1d564c">ur_get_field_type_from_str</a></div><div class="ttdeci">int ur_get_field_type_from_str(const char *type)</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00290">unirec.c:290</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030ae3546993ce8e00ca138c5c0f9c1a04bb"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ae3546993ce8e00ca138c5c0f9c1a04bb">UR_TYPE_MAC</a></div><div class="ttdoc">MAC address (48b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00108">unirec.h:108</a></div></div>
<div class="ttc" id="unirec_8h_html_a1c3c1c127c05a89b0e87197d022e7107"><div class="ttname"><a href="unirec_8h.html#a1c3c1c127c05a89b0e87197d022e7107">UR_INITIALIZED</a></div><div class="ttdeci">#define UR_INITIALIZED</div><div class="ttdoc">Indicator if the UniRec has been initialized by calling function ur_init. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00079">unirec.h:79</a></div></div>
<div class="ttc" id="unirec_8c_html_a295b3ad0387685d62fab829eb2c5c5cb"><div class="ttname"><a href="unirec_8c.html#a295b3ad0387685d62fab829eb2c5c5cb">mac_to_str</a></div><div class="ttdeci">INLINE_IMPL void mac_to_str(const mac_addr_t *addr, char *str)</div><div class="ttdef"><b>Definition:</b> <a href="macaddr_8h_source.html#l00118">macaddr.h:118</a></div></div>
<div class="ttc" id="unirec_8h_html_a1a0440dd1b14a93428a69a10581fe8b9"><div class="ttname"><a href="unirec_8h.html#a1a0440dd1b14a93428a69a10581fe8b9">UR_OK</a></div><div class="ttdeci">#define UR_OK</div><div class="ttdoc">No problem. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00088">unirec.h:88</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaa98993f5da922c40edc2c8adb8a949ad"><div class="ttname"><a href="group__urtemplate.html#gaa98993f5da922c40edc2c8adb8a949ad">ur_is_static</a></div><div class="ttdeci">#define ur_is_static(field_id)</div><div class="ttdoc">Alias for ur_is_fixlen (for backwards compatibility only) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00493">unirec.h:493</a></div></div>
<div class="ttc" id="unirec_8h_html_ab5f672a177d78e7c11abe1922c424b92"><div class="ttname"><a href="unirec_8h.html#ab5f672a177d78e7c11abe1922c424b92">UR_E_INVALID_PARAMETER</a></div><div class="ttdeci">#define UR_E_INVALID_PARAMETER</div><div class="ttdoc">The given parameter is wrong. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00082">unirec.h:82</a></div></div>
<div class="ttc" id="group__urlinks_html_a6d882bfc96e7c43de4e9dcc0f6e9f628"><div class="ttname"><a href="group__urlinks.html#a6d882bfc96e7c43de4e9dcc0f6e9f628">ur_links_t::link_indexes</a></div><div class="ttdeci">uint64_t * link_indexes</div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00073">links.h:73</a></div></div>
<div class="ttc" id="unirec_8h_html_a9ef90bbaacc4b629a182cca2fe3f6ed3"><div class="ttname"><a href="unirec_8h.html#a9ef90bbaacc4b629a182cca2fe3f6ed3">ur_field_specs_t::ur_field_names</a></div><div class="ttdeci">char ** ur_field_names</div><div class="ttdoc">Array of names of fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00148">unirec.h:148</a></div></div>
<div class="ttc" id="group__urtime_html_ga9d13a2ac3696e74a33a93aa0461a3899"><div class="ttname"><a href="group__urtime.html#ga9d13a2ac3696e74a33a93aa0461a3899">ur_time_t</a></div><div class="ttdeci">uint64_t ur_time_t</div><div class="ttdoc">Type of timestamps used in UniRec Timestamps in UniRec are stored as number of seconds from Unix epoc...</div><div class="ttdef"><b>Definition:</b> <a href="ur__time_8h_source.html#l00061">ur_time.h:61</a></div></div>
<div class="ttc" id="unirec_8h_html_a98353be825cf3f1fb16c73e048ea0b74"><div class="ttname"><a href="unirec_8h.html#a98353be825cf3f1fb16c73e048ea0b74">ur_static_field_specs_t::ur_field_names</a></div><div class="ttdeci">char ** ur_field_names</div><div class="ttdoc">Array of names of fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00136">unirec.h:136</a></div></div>
<div class="ttc" id="example__unirec_8c_html_a898b07decc0a177549f9d553ac416305"><div class="ttname"><a href="example__unirec_8c.html#a898b07decc0a177549f9d553ac416305">free</a></div><div class="ttdeci">free(rec)</div></div>
<div class="ttc" id="group__urtemplate_html_ga73f11893596046e5871fc3d520ccc39e"><div class="ttname"><a href="group__urtemplate.html#ga73f11893596046e5871fc3d520ccc39e">ur_rec_size</a></div><div class="ttdeci">#define ur_rec_size(tmplt, rec)</div><div class="ttdoc">Get size of UniRec record (static and variable length) Get total size of whole UniRec record...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00511">unirec.h:511</a></div></div>
<div class="ttc" id="group__uripaddr_html_gae01409ca18c16d2b28292ff94802b51b"><div class="ttname"><a href="group__uripaddr.html#gae01409ca18c16d2b28292ff94802b51b">ip_from_str</a></div><div class="ttdeci">INLINE_IMPL int ip_from_str(const char *str, ip_addr_t *addr)</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00301">ipaddr.h:301</a></div></div>
<div class="ttc" id="unirec_8h_html_a3b5886d926b0a4ae0959eaf4aba18201"><div class="ttname"><a href="unirec_8h.html#a3b5886d926b0a4ae0959eaf4aba18201">field_spec_t::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Name of a field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00166">unirec.h:166</a></div></div>
<div class="ttc" id="inline_8h_html_a7dfafbc306b738bfc7977fa6e24f5bbf"><div class="ttname"><a href="inline_8h.html#a7dfafbc306b738bfc7977fa6e24f5bbf">INLINE_IMPL</a></div><div class="ttdeci">#define INLINE_IMPL</div><div class="ttdef"><b>Definition:</b> <a href="inline_8h_source.html#l00013">inline.h:13</a></div></div>
<div class="ttc" id="unirec_8h_html_a193dc30952d6b8be7caeba1e6e5f2671"><div class="ttname"><a href="unirec_8h.html#a193dc30952d6b8be7caeba1e6e5f2671">UR_ITER_BEGIN</a></div><div class="ttdeci">#define UR_ITER_BEGIN</div><div class="ttdoc">First value in iterating through the fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00073">unirec.h:73</a></div></div>
<div class="ttc" id="group__uripaddr_html_ga6b852d36a8e8b8932058fba40570a24a"><div class="ttname"><a href="group__uripaddr.html#ga6b852d36a8e8b8932058fba40570a24a">ip_cmp</a></div><div class="ttdeci">INLINE_IMPL int ip_cmp(const ip_addr_t *addr1, const ip_addr_t *addr2)</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00266">ipaddr.h:266</a></div></div>
<div class="ttc" id="unirec_8h_html_structur__static__field__specs__t"><div class="ttname"><a href="unirec_8h.html#structur__static__field__specs__t">ur_static_field_specs_t</a></div><div class="ttdoc">UniRec default field list It contains all fields which are specified statically in source code of a m...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00135">unirec.h:135</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030ad8f38cf9c041be729dfcdcd6f7f0ee78"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ad8f38cf9c041be729dfcdcd6f7f0ee78">UR_TYPE_INT32</a></div><div class="ttdoc">int (32b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00102">unirec.h:102</a></div></div>
<div class="ttc" id="unirec_8h_html_a0e9b91b96ad7672de1171b543e5d68f6"><div class="ttname"><a href="unirec_8h.html#a0e9b91b96ad7672de1171b543e5d68f6">UR_E_MEMORY</a></div><div class="ttdeci">#define UR_E_MEMORY</div><div class="ttdoc">Problem during allocating memory. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00087">unirec.h:87</a></div></div>
<div class="ttc" id="group__uripaddr_html_ga2c694d465f540e700d91a655f6d47ebd"><div class="ttname"><a href="group__uripaddr.html#ga2c694d465f540e700d91a655f6d47ebd">ip_from_4_bytes_be</a></div><div class="ttdeci">INLINE_IMPL ip_addr_t ip_from_4_bytes_be(char b[4])</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00199">ipaddr.h:199</a></div></div>
<div class="ttc" id="group__urtemplate_html_gac2b52aaae2bd3aa7d38b119a95a275e9"><div class="ttname"><a href="group__urtemplate.html#gac2b52aaae2bd3aa7d38b119a95a275e9">ur_expand_template</a></div><div class="ttdeci">ur_template_t * ur_expand_template(const char *ifc_data_fmt, ur_template_t *tmplt)</div><div class="ttdoc">Expand UniRec template Expand existing UniRec template by a string containing types and names of its ...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00421">unirec.c:421</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga4b090390e3e2728d2d59168eb532633a"><div class="ttname"><a href="group__urtemplate.html#ga4b090390e3e2728d2d59168eb532633a">ur_define_fields_and_update_template</a></div><div class="ttdeci">ur_template_t * ur_define_fields_and_update_template(const char *ifc_data_fmt, ur_template_t *tmplt)</div><div class="ttdoc">Defined new fields and expand an UniRec template Define new fields (function ur_define_set_of_fields)...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00545">unirec.c:545</a></div></div>
<div class="ttc" id="group__urtemplate_html_gacd8ba93602d9f4038e165ce0e7f4a716"><div class="ttname"><a href="group__urtemplate.html#gacd8ba93602d9f4038e165ce0e7f4a716">ur_get_len</a></div><div class="ttdeci">#define ur_get_len(tmplt, rec, field)</div><div class="ttdoc">Get length of UniRec field Get actual length of fixed or variable-length UniRec field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00449">unirec.h:449</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga77bb16e4585117517a5d7aabebcb8a0a"><div class="ttname"><a href="group__urtemplate.html#ga77bb16e4585117517a5d7aabebcb8a0a">ur_finalize</a></div><div class="ttdeci">void ur_finalize()</div><div class="ttdoc">Deallocate UniRec structures Deallocate UniRec structures at the end of a program. This function SHOULD be called after all UniRec functions and macros invocations, typically during a cleanup phase before the program&amp;#39;s end. This function has to be called if some fields are defined during run-time, otherwise this function is needless. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00669">unirec.c:669</a></div></div>
<div class="ttc" id="group__urlinks_html_structur__links__t"><div class="ttname"><a href="group__urlinks.html#structur__links__t">ur_links_t</a></div><div class="ttdoc">Links structure. It contains a link count, link mask and link indexes. Array link_indexes stores posi...</div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00070">links.h:70</a></div></div>
<div class="ttc" id="unirec_8c_html_a67e3a2f4dff881d18a6a3c8cc67b906b"><div class="ttname"><a href="unirec_8c.html#a67e3a2f4dff881d18a6a3c8cc67b906b">UR_FIELD_SPECS_STATIC</a></div><div class="ttdeci">ur_static_field_specs_t UR_FIELD_SPECS_STATIC</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00137">unirec.c:137</a></div></div>
<div class="ttc" id="group__urtemplate_html_gabc843c9ffe0367e0e2d40bbf4f3c6053"><div class="ttname"><a href="group__urtemplate.html#gabc843c9ffe0367e0e2d40bbf4f3c6053">ur_ctx_create_input_template</a></div><div class="ttdeci">ur_template_t * ur_ctx_create_input_template(trap_ctx_t *ctx, int ifc, const char *fields, char **errstr)</div><div class="ttdoc">Create UniRec template and set it to input interface on specified context Creates UniRec template...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00733">unirec.c:733</a></div></div>
<div class="ttc" id="group__urtemplate_html_gadc58a81c9f7eb5a1ec3ba36d97612068"><div class="ttname"><a href="group__urtemplate.html#gadc58a81c9f7eb5a1ec3ba36d97612068">ur_set_var</a></div><div class="ttdeci">int ur_set_var(const ur_template_t *tmplt, void *rec, int field_id, const void *val_ptr, int val_len)</div><div class="ttdoc">Set content of variable-length UniRec field Copy given data into variable-length UniRec field...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01087">unirec.c:1087</a></div></div>
<div class="ttc" id="example__unirec_8c_html_a31c673502d2deeb8064d17eeab267f87"><div class="ttname"><a href="example__unirec_8c.html#a31c673502d2deeb8064d17eeab267f87">printf</a></div><div class="ttdeci">printf(&quot;%u %u %u %s\, ur_get(tmplt, buffer, F_FOO), ip_get_v4_as_int(&amp;(ur_get(tmplt, buffer, F_IP))), ur_get_var_len(tmplt, buffer, F_STR1), ur_get_ptr(tmplt, buffer, F_STR1))</div></div>
<div class="ttc" id="group__urtemplate_html_ga8b5745a7f8f493f0ccd9a2099e191efd"><div class="ttname"><a href="group__urtemplate.html#ga8b5745a7f8f493f0ccd9a2099e191efd">ur_get_var_as_str</a></div><div class="ttdeci">char * ur_get_var_as_str(const ur_template_t *tmplt, const void *rec, ur_field_id_t field_id)</div><div class="ttdoc">Get variable-length UniRec field as a C string Copy data of a variable-length field from UniRec recor...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01139">unirec.c:1139</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030a69882977753a49d1458e07f809aeb6c9"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a69882977753a49d1458e07f809aeb6c9">UR_TYPE_IP</a></div><div class="ttdoc">IP address (128b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00107">unirec.h:107</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030a02e71d920f238b5c0e66f3aa6e5a556b"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a02e71d920f238b5c0e66f3aa6e5a556b">UR_TYPE_UINT64</a></div><div class="ttdoc">unsigned int (64b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00103">unirec.h:103</a></div></div>
<div class="ttc" id="unirec_8h_html_a85bbc4f5be324da3382d0b587e9ae4aea9807b1695bbfc8402e79d493d37ca434"><div class="ttname"><a href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aea9807b1695bbfc8402e79d493d37ca434">UR_TMPLT_DIRECTION_NO</a></div><div class="ttdoc">template is not used for sending data </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00113">unirec.h:113</a></div></div>
<div class="ttc" id="unirec_8h_html_a272389ab0926da72541efdaf1bf9377c"><div class="ttname"><a href="unirec_8h.html#a272389ab0926da72541efdaf1bf9377c">UR_E_TYPE_MISMATCH</a></div><div class="ttdeci">#define UR_E_TYPE_MISMATCH</div><div class="ttdoc">The type of a field is different. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00084">unirec.h:84</a></div></div>
<div class="ttc" id="unirec_8h_html_a9d12294a70c27484f1f273d14c2231a1"><div class="ttname"><a href="unirec_8h.html#a9d12294a70c27484f1f273d14c2231a1">UR_COUNT_OF_TYPES</a></div><div class="ttdeci">#define UR_COUNT_OF_TYPES</div><div class="ttdoc">Constants for all possible types of UniRec fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00092">unirec.h:92</a></div></div>
<div class="ttc" id="example__unirec_8c_html_ac37164e80df5f86d98247768effab54d"><div class="ttname"><a href="example__unirec_8c.html#ac37164e80df5f86d98247768effab54d">rec</a></div><div class="ttdeci">void * rec</div><div class="ttdef"><b>Definition:</b> <a href="example__unirec_8c_source.html#l00035">example_unirec.c:35</a></div></div>
<div class="ttc" id="unirec_8h_html_a34d9bd7272e5f6d60ba60afef4d59e82"><div class="ttname"><a href="unirec_8h.html#a34d9bd7272e5f6d60ba60afef4d59e82">ur_field_specs_t::ur_field_types</a></div><div class="ttdeci">ur_field_type_t * ur_field_types</div><div class="ttdoc">Array of types of fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00150">unirec.h:150</a></div></div>
<div class="ttc" id="macaddr_8h_html_a5cb542bc605d9e6641afdd9dd6a6314e"><div class="ttname"><a href="macaddr_8h.html#a5cb542bc605d9e6641afdd9dd6a6314e">mac_addr_t</a></div><div class="ttdeci">mac_addr_t</div><div class="ttdef"><b>Definition:</b> <a href="macaddr_8h_source.html#l00063">macaddr.h:63</a></div></div>
<div class="ttc" id="group__urlinks_html_ga469c39d33966e8752fc53a4fba154d10"><div class="ttname"><a href="group__urlinks.html#ga469c39d33966e8752fc53a4fba154d10">ur_get_link_bit_field_position</a></div><div class="ttdeci">INLINE_IMPL uint64_t ur_get_link_bit_field_position(ur_links_t *links, unsigned int index)</div><div class="ttdoc">Get position in link_bit_field of link. Get position in link_bit_field of link specified by index of ...</div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00124">links.h:124</a></div></div>
<div class="ttc" id="unirec_8h_html_ab7dca2db4854ed9db6ffff65d4d9d10a"><div class="ttname"><a href="unirec_8h.html#ab7dca2db4854ed9db6ffff65d4d9d10a">UR_E_INVALID_TYPE</a></div><div class="ttdeci">#define UR_E_INVALID_TYPE</div><div class="ttdoc">The type of a field is not defined. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00086">unirec.h:86</a></div></div>
<div class="ttc" id="group__urtime_html_ga8a7a7eb122f30c16d0b3c18bbf313d50"><div class="ttname"><a href="group__urtime.html#ga8a7a7eb122f30c16d0b3c18bbf313d50">ur_time_from_sec_msec</a></div><div class="ttdeci">#define ur_time_from_sec_msec(sec, msec)</div><div class="ttdoc">Convert seconds and milliseconds to ur_time_t. </div><div class="ttdef"><b>Definition:</b> <a href="ur__time_8h_source.html#l00079">ur_time.h:79</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga0d8940c1aab20e50ab84da99715322fc"><div class="ttname"><a href="group__urtemplate.html#ga0d8940c1aab20e50ab84da99715322fc">ur_undefine_field_by_id</a></div><div class="ttdeci">int ur_undefine_field_by_id(ur_field_id_t field_id)</div><div class="ttdoc">Undefine UniRec field by its id Undefine UniRec field created at run-time. It erases given field from...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00630">unirec.c:630</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga7e2d113dfd7629182d2b18c29c408707"><div class="ttname"><a href="group__urtemplate.html#ga7e2d113dfd7629182d2b18c29c408707">ur_create_record</a></div><div class="ttdeci">void * ur_create_record(const ur_template_t *tmplt, uint16_t max_var_size)</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01124">unirec.c:1124</a></div></div>
<div class="ttc" id="unirec_8h_html_a3331d5fc7eeda55fbbb33543da5db0d9"><div class="ttname"><a href="unirec_8h.html#a3331d5fc7eeda55fbbb33543da5db0d9">ur_template_t::count</a></div><div class="ttdeci">uint16_t count</div><div class="ttdoc">Count of fields in template. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00179">unirec.h:179</a></div></div>
<div class="ttc" id="unirec_8h_html_a6d4be6c0e3ab412dad7052b6b92cf064"><div class="ttname"><a href="unirec_8h.html#a6d4be6c0e3ab412dad7052b6b92cf064">UR_DEFAULT_LENGTH_OF_TEMPLATE</a></div><div class="ttdeci">#define UR_DEFAULT_LENGTH_OF_TEMPLATE</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00066">unirec.h:66</a></div></div>
<div class="ttc" id="unirec_8h_html_a3286791b4d19706d580fb5dbf07ed5f4"><div class="ttname"><a href="unirec_8h.html#a3286791b4d19706d580fb5dbf07ed5f4">UR_E_INVALID_NAME</a></div><div class="ttdeci">#define UR_E_INVALID_NAME</div><div class="ttdoc">The given name is not present in a template. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00085">unirec.h:85</a></div></div>
<div class="ttc" id="unirec_8h_html_structur__field__specs__t"><div class="ttname"><a href="unirec_8h.html#structur__field__specs__t">ur_field_specs_t</a></div><div class="ttdoc">UniRec fields structure It contains all fields which are statically defined by UR_FIELDS(...) and run-time generated fields. This structure can be modified during run-time by generating new fields and erasing existing fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00147">unirec.h:147</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga3b7d40d098716943f035185d26aeff29"><div class="ttname"><a href="group__urtemplate.html#ga3b7d40d098716943f035185d26aeff29">ur_undefine_field</a></div><div class="ttdeci">int ur_undefine_field(const char *name)</div><div class="ttdoc">Undefine UniRec field by its name Undefine UniRec field created at run-time. It erases given field fr...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00655">unirec.c:655</a></div></div>
<div class="ttc" id="group__urtemplate_html_gae1a76a48d18a09ee2f32ed638bbcbcf7"><div class="ttname"><a href="group__urtemplate.html#gae1a76a48d18a09ee2f32ed638bbcbcf7">ur_create_template_from_ifc_spec</a></div><div class="ttdeci">ur_template_t * ur_create_template_from_ifc_spec(const char *ifc_data_fmt)</div><div class="ttdoc">Create UniRec template from data format string. Creates new UniRec template (function ur_create_templ...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00560">unirec.c:560</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030a83881000b9637c4905af7a052238cb40"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a83881000b9637c4905af7a052238cb40">UR_TYPE_DOUBLE</a></div><div class="ttdoc">double (64b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00106">unirec.h:106</a></div></div>
<div class="ttc" id="unirec_8h_html_a8b797b7bc9ad2159ef020009f031542a"><div class="ttname"><a href="unirec_8h.html#a8b797b7bc9ad2159ef020009f031542a">UR_NO_DYNAMIC_VALUES</a></div><div class="ttdeci">#define UR_NO_DYNAMIC_VALUES</div><div class="ttdoc">Value of variable &quot;first_dynamic&quot; if no dynamic values are present. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00077">unirec.h:77</a></div></div>
<div class="ttc" id="unirec_8h_html_acf8005fa9976d0fbe61c40aefeea199c"><div class="ttname"><a href="unirec_8h.html#acf8005fa9976d0fbe61c40aefeea199c">ur_template_t::ids</a></div><div class="ttdeci">int16_t * ids</div><div class="ttdoc">Array of ids in template. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00177">unirec.h:177</a></div></div>
<div class="ttc" id="group__urtemplate_html_gafd4879120b30f35f9753e2104eb55920"><div class="ttname"><a href="group__urtemplate.html#gafd4879120b30f35f9753e2104eb55920">ur_is_present</a></div><div class="ttdeci">#define ur_is_present(tmplt, field_id)</div><div class="ttdoc">Is given field present in given template? Return true (non-zero value) if given template contains fie...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00469">unirec.h:469</a></div></div>
<div class="ttc" id="group__uripaddr_html_unionip__addr__t"><div class="ttname"><a href="group__uripaddr.html#unionip__addr__t">ip_addr_t</a></div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00101">ipaddr.h:101</a></div></div>
<div class="ttc" id="unirec_8h_html_accf8d970c42f19c249ece4959a7f38b6"><div class="ttname"><a href="unirec_8h.html#accf8d970c42f19c249ece4959a7f38b6">UR_ITER_END</a></div><div class="ttdeci">#define UR_ITER_END</div><div class="ttdoc">Last value in iterating through the fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00074">unirec.h:74</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaa95364028416eca5e5741dee2533e35a"><div class="ttname"><a href="group__urtemplate.html#gaa95364028416eca5e5741dee2533e35a">ur_get_var_len</a></div><div class="ttdeci">#define ur_get_var_len(tmplt, rec, field_id)</div><div class="ttdoc">Get size of a variable sized field in the record. Get size of a variable-length field in the record...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00417">unirec.h:417</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaf622ee72f07d52a617a22be35088d77e"><div class="ttname"><a href="group__urtemplate.html#gaf622ee72f07d52a617a22be35088d77e">ur_free_record</a></div><div class="ttdeci">void ur_free_record(void *record)</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01133">unirec.c:1133</a></div></div>
<div class="ttc" id="unirec_8h_html_a17cba425af74e590b73d23d4e0fda44a"><div class="ttname"><a href="unirec_8h.html#a17cba425af74e590b73d23d4e0fda44a">ur_field_id_t</a></div><div class="ttdeci">int16_t ur_field_id_t</div><div class="ttdoc">Type of UniRec field identifiers. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00119">unirec.h:119</a></div></div>
<div class="ttc" id="group__urlinks_html_a4c9bf894635e57dbd1101cdd4210b4d1"><div class="ttname"><a href="group__urlinks.html#a4c9bf894635e57dbd1101cdd4210b4d1">ur_links_t::link_count</a></div><div class="ttdeci">unsigned int link_count</div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00071">links.h:71</a></div></div>
<div class="ttc" id="unirec_8h_html_a82342fa356ae9d09be33db986f6d2df2"><div class="ttname"><a href="unirec_8h.html#a82342fa356ae9d09be33db986f6d2df2">UR_INVALID_OFFSET</a></div><div class="ttdeci">#define UR_INVALID_OFFSET</div><div class="ttdoc">Default value of all offsets (value is not in the record) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00076">unirec.h:76</a></div></div>
<div class="ttc" id="group__uripaddr_html_gad57ac58e8823c5197445e9035843a417"><div class="ttname"><a href="group__uripaddr.html#gad57ac58e8823c5197445e9035843a417">ip_from_int</a></div><div class="ttdeci">INLINE_IMPL ip_addr_t ip_from_int(uint32_t i)</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00183">ipaddr.h:183</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga52dad8336d06db586dd23820263f5fc2"><div class="ttname"><a href="group__urtemplate.html#ga52dad8336d06db586dd23820263f5fc2">ur_rec_varlen_size</a></div><div class="ttdeci">uint16_t ur_rec_varlen_size(const ur_template_t *tmplt, const void *rec)</div><div class="ttdoc">Get size of variable sized part of UniRec record Get total size of all variable-length fields in an U...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01114">unirec.c:1114</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga6bfac2d2161cf28551a467a382feda7e"><div class="ttname"><a href="group__urtemplate.html#ga6bfac2d2161cf28551a467a382feda7e">ur_free_template</a></div><div class="ttdeci">void ur_free_template(ur_template_t *tmplt)</div><div class="ttdoc">Destroy UniRec template Free all memory allocated for a template created previously by ur_create_temp...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01023">unirec.c:1023</a></div></div>
<div class="ttc" id="unirec_8h_html_a8489cc7746e8177392cdd13465e96547"><div class="ttname"><a href="unirec_8h.html#a8489cc7746e8177392cdd13465e96547">ur_static_field_specs_t::ur_last_id</a></div><div class="ttdeci">ur_field_id_t ur_last_id</div><div class="ttdoc">Last specified ID. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00139">unirec.h:139</a></div></div>
<div class="ttc" id="unirec_8h_html"><div class="ttname"><a href="unirec_8h.html">unirec.h</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga5ac83d4ba9ab47e065f7847272beac67"><div class="ttname"><a href="group__urtemplate.html#ga5ac83d4ba9ab47e065f7847272beac67">ur_ctx_create_bidirectional_template</a></div><div class="ttdeci">ur_template_t * ur_ctx_create_bidirectional_template(trap_ctx_t *ctx, int ifc_in, int ifc_out, const char *fields, char **errstr)</div><div class="ttdoc">Create UniRec template and set it to input and output interface on specified context Creates UniRec t...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00810">unirec.c:810</a></div></div>
<div class="ttc" id="group__uripaddr_html_gaeaa8f3d94315e53ebf8c43c7dde8f6cb"><div class="ttname"><a href="group__uripaddr.html#gaeaa8f3d94315e53ebf8c43c7dde8f6cb">ip_is6</a></div><div class="ttdeci">INLINE_IMPL int ip_is6(const ip_addr_t *addr)</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00143">ipaddr.h:143</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga17d837166e63b47a453f56f00541b0d8"><div class="ttname"><a href="group__urtemplate.html#ga17d837166e63b47a453f56f00541b0d8">ur_rec_fixlen_size</a></div><div class="ttdeci">#define ur_rec_fixlen_size(tmplt)</div><div class="ttdoc">Get size of fixed-length part of UniRec record Get total size of UniRec record except variable-length...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00502">unirec.h:502</a></div></div>
<div class="ttc" id="unirec_8c_html_a36505bbf562889210af7a858dc891fa5"><div class="ttname"><a href="unirec_8c.html#a36505bbf562889210af7a858dc891fa5">mac_cmp</a></div><div class="ttdeci">INLINE_IMPL int mac_cmp(const mac_addr_t *addr1, const mac_addr_t *addr2)</div><div class="ttdef"><b>Definition:</b> <a href="macaddr_8h_source.html#l00107">macaddr.h:107</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030af3d7332fe3d00598405e5ce4cb70d0b3"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030af3d7332fe3d00598405e5ce4cb70d0b3">UR_TYPE_BYTES</a></div><div class="ttdoc">var-len fields (generic string of bytes) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00095">unirec.h:95</a></div></div>
<div class="ttc" id="unirec_8h_html_a5ec4e8fb6f0bacae7cda7af77f8ef1e2"><div class="ttname"><a href="unirec_8h.html#a5ec4e8fb6f0bacae7cda7af77f8ef1e2">ur_template_t::static_size</a></div><div class="ttdeci">uint16_t static_size</div><div class="ttdoc">Size of static part. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00180">unirec.h:180</a></div></div>
<div class="ttc" id="group__urlinks_html_ga20fe681784b2536ad4293ed1d2932da2"><div class="ttname"><a href="group__urlinks.html#ga20fe681784b2536ad4293ed1d2932da2">ur_get_link_index</a></div><div class="ttdeci">INLINE_IMPL int ur_get_link_index(ur_links_t *links, uint64_t link_bit_field)</div><div class="ttdoc">Get index of link (0 - (n-1)) Function gets search link_indexes array for value corresponding to pass...</div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00103">links.h:103</a></div></div>
<div class="ttc" id="unirec_8h_html_a547b0de3d97d62b5415ebcc371e87a19"><div class="ttname"><a href="unirec_8h.html#a547b0de3d97d62b5415ebcc371e87a19">ur_template_t::ifc_out</a></div><div class="ttdeci">uint32_t ifc_out</div><div class="ttdoc">output interface number (stored only if the direction == UR_TMPLT_DIRECTION_BI) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00182">unirec.h:182</a></div></div>
<div class="ttc" id="unirec_8h_html_a20d9d5eb643e04cdb13a84195993ef92"><div class="ttname"><a href="unirec_8h.html#a20d9d5eb643e04cdb13a84195993ef92">field_spec_t::size</a></div><div class="ttdeci">int size</div><div class="ttdoc">Size of a field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00167">unirec.h:167</a></div></div>
<div class="ttc" id="unirec_8h_html_a2e28bd09fc5056730e543d023cf0a2da"><div class="ttname"><a href="unirec_8h.html#a2e28bd09fc5056730e543d023cf0a2da">ur_field_specs_t::ur_last_statically_defined_id</a></div><div class="ttdeci">ur_field_id_t ur_last_statically_defined_id</div><div class="ttdoc">Last statically defined field by UR_FIELDS(...) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00151">unirec.h:151</a></div></div>
<div class="ttc" id="group__urlinks_html_gabd556824006b81cd58ddb67907d86ca8"><div class="ttname"><a href="group__urlinks.html#gabd556824006b81cd58ddb67907d86ca8">MAX_LINK_COUNT</a></div><div class="ttdeci">#define MAX_LINK_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00064">links.h:64</a></div></div>
<div class="ttc" id="unirec_8h_html_a0876b58dc84e725e78e94f0081e25c67"><div class="ttname"><a href="unirec_8h.html#a0876b58dc84e725e78e94f0081e25c67">ur_field_specs_t::ur_last_id</a></div><div class="ttdeci">ur_field_id_t ur_last_id</div><div class="ttdoc">The highest ID of a field + 1. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00152">unirec.h:152</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030ade2ea64db377e3c5a4f3940af14a1399"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ade2ea64db377e3c5a4f3940af14a1399">UR_TYPE_UINT32</a></div><div class="ttdoc">unsigned int (32b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00101">unirec.h:101</a></div></div>
<div class="ttc" id="example__unirec_8c_html_a48d17eb4cf188b1138d1d0836e3e8cd8"><div class="ttname"><a href="example__unirec_8c.html#a48d17eb4cf188b1138d1d0836e3e8cd8">memcpy</a></div><div class="ttdeci">memcpy(buffer, rec, ur_rec_size(tmplt, rec))</div></div>
<div class="ttc" id="group__urlinks_html_abf9e1b6345f9757c679df5633313ee75"><div class="ttname"><a href="group__urlinks.html#abf9e1b6345f9757c679df5633313ee75">ur_links_t::link_mask</a></div><div class="ttdeci">uint64_t link_mask</div><div class="ttdef"><b>Definition:</b> <a href="links_8h_source.html#l00072">links.h:72</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga238d68dc4d1dc5b0369e907b0e2d9711"><div class="ttname"><a href="group__urtemplate.html#ga238d68dc4d1dc5b0369e907b0e2d9711">ur_init</a></div><div class="ttdeci">int ur_init(ur_static_field_specs_t field_specs_static)</div><div class="ttdoc">Initialize UniRec structures Initialize UniRec structures. Function is called during defining first o...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00141">unirec.c:141</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga770ecf70233ae337f3aa4af9540a11ba"><div class="ttname"><a href="group__urtemplate.html#ga770ecf70233ae337f3aa4af9540a11ba">ur_get_size</a></div><div class="ttdeci">#define ur_get_size(field_id)</div><div class="ttdoc">Get size of UniRec field Get size of a fixed-length UniRec field. When variable-length field is passe...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00348">unirec.h:348</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaa21b5e95ade1d2d6993fcf9f9a6c4548"><div class="ttname"><a href="group__urtemplate.html#gaa21b5e95ade1d2d6993fcf9f9a6c4548">ur_ctx_set_input_template</a></div><div class="ttdeci">int ur_ctx_set_input_template(trap_ctx_t *ctx, int ifc, ur_template_t *tmplt)</div><div class="ttdoc">Set UniRec template to input interface on specified context. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00791">unirec.c:791</a></div></div>
<div class="ttc" id="unirec_8h_html_a0d8bbc1307c342a3a83bc2f5193e5fdf"><div class="ttname"><a href="unirec_8h.html#a0d8bbc1307c342a3a83bc2f5193e5fdf">ur_iter_t</a></div><div class="ttdeci">ur_field_id_t ur_iter_t</div><div class="ttdoc">Type for identifying iteration id through all fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00120">unirec.h:120</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030">ur_field_type_t</a></div><div class="ttdeci">ur_field_type_t</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00093">unirec.h:93</a></div></div>
<div class="ttc" id="unirec_8h_html_a19c4a8e87b02d9f08120d80ee99d377d"><div class="ttname"><a href="unirec_8h.html#a19c4a8e87b02d9f08120d80ee99d377d">UR_DEFAULT_LENGTH_OF_FIELD_TYPE</a></div><div class="ttdeci">#define UR_DEFAULT_LENGTH_OF_FIELD_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00068">unirec.h:68</a></div></div>
<div class="ttc" id="unirec_8c_html_a7b3f651fa0b6a4eac840c6c2233c4460"><div class="ttname"><a href="unirec_8c.html#a7b3f651fa0b6a4eac840c6c2233c4460">mac_from_str</a></div><div class="ttdeci">INLINE_IMPL int mac_from_str(const char *str, mac_addr_t *addr)</div><div class="ttdef"><b>Definition:</b> <a href="macaddr_8h_source.html#l00087">macaddr.h:87</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga10c9d739b4b74b4547099b9095857dff"><div class="ttname"><a href="group__urtemplate.html#ga10c9d739b4b74b4547099b9095857dff">ur_print_template</a></div><div class="ttdeci">void ur_print_template(ur_template_t *tmplt)</div><div class="ttdoc">Print UniRec template Print static_size, first_dynamic and table of offsets to stdout (for debugging)...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01050">unirec.c:1050</a></div></div>
<div class="ttc" id="unirec_8h_html_a217c15792290530a3e08fa5973c8ca5a"><div class="ttname"><a href="unirec_8h.html#a217c15792290530a3e08fa5973c8ca5a">ur_field_specs_t::ur_undefine_fields</a></div><div class="ttdeci">ur_field_id_linked_list_t * ur_undefine_fields</div><div class="ttdoc">linked list of free (undefined) IDs </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00157">unirec.h:157</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga31d468a710c302abfc212784c99ef889"><div class="ttname"><a href="group__urtemplate.html#ga31d468a710c302abfc212784c99ef889">ur_ifc_data_fmt_to_field_names</a></div><div class="ttdeci">char * ur_ifc_data_fmt_to_field_names(const char *ifc_data_fmt)</div><div class="ttdoc">Parses field names from data format Function parses field names from data format and returns pointer ...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00369">unirec.c:369</a></div></div>
<div class="ttc" id="group__uripaddr_html_ga4aa063dc904a602c2ee1f46bf50315e7"><div class="ttname"><a href="group__uripaddr.html#ga4aa063dc904a602c2ee1f46bf50315e7">ip_to_str</a></div><div class="ttdeci">INLINE_IMPL void ip_to_str(const ip_addr_t *addr, char *str)</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00325">ipaddr.h:325</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaf893df4c0a8d17cae3f8999e9bcce312"><div class="ttname"><a href="group__urtemplate.html#gaf893df4c0a8d17cae3f8999e9bcce312">compare_fields</a></div><div class="ttdeci">int compare_fields(const void *field1, const void *field2)</div><div class="ttdoc">Compare fields Compare two fields. This function is for sorting the fields in the right order...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00720">unirec.c:720</a></div></div>
<div class="ttc" id="group__urtemplate_html_gabfbfcce0fe6729ceb692d09541336c33"><div class="ttname"><a href="group__urtemplate.html#gabfbfcce0fe6729ceb692d09541336c33">ur_template_string_delimiter</a></div><div class="ttdeci">char * ur_template_string_delimiter(const ur_template_t *tmplt, int delimiter)</div><div class="ttdoc">Get UniRec specifier of the tmplt template with delimiter between fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00188">unirec.c:188</a></div></div>
<div class="ttc" id="unirec_8h_html_a4aedfaa872d40f452909dc395a0fbc4a"><div class="ttname"><a href="unirec_8h.html#a4aedfaa872d40f452909dc395a0fbc4a">ur_template_t::offset</a></div><div class="ttdeci">uint16_t * offset</div><div class="ttdoc">Table of offsets. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00175">unirec.h:175</a></div></div>
<div class="ttc" id="unirec_8h_html_a09399c945b0bccbf812eac654e23ca3b"><div class="ttname"><a href="unirec_8h.html#a09399c945b0bccbf812eac654e23ca3b">UR_UNINITIALIZED</a></div><div class="ttdeci">#define UR_UNINITIALIZED</div><div class="ttdoc">Indicator if the UniRec has not been initialized by calling function ur_init. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00078">unirec.h:78</a></div></div>
<div class="ttc" id="group__urlinks_html_ga79615b30cdec474a94bb5ce5f3eeb34f"><div class="ttname"><a href="group__urlinks.html#ga79615b30cdec474a94bb5ce5f3eeb34f">ur_create_links</a></div><div class="ttdeci">ur_links_t * ur_create_links(const char *mask)</div><div class="ttdoc">Create and initialize links structure. Create new links structure and initialize it from link mask in...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01387">unirec.c:1387</a></div></div>
<div class="ttc" id="example__unirec_8c_html_afed200b0ec3ad3a8783e01d8eea873ee"><div class="ttname"><a href="example__unirec_8c.html#afed200b0ec3ad3a8783e01d8eea873ee">if</a></div><div class="ttdeci">if(new_id&lt; 0)</div><div class="ttdef"><b>Definition:</b> <a href="example__unirec_8c_source.html#l00078">example_unirec.c:78</a></div></div>
<div class="ttc" id="unirec_8h_html_a2049527f65320075c1e5e3bb9c9aff15"><div class="ttname"><a href="unirec_8h.html#a2049527f65320075c1e5e3bb9c9aff15">ur_field_specs_t::intialized</a></div><div class="ttdeci">uint8_t intialized</div><div class="ttdoc">If the UniRec is initialized by function ur_init variable is set to UR_INITIALIZED, otherwise 0. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00158">unirec.h:158</a></div></div>
<div class="ttc" id="unirec_8h_html_a3ff58f0882adb970deec7c6f7faa7f7c"><div class="ttname"><a href="unirec_8h.html#a3ff58f0882adb970deec7c6f7faa7f7c">ur_template_t::first_dynamic</a></div><div class="ttdeci">uint16_t first_dynamic</div><div class="ttdoc">First dynamic (variable-length) field. Index to the ids array. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00178">unirec.h:178</a></div></div>
<div class="ttc" id="unirec_8h_html_ad5306965acd4764b31d6634a0947e7a2"><div class="ttname"><a href="unirec_8h.html#ad5306965acd4764b31d6634a0947e7a2">ur_static_field_specs_t::ur_field_types</a></div><div class="ttdeci">ur_field_type_t * ur_field_types</div><div class="ttdoc">Array of types of fields. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00138">unirec.h:138</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030ac5e66194d71459394d2eff516ce2c2d1"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ac5e66194d71459394d2eff516ce2c2d1">UR_TYPE_TIME</a></div><div class="ttdoc">time (64b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00109">unirec.h:109</a></div></div>
<div class="ttc" id="group__uripaddr_html_gabf382d0ceec2ca2d62cb94ecf000ecd4"><div class="ttname"><a href="group__uripaddr.html#gabf382d0ceec2ca2d62cb94ecf000ecd4">ip_is4</a></div><div class="ttdeci">INLINE_IMPL int ip_is4(const ip_addr_t *addr)</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00131">ipaddr.h:131</a></div></div>
<div class="ttc" id="group__urtemplate_html_gade89057b16556ff28d540a1f0473ab81"><div class="ttname"><a href="group__urtemplate.html#gade89057b16556ff28d540a1f0473ab81">ur_copy_fields</a></div><div class="ttdeci">void ur_copy_fields(const ur_template_t *dst_tmplt, void *dst, const ur_template_t *src_tmplt, const void *src)</div><div class="ttdoc">Copy data from one UniRec record to another. Copies all fields present in both templates from src to ...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01163">unirec.c:1163</a></div></div>
<div class="ttc" id="unirec_8c_html_a6c1aeacaf5107408c58188e63406bcd1"><div class="ttname"><a href="unirec_8c.html#a6c1aeacaf5107408c58188e63406bcd1">ur_var_change_size</a></div><div class="ttdeci">void ur_var_change_size(const ur_template_t *tmplt, void *rec, int field_id, int new_val_len)</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01061">unirec.c:1061</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030a6cd2b8018fd5edf0c17780084682ef07"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a6cd2b8018fd5edf0c17780084682ef07">UR_TYPE_CHAR</a></div><div class="ttdoc">char </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00096">unirec.h:96</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga185fb29f27d79c9005e3f01a23953398"><div class="ttname"><a href="group__urtemplate.html#ga185fb29f27d79c9005e3f01a23953398">ur_set_var_offset</a></div><div class="ttdeci">#define ur_set_var_offset(tmplt, rec, field_id, offset_val)</div><div class="ttdoc">Set offset of variable-length field in the record. Set offset of specified variable-length field in t...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00439">unirec.h:439</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030ac5e6afc0dcc62bf41b2f8ecaef4f2d46"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030ac5e6afc0dcc62bf41b2f8ecaef4f2d46">UR_TYPE_UINT8</a></div><div class="ttdoc">unsigned int (8b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00097">unirec.h:97</a></div></div>
<div class="ttc" id="unirec_8h_html_structur__template__t"><div class="ttname"><a href="unirec_8h.html#structur__template__t">ur_template_t</a></div><div class="ttdoc">UniRec template. It contains a table mapping a field to its position in an UniRec record...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00174">unirec.h:174</a></div></div>
<div class="ttc" id="unirec_8c_html_abd6a82288d5136644ea1e3f8c68f6192"><div class="ttname"><a href="unirec_8c.html#abd6a82288d5136644ea1e3f8c68f6192">UR_MEMORY_ERROR</a></div><div class="ttdeci">const char UR_MEMORY_ERROR[]</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00139">unirec.c:139</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaa88f0c45cc9901eabe9baabb88dc1d68"><div class="ttname"><a href="group__urtemplate.html#gaa88f0c45cc9901eabe9baabb88dc1d68">ur_size_of</a></div><div class="ttdeci">#define ur_size_of(type)</div><div class="ttdoc">Get size of UniRec type Get size of fixed-length UniRec type. For variable-length type return -1...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00323">unirec.h:323</a></div></div>
<div class="ttc" id="unirec_8h_html_a85bbc4f5be324da3382d0b587e9ae4ae"><div class="ttname"><a href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4ae">ur_tmplt_direction</a></div><div class="ttdeci">ur_tmplt_direction</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00112">unirec.h:112</a></div></div>
<div class="ttc" id="unirec_8h_html_a05c900af0773d6801f191b14f29c6030a6b28189bd4b43d8f83afb712899b5f5a"><div class="ttname"><a href="unirec_8h.html#a05c900af0773d6801f191b14f29c6030a6b28189bd4b43d8f83afb712899b5f5a">UR_TYPE_INT8</a></div><div class="ttdoc">int (8b) </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00098">unirec.h:98</a></div></div>
<div class="ttc" id="unirec_8h_html_ae3458bcec0d7af5a00cfdb528f4f36b7"><div class="ttname"><a href="unirec_8h.html#ae3458bcec0d7af5a00cfdb528f4f36b7">ur_template_t::offset_size</a></div><div class="ttdeci">uint16_t offset_size</div><div class="ttdoc">size of offset table. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00176">unirec.h:176</a></div></div>
<div class="ttc" id="group__uripaddr_html_ga34b4da3670a99958f7038c90da2b7152"><div class="ttname"><a href="group__uripaddr.html#ga34b4da3670a99958f7038c90da2b7152">ip_from_4_bytes_le</a></div><div class="ttdeci">INLINE_IMPL ip_addr_t ip_from_4_bytes_le(char b[4])</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00218">ipaddr.h:218</a></div></div>
<div class="ttc" id="group__urtemplate_html_gaadde868d2fc5dd09710fddb8e629bb87"><div class="ttname"><a href="group__urtemplate.html#gaadde868d2fc5dd09710fddb8e629bb87">ur_template_compare</a></div><div class="ttdeci">int ur_template_compare(const ur_template_t *tmpltA, const ur_template_t *tmpltB)</div><div class="ttdoc">Compares fields of two UniRec templates Function compares only sets of UniRec fields (direction is no...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01039">unirec.c:1039</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga8877cbc958a4943aaf720154f8338ae3"><div class="ttname"><a href="group__urtemplate.html#ga8877cbc958a4943aaf720154f8338ae3">ur_iter_fields_record_order</a></div><div class="ttdeci">ur_iter_t ur_iter_fields_record_order(const ur_template_t *tmplt, int index)</div><div class="ttdoc">Iterate over fields of a template This function can be used to iterate over all fields of a given tem...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01216">unirec.c:1216</a></div></div>
<div class="ttc" id="group__urtemplate_html_gae04af6d1916490e641f7640e440a8e7c"><div class="ttname"><a href="group__urtemplate.html#gae04af6d1916490e641f7640e440a8e7c">ur_get_id_by_name</a></div><div class="ttdeci">int ur_get_id_by_name(const char *name)</div><div class="ttdoc">Get ID of a field by its name Get ID of a field by its name. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00709">unirec.c:709</a></div></div>
<div class="ttc" id="unirec_8h_html_a4821db36ecbefac234e93423e1572d8b"><div class="ttname"><a href="unirec_8h.html#a4821db36ecbefac234e93423e1572d8b">UR_DEFAULT_LENGTH_OF_FIELD_NAME</a></div><div class="ttdeci">#define UR_DEFAULT_LENGTH_OF_FIELD_NAME</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00067">unirec.h:67</a></div></div>
<div class="ttc" id="group__urtemplate_html_gadad09e518520d1791d94b29ee7af2487"><div class="ttname"><a href="group__urtemplate.html#gadad09e518520d1791d94b29ee7af2487">ur_values_get_name_start_end</a></div><div class="ttdeci">const char * ur_values_get_name_start_end(uint32_t start, uint32_t end, int32_t value)</div><div class="ttdoc">Returns name of specified value (Helper function) Helper function for ur_values_get_name. This function returns name of specified value and field, which is defined in values file. Function needs start and end index of a field. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l01364">unirec.c:1364</a></div></div>
<div class="ttc" id="group__urtemplate_html_ga7c3f3afcdfe5ad24f148ec9231b6e799"><div class="ttname"><a href="group__urtemplate.html#ga7c3f3afcdfe5ad24f148ec9231b6e799">ur_template_string</a></div><div class="ttdeci">#define ur_template_string(tmplt)</div><div class="ttdoc">Get string of a template Get names and sizes of fields separated by comma. Return string has to be fr...</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00315">unirec.h:315</a></div></div>
<div class="ttc" id="unirec_8c_html_a8b963edd959e1d4bdd91d82807a384ba"><div class="ttname"><a href="unirec_8c.html#a8b963edd959e1d4bdd91d82807a384ba">ur_field_specs</a></div><div class="ttdeci">ur_field_specs_t ur_field_specs</div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00136">unirec.c:136</a></div></div>
<div class="ttc" id="unirec_8h_html_a85bbc4f5be324da3382d0b587e9ae4aeac22b0048de587bc9d53bf5f4bf3dade6"><div class="ttname"><a href="unirec_8h.html#a85bbc4f5be324da3382d0b587e9ae4aeac22b0048de587bc9d53bf5f4bf3dade6">UR_TMPLT_DIRECTION_OUT</a></div><div class="ttdoc">ouput direction </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8h_source.html#l00115">unirec.h:115</a></div></div>
<div class="ttc" id="unirec_8c_html_a2a84dc8eb5478757192b2df4004c148a"><div class="ttname"><a href="unirec_8c.html#a2a84dc8eb5478757192b2df4004c148a">ur_field_type_str</a></div><div class="ttdeci">const char * ur_field_type_str[]</div><div class="ttdoc">UniRec data types. </div><div class="ttdef"><b>Definition:</b> <a href="unirec_8c_source.html#l00117">unirec.c:117</a></div></div>
<div class="ttc" id="group__uripaddr_html_gac2c790297e16730292696c44306dd1a6"><div class="ttname"><a href="group__uripaddr.html#gac2c790297e16730292696c44306dd1a6">ip_get_v4_as_bytes</a></div><div class="ttdeci">INLINE_IMPL char * ip_get_v4_as_bytes(const ip_addr_t *addr)</div><div class="ttdef"><b>Definition:</b> <a href="ipaddr_8h_source.html#l00171">ipaddr.h:171</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
